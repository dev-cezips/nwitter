/*! For license information please see main.f8daa091.js.LICENSE.txt */
!function(){var e={110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return b(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||b(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===y},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===u},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===w||e.$$typeof===m)},t.typeOf=b},309:function(e,t,n){"use strict";e.exports=n(746)},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),S=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,U=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case I:return"Profiler";case T:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Te=null;function Ie(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),_e(e.stateNode,e.type,t))}}function Ee(e){xe?Te?Te.push(e):Te=[e]:xe=e}function Se(){if(xe){var e=xe,t=Te;if(Te=xe=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Ne=!1;function Re(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==xe||null!==Te)&&(Ae(),Se())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Ue=null,Fe=!1,je=null,Ve={onError:function(e){Me=!0,Ue=e}};function ze(e,t,n,r,i,a,o,u,s){Me=!1,Ue=null,Le.apply(Ve,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(qe(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,_t,xt,Tt,It,Et=!1,St=[],Ct=null,At=null,Nt=null,Rt=new Map,Pt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ut(e){var t=gi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void It(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function jt(e,t,n){Ft(e)&&n.delete(t)}function Vt(){Et=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==At&&Ft(At)&&(At=null),null!==Nt&&Ft(Nt)&&(Nt=null),Rt.forEach(jt),Pt.forEach(jt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function qt(e){function t(t){return zt(t,e)}if(0<St.length){zt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==At&&zt(At,e),null!==Nt&&zt(Nt,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ut(n),null===n.blockedOn&&Ot.shift()}var Bt=w.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Kt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Gt(e,t,n,r){if(Ht){var i=$t(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&bt(a),null===(a=$t(e,t,n,r))&&Hr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=be(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=U({},cn,{view:0,detail:0}),hn=an(fn),dn=U({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(U({},dn,{dataTransfer:0})),yn=an(U({},fn,{relatedTarget:0})),mn=an(U({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=U({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),wn=an(U({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function In(){return Tn}var En=U({},fn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=an(En),Cn=an(U({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(U({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Nn=an(U({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=U({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Rn),On=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Un=l&&(!Dn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ee(r),0<(t=Kr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Fr(e,0)}function $n(e){if(G(wi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&$n(Gn)){var t=[];Wn(t,Gn,e,be(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Gn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Kr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},xr={},Tr={};function Ir(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return xr[e]=n[t];return e}l&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Er=Ir("animationend"),Sr=Ir("animationiteration"),Cr=Ir("animationstart"),Ar=Ir("transitionend"),Nr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Nr.set(e,t),s(t,[e])}for(var Or=0;Or<Rr.length;Or++){var Dr=Rr[Or];Pr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Pr(Er,"onAnimationEnd"),Pr(Sr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Ue;Me=!1,Ue=null,Fe||(Fe=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Ur(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Ur(i,u,c),a=s}}}if(Fe)throw e=je,Fe=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Re((function(){var r=a,i=be(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Sn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=An;break;case Er:case Sr:case Cr:s=mn;break;case Ar:s=Nn;break;case"scroll":s=hn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Pe(p,h))&&l.push(Wr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:wi(s),d=null==c?u:wi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Gr(d))p++;for(d=0,v=h;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Gr(l),h=Gr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?wi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Yn;else if(Hn(u))if(Jn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Wn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?wi(r):window,e){case"focusin":(Hn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,wr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Un&&"ko"!==n.locale&&(qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&qn&&(g=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,qn=!0)),0<(m=Kr(r,k)).length&&(k=new wn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(jn=!0,Fn);case"textInput":return(e=t.data)===Fn&&jn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Fr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Wr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Wr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[di]||null}var _i=[],xi=-1;function Ti(e){return{current:e}}function Ii(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ei(e,t){xi++,_i[xi]=e.current,e.current=t}var Si={},Ci=Ti(Si),Ai=Ti(!1),Ni=Si;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Si;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ii(Ai),Ii(Ci)}function Di(e,t,n){if(Ci.current!==Si)throw Error(a(168));Ei(Ci,t),Ei(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,B(e)||"Unknown",i));return U({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Si,Ni=Ci.current,Ei(Ci,e),Ei(Ai,Ai.current),!0}function Ui(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ai),Ii(Ci),Ei(Ci,e)):Ii(Ai),Ei(Ai,n)}var Fi=null,ji=!1,Vi=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function qi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=kt;try{var n=Fi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,ji=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ge(Ze,qi),i}finally{kt=t,Vi=!1}}return null}var Bi=[],Hi=0,Wi=null,Ki=0,Gi=[],Qi=0,$i=null,Yi=1,Ji="";function Xi(e,t){Bi[Hi++]=Ki,Bi[Hi++]=Wi,Wi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=Yi,Gi[Qi++]=Ji,Gi[Qi++]=$i,$i=e;var r=Yi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else Yi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Wi;)Wi=Bi[--Hi],Bi[Hi]=null,Ki=Bi[--Hi],Bi[Hi]=null;for(;e===$i;)$i=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,Yi=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=w.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Ti(null),ga=null,ka=null,wa=null;function ba(){wa=ka=ga=null}function _a(e){var t=ma.current;Ii(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ta(e,t){ga=e,wa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Ia(e){var t=e._currentValue;if(wa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ea=null;function Sa(e){null===Ea?Ea=[e]:Ea.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Sa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&As)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Sa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ua(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=U({},f,h);break e;case 2:Na=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Us|=o,e.lanes=o,e.memoizedState=f}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function qa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function Ba(e,t,n){var r=!1,i=Si,a=t.contextType;return"object"===typeof a&&null!==a?a=Ia(a):(i=Pi(t)?Ni:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Si),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ia(a):(a=Pi(t)?Ni:Ci.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Ua(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case _:return(t=jc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),ia&&Xi(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ka(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ka(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=jc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ya=$a(!0),Ja=$a(!1),Xa={},Za=Ti(Xa),eo=Ti(Xa),to=Ti(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Ei(to,t),Ei(eo,e),Ei(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(Za),Ei(Za,t)}function io(){Ii(Za),Ii(eo),Ii(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ei(eo,e),Ei(Za,n))}function oo(e){eo.current===e&&(Ii(Za),Ii(eo))}var uo=Ti(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=w.ReactCurrentDispatcher,ho=w.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,wo=0,bo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function To(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,wo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function Io(){var e=0!==wo;return wo=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function So(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=So(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Us|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Us|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=So(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Po(e,t){var n=vo,r=So(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,wu=!0),r=r.queue,Ho(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,jo(9,Do.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Uo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Uo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Uo(e){var t=Aa(e,1);null!==t&&rc(t,e,1,-1)}function Fo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return So().memoizedState}function zo(e,t,n,r){var i=Eo();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function qo(e,t,n,r){var i=So();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function Bo(e,t){return zo(8390656,8,e,t)}function Ho(e,t){return qo(2048,8,e,t)}function Wo(e,t){return qo(4,2,e,t)}function Ko(e,t){return qo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4,4,Go.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Us|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return So().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Sa(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ia,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Ia,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Ia,useEffect:Bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Fo,useDebugValue:$o,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Zo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Eo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Bo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Ns.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ia,useCallback:Yo,useContext:Ia,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:Jo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:$o,useDeferredValue:function(e){return Xo(So(),yo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],So().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ia,useCallback:Yo,useContext:Ia,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:$o,useDeferredValue:function(e){var t=So();return null===yo?t.memoizedState=e:Xo(t,yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],So().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ws||(Ws=!0,Ks=r),hu(0,t)},n}function vu(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Gs?Gs=new Set([this]):Gs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=w.ReactCurrentOwner,wu=!1;function bu(e,t,n,r){t.child=null===e?Ja(t,null,n,r):Ya(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Ta(t,i),r=To(e,t,n,r,a,i),n=Io(),null===e||wu?(ia&&n&&ea(t),t.flags|=1,bu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Oc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Tu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Wu(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Tu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Wu(e,t,i);0!==(131072&e.flags)&&(wu=!0)}}return Su(e,t,n,r,i)}function Iu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Ds,Os),Os|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Ds,Os),Os|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Ds,Os),Os|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Ds,Os),Os|=r;return bu(e,t,i,n),t.child}function Eu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Su(e,t,n,r,i){var a=Pi(n)?Ni:Ci.current;return a=Ri(t,a),Ta(t,i),n=To(e,t,n,r,a,i),r=Io(),null===e||wu?(ia&&r&&ea(t),t.flags|=1,bu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Cu(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Ta(t,i),null===t.stateNode)Hu(e,t),Ba(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ia(c):c=Ri(t,c=Pi(n)?Ni:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ha(t,o,r,c),Na=!1;var h=t.memoizedState;o.state=h,Ua(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ai.current||Na?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Na||qa(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ia(s):s=Ri(t,s=Pi(n)?Ni:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ha(t,o,r,s),Na=!1,h=t.memoizedState,o.state=h,Ua(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ai.current||Na?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Na||qa(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Eu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Ui(t,n,!1),Wu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,u,a)):bu(e,t,u,a),t.memoizedState=r.state,i&&Ui(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Ru(e,t,n,r,i){return da(),pa(i),t.flags|=256,bu(e,t,n,r),t.child}var Pu,Ou,Du,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Uu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Uc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Uu(n),t.memoizedState=Mu,e):ju(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Uc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,u),t.child.memoizedState=Uu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),wu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),rc(r,e,i,-1))}return yc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=Yi,Gi[Qi++]=Ji,Gi[Qi++]=$i,Yi=e.id,Ji=e.overflow,$i=t),t=ju(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Dc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Uu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Dc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ju(e,t){return(t=Uc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=ju(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function qu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zu(e,n,t);else if(19===e.tag)zu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qu(t,!0,n,null,a);break;case"together":qu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Us|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ku(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gu(t),null;case 1:case 17:return Pi(t.type)&&Oi(),Gu(t),null;case 3:return r=t.stateNode,io(),Ii(Ai),Ii(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ou(e,t),Gu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Du(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Y(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&jr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Pu(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=U({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Gu(t),null;case 13:if(Ii(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):yc())),null!==t.updateQueue&&(t.flags|=4),Gu(t),null);case 4:return io(),Ou(e,t),null===e&&qr(t.stateNode.containerInfo),Gu(t),null;case 10:return _a(t.type._context),Gu(t),null;case 19:if(Ii(uo),null===(o=t.memoizedState))return Gu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Ku(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Ku(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Bs&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ku(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Gu(t),null}else 2*Je()-o.renderingStartTime>Bs&&1073741824!==n&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=uo.current,Ei(uo,r?1&n|2:1&n),t):(Gu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Os)&&(Gu(t),6&t.subtreeFlags&&(t.flags|=8192)):Gu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function $u(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ii(Ai),Ii(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ii(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Pu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ou=function(){},Du=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=U({},i,{value:void 0}),r=U({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,Ju=!1,Xu="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Ju||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),qt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Ju&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Ju&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Ju=(r=Ju)||null!==n.memoizedState,ds(e,t,n),Ju=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xu),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ys(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ys(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(y){Ic(e,e.return,y)}try{rs(5,e,e.return)}catch(y){Ic(e,e.return,y)}}break;case 1:ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Ic(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Ic(e,e.return,y)}}break;case 6:if(ys(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Ic(e,e.return,y)}}break;case 3:if(ys(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(y){Ic(e,e.return,y)}break;case 4:default:ys(t,e),gs(e);break;case 13:ys(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qs=Je())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Ju=(l=Ju)||f,ys(t,e),Ju=l):ys(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Ic(r,n,y)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){_s(h);continue}}null!==p?(p.return=d,Zu=p):_s(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){Ic(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Ic(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ys(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,ws(e,t,n)}function ws(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Ju;u=Yu;var c=Ju;if(Yu=o,(Ju=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Zu=s):xs(i);for(;null!==a;)Zu=a,ws(a,t,n),a=a.sibling;Zu=i,Yu=u,Ju=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):bs(e)}}function bs(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ju||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ju)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(a(163))}Ju||512&t.flags&&as(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{as(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Ts,Is=Math.ceil,Es=w.ReactCurrentDispatcher,Ss=w.ReactCurrentOwner,Cs=w.ReactCurrentBatchConfig,As=0,Ns=null,Rs=null,Ps=0,Os=0,Ds=Ti(0),Ls=0,Ms=null,Us=0,Fs=0,js=0,Vs=null,zs=null,qs=0,Bs=1/0,Hs=null,Ws=!1,Ks=null,Gs=null,Qs=!1,$s=null,Ys=0,Js=0,Xs=null,Zs=-1,ec=0;function tc(){return 0!==(6&As)?Je():-1!==Zs?Zs:Zs=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&As)&&0!==Ps?Ps&-Ps:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Js)throw Js=0,Xs=null,Error(a(185));mt(e,n,r),0!==(2&As)&&e===Ns||(e===Ns&&(0===(2&As)&&(Fs|=n),4===Ls&&sc(e,Ps)),ic(e,r),1===n&&0===As&&0===(1&t.mode)&&(Bs=Je()+500,ji&&qi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Ps:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&As)&&qi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&As))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Ps:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=As;As|=2;var o=vc();for(Ns===e&&Ps===t||(Hs=null,Bs=Je()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}ba(),Es.current=o,As=i,null!==Rs?t=0:(Ns=null,Ps=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Je()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,zs,Hs);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=qs+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,zs,Hs),t);break}_c(e,zs,Hs);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,zs,Hs),r);break}_c(e,zs,Hs);break;default:throw Error(a(329))}}}return ic(e,Je()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=zs,zs=n,null!==t&&uc(t)),e}function uc(e){null===zs?zs=e:zs.push.apply(zs,e)}function sc(e,t){for(t&=~js,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&As))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return ic(e,Je()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,zs,Hs),ic(e,Je()),null}function lc(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(Bs=Je()+500,ji&&qi())}}function fc(e){null!==$s&&0===$s.tag&&0===(6&As)&&xc();var t=As;As|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(As=t))&&qi()}}function hc(){Os=Ds.current,Ii(Ds)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rs)for(n=Rs.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Ii(Ai),Ii(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ii(uo);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ns=e,Rs=e=Dc(e.current,null),Ps=Os=t,Ls=0,Ms=null,js=Fs=Us=0,zs=Vs=null,null!==Ea){for(t=0;t<Ea.length;t++)if(null!==(r=(n=Ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ea=null}return e}function pc(e,t){for(;;){var n=Rs;try{if(ba(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,wo=0,Ss.current=null,null===n||null===n.return){Ls=1,Ms=t,Rs=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ps,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),yc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Gs||!Gs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(w){t=w,Rs===n&&null!==n&&(Rs=n=n.return);continue}break}}function vc(){var e=Es.current;return Es.current=ou,null===e?ou:e}function yc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===Ns||0===(268435455&Us)&&0===(268435455&Fs)||sc(Ns,Ps)}function mc(e,t){var n=As;As|=2;var r=vc();for(Ns===e&&Ps===t||(Hs=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(ba(),As=n,Es.current=r,null!==Rs)throw Error(a(261));return Ns=null,Ps=0,Ls}function gc(){for(;null!==Rs;)wc(Rs)}function kc(){for(;null!==Rs&&!$e();)wc(Rs)}function wc(e){var t=Ts(e.alternate,e,Os);e.memoizedProps=e.pendingProps,null===t?bc(e):Rs=t,Ss.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Os)))return void(Rs=n)}else{if(null!==(n=$u(n,t)))return n.flags&=32767,void(Rs=n);if(null===e)return Ls=6,void(Rs=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rs=t);Rs=t=e}while(null!==t);0===Ls&&(Ls=5)}function _c(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==$s);if(0!==(6&As))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(Rs=Ns=null,Ps=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Nc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=As;As|=4,Ss.current=null,function(e,t){if(ei=Ht,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(b){Ic(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ms(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,ks(n,e,i),Ye(),As=s,kt=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,$s=e,Ys=i),o=e.pendingLanes,0===o&&(Gs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ws)throw Ws=!1,e=Ks,Ks=null,e;0!==(1&Ys)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Xs?Js++:(Js=0,Xs=e):Js=0,qi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function xc(){if(null!==$s){var e=wt(Ys),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===$s)var r=!1;else{if(e=$s,$s=null,Ys=0,0!==(6&As))throw Error(a(331));var i=As;for(As|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var w=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==w)w.return=u,Zu=w;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(_){Ic(s,s.return,_)}if(s===u){Zu=null;break e}var b=s.sibling;if(null!==b){b.return=s.return,Zu=b;break e}Zu=s.return}}if(As=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Tc(e,t,n){e=Da(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(mt(e,1,t),ic(e,t))}function Ic(e,t,n){if(3===e.tag)Tc(e,e,n);else for(;null!==t;){if(3===t.tag){Tc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gs||!Gs.has(r))){t=Da(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(mt(t,1,e),ic(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Ps&n)===n&&(4===Ls||3===Ls&&(130023424&Ps)===Ps&&500>Je()-qs?dc(e,0):js|=n),ic(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Aa(e,t))&&(mt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sc(e,n)}function Nc(e,t){return Ge(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Rc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Oc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Mc(n.children,i,o,t);case T:u=8,i|=8;break;case I:return(e=Pc(12,n,t,2|i)).elementType=I,e.lanes=o,e;case A:return(e=Pc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Pc(19,n,t,i)).elementType=N,e.lanes=o,e;case O:return Uc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case S:u=9;break e;case C:u=11;break e;case R:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Uc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function qc(e){if(!e)return Si;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,a,o,u,s){return(e=zc(n,r,!0,e,0,a,0,u,s)).context=qc(null),n=e.current,(a=Oa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,mt(e,i,r),ic(e,r),e}function Hc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Ts=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Ei(uo,1&uo.current),null!==(e=Wu(e,t,n))?e.sibling:null);Ei(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Iu(e,t,n)}return Wu(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hu(e,t),e=t.pendingProps;var i=Ri(t,Ci.current);Ta(t,n),i=To(null,t,r,e,i,n);var o=Io();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Su(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Su(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Nu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Ua(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ru(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Ru(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Wu(e,t,n);break e}bu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Eu(e,t),bu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):bu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return bu(e,t,t.pendingProps,n),t.child;case 8:case 12:return bu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ei(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ai.current){t=Wu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}bu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ta(t,n),r=r(i=Ia(i)),t.flags|=1,bu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xu(e,t,r,i=ya(r.type,i),n);case 15:return Tu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Hu(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Ta(t,n),Ba(t,r,i),Wa(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return Bu(e,t,n);case 22:return Iu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Wc(o);u.call(e)}}Hc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Wc(s);u.call(e)}}var s=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,qr(8===e.nodeType?e.parentNode:e),fc((function(){Hc(t,s,n,r)})),s}(n,t,e,i,r);return Wc(o)}Yc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hc(e,t,null,null)},Yc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Hc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ut(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Je()),0===(6&As)&&(Bs=Je()+500,qi()))}break;case 13:fc((function(){var t=Aa(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},_t=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Aa(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},Tt=function(){return kt},It=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));G(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ae=fc;var tl={usingClientEntryPoint:!1,Events:[ki,wi,bi,Ee,Se,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},381:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},239:function(e,t,n){var r=n(381);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return u(a(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,u="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(u+=e.slice(o,d),o=d+f.length,h)u+=h[1];else{var p=e[o],v=n[2],y=n[3],m=n[4],g=n[5],k=n[6],w=n[7];u&&(r.push(u),u="");var b=null!=v&&null!=p&&p!==v,_="+"===k||"*"===k,x="?"===k||"*"===k,T=n[2]||l,I=m||g;r.push({name:y||a++,prefix:v||"",delimiter:T,optional:x,repeat:_,partial:b,asterisk:!!w,pattern:I?c(I):w?".*":"[^"+s(T)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var a="",u=t||{},s=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,h=u[l.name];if(null==h){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=s(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"===typeof c)o+=s(c);else{var h=s(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),o+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=s(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,f(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return h(a(e,n),t,n)}(e,t,n)}},195:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return b(e)===f}},228:function(e,t,n){"use strict";n(195)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var w=k.prototype=new g;w.constructor=k,v(w,m.prototype),w.isPureReactComponent=!0;var b=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!T.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,b(o)?(i="",null!=e&&(i=e.replace(S,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=A(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=A(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!T.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function b(e){if(y=!1,w(e),!v)if(null!==r(c))v=!0,O(_);else{var t=r(l);null!==t&&D(b,t.startTime-e)}}function _(e,n){v=!1,y&&(y=!1,g(E),E=-1),p=!0;var a=d;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&D(b,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,T=!1,I=null,E=-1,S=5,C=-1;function A(){return!(t.unstable_now()-C<S)}function N(){if(null!==I){var e=t.unstable_now();C=e;var n=!0;try{n=I(!0,e)}finally{n?x():(T=!1,I=null)}}else T=!1}if("function"===typeof k)x=function(){k(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=N,x=function(){P.postMessage(null)}}else x=function(){m(N,0)};function O(e){I=e,T||(T=!0,x())}function D(e,n){E=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(E),E=-1):y=!0,D(b,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,O(_))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Ye},SDK_VERSION:function(){return Ht},_DEFAULT_ENTRY_NAME:function(){return At},_addComponent:function(){return Ot},_addOrOverwriteComponent:function(){return Dt},_apps:function(){return Rt},_clearComponents:function(){return Ft},_components:function(){return Pt},_getProvider:function(){return Mt},_registerComponent:function(){return Lt},_removeServiceInstance:function(){return Ut},deleteApp:function(){return Qt},getApp:function(){return Kt},getApps:function(){return Gt},initializeApp:function(){return Wt},onLog:function(){return Jt},registerVersion:function(){return Yt},setLogLevel:function(){return Xt}});var t=n(791),r=n(250);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||o(e,t)||u()}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function l(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,c(e,t)}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function h(e){return"/"===e.charAt(0)}function d(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var p=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&h(e),o=t&&h(t),u=a||o;if(e&&h(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var s=i[i.length-1];n="."===s||".."===s||""===s}else n=!1;for(var c=0,l=i.length;l>=0;l--){var f=i[l];"."===f?d(i,l):".."===f?(d(i,l),c++):c&&(d(i,l),c--)}if(!u)for(;c--;c)i.unshift("..");!u||""===i[0]||i[0]&&h(i[0])||i.unshift("");var p=i.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p},v=!0,y="Invariant failed";function m(e,t){if(!e){if(v)throw new Error(y);var n="function"===typeof t?t():t,r=n?"".concat(y,": ").concat(n):y;throw new Error(r)}}function g(e){return"/"===e.charAt(0)?e:"/"+e}function k(e){return"/"===e.charAt(0)?e.substr(1):e}function w(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function b(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function _(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function x(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=f({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=p(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function T(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var I=!("undefined"===typeof window||!window.document||!window.document.createElement);function E(e,t){t(window.confirm(e))}var S="popstate",C="hashchange";function A(){try{return window.history.state||{}}catch(e){return{}}}function N(e){void 0===e&&{},I||m(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,a=i.forceRefresh,o=void 0!==a&&a,u=i.getUserConfirmation,s=void 0===u?E:u,c=i.keyLength,l=void 0===c?6:c,h=e.basename?b(g(e.basename)):"";function d(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return h&&w(a,h),x(a,r,n)}function p(){return Math.random().toString(36).substr(2,l)}var v=T();function y(e){f(V,e),V.length=t.length,v.notifyListeners(V.location,V.action)}function k(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||P(d(e.state))}function N(){P(d(A()))}var R=!1;function P(e){if(R)!1,y();else{v.confirmTransitionTo(e,"POP",s,(function(t){t?y({action:"POP",location:e}):function(e){var t=V.location,n=D.indexOf(t.key);-1===n&&0;var r=D.indexOf(e.key);-1===r&&0;var i=n-r;i&&(!0,M(i))}(e)}))}}var O=d(A()),D=[O.key];function L(e){return h+_(e)}function M(e){t.go(e)}var U=0;function F(e){1===(U+=e)&&1===e?(window.addEventListener(S,k),r&&window.addEventListener(C,N)):0===U&&(window.removeEventListener(S,k),r&&window.removeEventListener(C,N))}var j=!1;var V={length:t.length,action:"POP",location:O,createHref:L,push:function(e,r){var i="PUSH",a=x(e,r,p(),V.location);v.confirmTransitionTo(a,i,s,(function(e){if(e){var r=L(a),u=a.key,s=a.state;if(n)if(t.pushState({key:u,state:s},null,r),o)window.location.href=r;else{var c=D.indexOf(V.location.key),l=D.slice(0,c+1);l.push(a.key),l,y({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=x(e,r,p(),V.location);v.confirmTransitionTo(a,i,s,(function(e){if(e){var r=L(a),u=a.key,s=a.state;if(n)if(t.replaceState({key:u,state:s},null,r),o)window.location.replace(r);else{var c=D.indexOf(V.location.key);-1!==c&&(D[c]=a.key),y({action:i,location:a})}else window.location.replace(r)}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&!1;var t=v.setPrompt(e);return j||(F(1),!0),function(){return j&&(!1,F(-1)),t()}},listen:function(e){var t=v.appendListener(e);return F(1),function(){F(-1),t()}}};return V}var R="hashchange",P={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+k(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:k,decodePath:g},slash:{encodePath:g,decodePath:g}};function O(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function D(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function L(e){window.location.replace(O(window.location.href)+"#"+e)}function M(e){void 0===e&&(e={}),I||m(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?E:r,a=n.hashType,o=void 0===a?"slash":a,u=e.basename?b(g(e.basename)):"",s=P[o],c=s.encodePath,l=s.decodePath;function h(){var e=l(D());return u&&(e=w(e,u)),x(e)}var d=T();function p(e){f(V,e),V.length=t.length,d.notifyListeners(V.location,V.action)}var v=!1,y=null;function k(){var e,t,n=D(),r=c(n);if(n!==r)L(r);else{var a=h(),o=V.location;if(!v&&(t=a,(e=o).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(y===_(a))return;y=null,function(e){if(v)v=!1,p();else{var t="POP";d.confirmTransitionTo(e,t,i,(function(n){n?p({action:t,location:e}):function(e){var t=V.location,n=N.lastIndexOf(_(t));-1===n&&(n=0);var r=N.lastIndexOf(_(e));-1===r&&(r=0);var i=n-r;i&&(v=!0,M(i))}(e)}))}}(a)}}var S=D(),C=c(S);S!==C&&L(C);var A=h(),N=[_(A)];function M(e){t.go(e)}var U=0;function F(e){1===(U+=e)&&1===e?window.addEventListener(R,k):0===U&&window.removeEventListener(R,k)}var j=!1;var V={length:t.length,action:"POP",location:A,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=O(window.location.href)),n+"#"+c(u+_(e))},push:function(e,t){var n="PUSH",r=x(e,void 0,void 0,V.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=_(r),i=c(u+t);if(D()!==i){y=t,function(e){window.location.hash=e}(i);var a=N.lastIndexOf(_(V.location)),o=N.slice(0,a+1);o.push(t),N=o,p({action:n,location:r})}else p()}}))},replace:function(e,t){var n="REPLACE",r=x(e,void 0,void 0,V.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=_(r),i=c(u+t);D()!==i&&(y=t,L(i));var a=N.indexOf(_(V.location));-1!==a&&(N[a]=t),p({action:n,location:r})}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=d.setPrompt(e);return j||(F(1),j=!0),function(){return j&&(j=!1,F(-1)),t()}},listen:function(e){var t=d.appendListener(e);return F(1),function(){F(-1),t()}}};return V}function U(e,t,n){return Math.min(Math.max(e,t),n)}var F=n(7),j=n.n(F),V=1073741823,z="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};var q=t.createContext||function(e,n){var r,i,a="__create-react-context-"+function(){var e="__global_unique_id__";return z[e]=(z[e]||0)+1}()+"__",o=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}(t.props.value),t}l(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(t="function"===typeof n?n(r,i):V,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(t.Component);o.childContextTypes=((r={})[a]=j().object.isRequired,r);var u=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}l(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?V:t},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?V:e},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return u.contextTypes=((i={})[a]=j().object,i),{Provider:o,Consumer:u}},B=q,H=n(239),W=n.n(H);n(228);function K(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n(110);var G=function(e){var t=B();return t.displayName=e,t},Q=G("Router-History"),$=G("Router"),Y=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}l(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return t.createElement($.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},t.createElement(Q.Provider,{children:this.props.children||null,value:this.props.history}))},n}(t.Component);t.Component;t.Component;var J={},X=1e4,Z=0;function ee(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=J[n]||(J[n]={});if(r[e])return r[e];var i=[],a={regexp:W()(e,i,t),keys:i};return Z<X&&(r[e]=a,Z++),a}(n,{end:a,strict:u,sensitive:c}),i=r.regexp,o=r.keys,s=i.exec(e);if(!s)return null;var l=s[0],f=s.slice(1),h=e===l;return a&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var te=function(e){function n(){return e.apply(this,arguments)||this}return l(n,e),n.prototype.render=function(){var e=this;return t.createElement($.Consumer,null,(function(n){n||m(!1);var r=e.props.location||n.location,i=f({},n,{location:r,match:e.props.computedMatch?e.props.computedMatch:e.props.path?ee(r.pathname,e.props):n.match}),a=e.props,o=a.children,u=a.component,s=a.render;return Array.isArray(o)&&function(e){return 0===t.Children.count(e)}(o)&&(o=null),t.createElement($.Provider,{value:i},i.match?o?"function"===typeof o?o(i):o:u?t.createElement(u,i):s?s(i):null:"function"===typeof o?o(i):null)}))},n}(t.Component);function ne(e){return"/"===e.charAt(0)?e:"/"+e}function re(e,t){if(!e)return t;var n=ne(e);return 0!==t.pathname.indexOf(n)?t:f({},t,{pathname:t.pathname.substr(n.length)})}function ie(e){return"string"===typeof e?e:_(e)}function ae(e){return function(){m(!1)}}function oe(){}t.Component;var ue=function(e){function n(){return e.apply(this,arguments)||this}return l(n,e),n.prototype.render=function(){var e=this;return t.createElement($.Consumer,null,(function(n){n||m(!1);var r,i,a=e.props.location||n.location;return t.Children.forEach(e.props.children,(function(e){if(null==i&&t.isValidElement(e)){r=e;var o=e.props.path||e.props.from;i=o?ee(a.pathname,f({},e.props,{path:o})):n.match}})),i?t.cloneElement(r,{location:a,computedMatch:i}):null}))},n}(t.Component);var se=t.useContext;t.Component;var ce=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=M(t.props),t}return l(n,e),n.prototype.render=function(){return t.createElement(Y,{history:this.history,children:this.props.children})},n}(t.Component);var le=function(e,t){return"function"===typeof e?e(t):e},fe=function(e,t){return"string"===typeof e?x(e,null,null,t):e},he=function(e){return e},de=t.forwardRef;"undefined"===typeof de&&(de=he);var pe=de((function(e,n){var r=e.innerRef,i=e.navigate,a=e.onClick,o=K(e,["innerRef","navigate","onClick"]),u=o.target,s=f({},o,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return s.ref=he!==de&&n||r,t.createElement("a",s)}));var ve=de((function(e,n){var r=e.component,i=void 0===r?pe:r,a=e.replace,o=e.to,u=e.innerRef,s=K(e,["component","replace","to","innerRef"]);return t.createElement($.Consumer,null,(function(e){e||m(!1);var r=e.history,c=fe(le(o,e.location),e.location),l=c?r.createHref(c):"",h=f({},s,{href:l,navigate:function(){var t=le(o,e.location),n=_(e.location)===_(fe(t));(a||n?r.replace:r.push)(t)}});return he!==de?h.ref=n||u:h.innerRef=u,t.createElement(i,h)}))})),ye=function(e){return e},me=t.forwardRef;"undefined"===typeof me&&(me=ye);me((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,a=e.activeClassName,o=void 0===a?"active":a,u=e.activeStyle,s=e.className,c=e.exact,l=e.isActive,h=e.location,d=e.sensitive,p=e.strict,v=e.style,y=e.to,g=e.innerRef,k=K(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement($.Consumer,null,(function(e){e||m(!1);var r=h||e.location,a=fe(le(y,r),r),w=a.pathname,b=w&&w.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),_=b?ee(r.pathname,{path:b,exact:c,sensitive:d,strict:p}):null,x=!!(l?l(_,r):_),T="function"===typeof s?s(x):s,I="function"===typeof v?v(x):v;x&&(T=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(T,o),I=f({},I,u));var E=f({"aria-current":x&&i||null,className:T,style:I,to:a},k);return ye!==me?E.ref=n||g:E.innerRef=g,t.createElement(ve,E)}))}));function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function ke(){ke=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new I(i||[]);return r(o,"_invoke",{value:b(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,a,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(E([])));m&&m!==t&&n.call(m,a)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==ge(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function b(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return S()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function _(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function E(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},k(w.prototype),s(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(g),s(g,u,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=E,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function we(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function be(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){we(a,r,i,o,u,"next",e)}function u(e){we(a,r,i,o,u,"throw",e)}o(void 0)}))}}function _e(e){var t=function(e,t){if("object"!==ge(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ge(t)?t:String(t)}function xe(e,t,n){return(t=_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_e(r.key),r)}}function Ee(e,t,n){return t&&Ie(e.prototype,t),n&&Ie(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Se(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function Ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function Ne(e){return Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ne(e)}function Re(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Pe(e){var t=Re();return function(){var n,r=Ne(e);if(t){var i=Ne(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ge(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ce(e)}(this,n)}}function Oe(e,t,n){return Oe=Re()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&c(i,n.prototype),i},Oe.apply(null,arguments)}function De(e){var t="function"===typeof Map?new Map:void 0;return De=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Oe(e,arguments,Ne(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)},De(e)}var Le=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Le(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Ue=function(e){return function(e){var t=Le(e);return Me.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Fe=function(e){try{return Me.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function je(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&Ve(n)&&(e[n]=je(e[n],t[n]));return e}function Ve(e){return"__proto__"!==e}var ze=function(){function e(){var t=this;Te(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Ee(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function qe(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ue(JSON.stringify({alg:"none",type:"JWT"})),Ue(JSON.stringify(a)),""].join(".")}function Be(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function He(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function We(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Ke(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ge(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Qe(){var e=Be();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function $e(){return"object"===typeof indexedDB}var Ye=function(e){Ae(n,e);var t=Pe(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Ce(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Ce(a),Je.prototype.create),a}return Ee(n)}(De(Error)),Je=function(){function e(t,n,r){Te(this,e),this.service=t,this.serviceName=n,this.errors=r}return Ee(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Xe,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Ye(n,a,t)}}]),e}();var Xe=/\{\$([^}]+)}/g;function Ze(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function et(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(tt(u)&&tt(s)){if(!et(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function tt(e){return null!==e&&"object"===typeof e}function nt(e){for(var t=[],n=function(){var e=s(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function rt(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=s(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function it(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function at(e,t){var n=new ot(e,t);return n.subscribe.bind(n)}var ot=function(){function e(t,n){var r=this;Te(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Ee(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Se(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ut),void 0===r.error&&(r.error=ut),void 0===r.complete&&(r.complete=ut);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ut(){}function st(e){return e&&e._delegate?e._delegate:e}function ct(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function lt(e){return function(e){if(Array.isArray(e))return a(e)}(e)||ct(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ft=function(){function e(t,n,r){Te(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Ee(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ht="[DEFAULT]",dt=function(){function e(t,n){Te(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Ee(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new ze;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ht})}catch(c){}var t,n=Se(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(lt(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),lt(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Se(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1];r===this.normalizeInstanceIdentifier(c)&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Se(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Cb){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ht?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Cb){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht;return this.component?this.component.multipleInstances?e:ht:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var pt,vt,yt=function(){function e(t){Te(this,e),this.name=t,this.providers=new Map}return Ee(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new dt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),mt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(vt||(vt={}));var gt,kt,wt={debug:vt.DEBUG,verbose:vt.VERBOSE,info:vt.INFO,warn:vt.WARN,error:vt.ERROR,silent:vt.SILENT},bt=vt.INFO,_t=(xe(pt={},vt.DEBUG,"log"),xe(pt,vt.VERBOSE,"log"),xe(pt,vt.INFO,"info"),xe(pt,vt.WARN,"warn"),xe(pt,vt.ERROR,"error"),pt),xt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=_t[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Tt=function(){function e(t){Te(this,e),this.name=t,this._logLevel=bt,this._logHandler=xt,this._userLogHandler=null,mt.push(this)}return Ee(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in vt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?wt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,vt.DEBUG].concat(t)),this._logHandler.apply(this,[this,vt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,vt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,vt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,vt.INFO].concat(t)),this._logHandler.apply(this,[this,vt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,vt.WARN].concat(t)),this._logHandler.apply(this,[this,vt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,vt.ERROR].concat(t)),this._logHandler.apply(this,[this,vt.ERROR].concat(t))}}]),e}();var It=function(){function e(t){Te(this,e),this.container=t}return Ee(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Et="@firebase/app",St="0.7.11",Ct=new Tt("@firebase/app"),At="[DEFAULT]",Nt=(xe(gt={},Et,"fire-core"),xe(gt,"@firebase/app-compat","fire-core-compat"),xe(gt,"@firebase/analytics","fire-analytics"),xe(gt,"@firebase/analytics-compat","fire-analytics-compat"),xe(gt,"@firebase/app-check","fire-app-check"),xe(gt,"@firebase/app-check-compat","fire-app-check-compat"),xe(gt,"@firebase/auth","fire-auth"),xe(gt,"@firebase/auth-compat","fire-auth-compat"),xe(gt,"@firebase/database","fire-rtdb"),xe(gt,"@firebase/database-compat","fire-rtdb-compat"),xe(gt,"@firebase/functions","fire-fn"),xe(gt,"@firebase/functions-compat","fire-fn-compat"),xe(gt,"@firebase/installations","fire-iid"),xe(gt,"@firebase/installations-compat","fire-iid-compat"),xe(gt,"@firebase/messaging","fire-fcm"),xe(gt,"@firebase/messaging-compat","fire-fcm-compat"),xe(gt,"@firebase/performance","fire-perf"),xe(gt,"@firebase/performance-compat","fire-perf-compat"),xe(gt,"@firebase/remote-config","fire-rc"),xe(gt,"@firebase/remote-config-compat","fire-rc-compat"),xe(gt,"@firebase/storage","fire-gcs"),xe(gt,"@firebase/storage-compat","fire-gcs-compat"),xe(gt,"@firebase/firestore","fire-fst"),xe(gt,"@firebase/firestore-compat","fire-fst-compat"),xe(gt,"fire-js","fire-js"),xe(gt,"firebase","fire-js-all"),gt),Rt=new Map,Pt=new Map;function Ot(e,t){try{e.container.addComponent(t)}catch(n){Ct.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Dt(e,t){e.container.addOrOverwriteComponent(t)}function Lt(e){var t=e.name;if(Pt.has(t))return Ct.debug("There were multiple attempts to register component ".concat(t,".")),!1;Pt.set(t,e);var n,r=Se(Rt.values());try{for(r.s();!(n=r.n()).done;){Ot(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Mt(e,t){return e.container.getProvider(t)}function Ut(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:At;Mt(e,t).clearInstance(n)}function Ft(){Pt.clear()}var jt,Vt,zt=(xe(kt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),xe(kt,"bad-app-name","Illegal App name: '{$appName}"),xe(kt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),xe(kt,"app-deleted","Firebase App named '{$appName}' already deleted"),xe(kt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),xe(kt,"invalid-log-argument","First argument to `onLog` must be null or a function."),kt),qt=new Je("app","Firebase",zt),Bt=function(){function e(t,n,r){var i=this;Te(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ft("app",(function(){return i}),"PUBLIC"))}return Ee(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw qt.create("app-deleted",{appName:this._name})}}]),e}(),Ht="9.6.1";function Wt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"object"!==typeof t&&(t={name:t});var n=Object.assign({name:At,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!==typeof r||!r)throw qt.create("bad-app-name",{appName:String(r)});var i=Rt.get(r);if(i){if(et(e,i.options)&&et(n,i.config))return i;throw qt.create("duplicate-app",{appName:r})}var a,o=new yt(r),u=Se(Pt.values());try{for(u.s();!(a=u.n()).done;){var s=a.value;o.addComponent(s)}}catch(l){u.e(l)}finally{u.f()}var c=new Bt(e,n,o);return Rt.set(r,c),c}function Kt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,t=Rt.get(e);if(!t)throw qt.create("no-app",{appName:e});return t}function Gt(){return Array.from(Rt.values())}function Qt(e){return $t.apply(this,arguments)}function $t(){return($t=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Rt.has(n)){e.next=6;break}return Rt.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yt(e,t,n){var r,i=null!==(r=Nt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ct.warn(u.join(" "))}Lt(new ft("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Jt(e,t){if(null!==e&&"function"!==typeof e)throw qt.create("invalid-log-argument");!function(e,t){var n,r=Se(mt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=wt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:vt[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Xt(e){var t;t=e,mt.forEach((function(e){e.setLogLevel(t)}))}jt="",Lt(new ft("platform-logger",(function(e){return new It(e)}),"PRIVATE")),Yt(Et,St,jt),Yt(Et,St,"esm2017"),Yt("fire-js","");var Zt=function(){function e(t,n){var r=this;Te(this,e),this._delegate=t,this.firebase=n,Ot(t,new ft("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Ee(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Qt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:At;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:At;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Ot(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Dt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),en=(xe(Vt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),xe(Vt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Vt),tn=new Je("app-compat","Firebase",en);var nn=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Wt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Ze(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Yt,setLogLevel:Xt,onLog:Jt,apps:null,SDK_VERSION:Ht,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Lt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw tn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&je(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Ze(n,e=e||At))throw tn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Zt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){je(n,e)},createSubscribe:at,ErrorFactory:Je,deepExtend:je}),n}(),rn=new Tt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){rn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var an=self.firebase.SDK_VERSION;an&&an.indexOf("LITE")>=0&&rn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var on=nn;!function(e){Yt("@firebase/app-compat","0.1.12",e)}();function un(){return un="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ne(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},un.apply(this,arguments)}on.registerVersion("firebase","9.6.1","app-compat");function sn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var cn;Object.create;var ln={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},fn="EMAIL_SIGNIN",hn="PASSWORD_RESET",dn="RECOVER_EMAIL",pn="REVERT_SECOND_FACTOR_ADDITION",vn="VERIFY_AND_CHANGE_EMAIL",yn="VERIFY_EMAIL";function mn(){return xe({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var gn=function(){var e;return xe(e={},"admin-restricted-operation","This operation is restricted to administrators only."),xe(e,"argument-error",""),xe(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),xe(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),xe(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),xe(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),xe(e,"cordova-not-ready","Cordova framework is not ready."),xe(e,"cors-unsupported","This browser is not supported."),xe(e,"credential-already-in-use","This credential is already associated with a different user account."),xe(e,"custom-token-mismatch","The custom token corresponds to a different audience."),xe(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),xe(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),xe(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),xe(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),xe(e,"email-already-in-use","The email address is already in use by another account."),xe(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),xe(e,"expired-action-code","The action code has expired."),xe(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),xe(e,"internal-error","An internal AuthError has occurred."),xe(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),xe(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),xe(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),xe(e,"invalid-auth-event","An internal AuthError has occurred."),xe(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),xe(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),xe(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),xe(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),xe(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),xe(e,"invalid-email","The email address is badly formatted."),xe(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),xe(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),xe(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),xe(e,"invalid-credential","The supplied auth credential is malformed or has expired."),xe(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),xe(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),xe(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),xe(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),xe(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),xe(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),xe(e,"wrong-password","The password is invalid or the user does not have a password."),xe(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),xe(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),xe(e,"invalid-provider-id","The specified provider ID is invalid."),xe(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),xe(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),xe(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),xe(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),xe(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),xe(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),xe(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),xe(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),xe(e,"missing-continue-uri","A continue URL must be provided in the request."),xe(e,"missing-iframe-start","An internal AuthError has occurred."),xe(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),xe(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),xe(e,"missing-multi-factor-info","No second factor identifier is provided."),xe(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),xe(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),xe(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),xe(e,"app-deleted","This instance of FirebaseApp has been deleted."),xe(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),xe(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),xe(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),xe(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),xe(e,"no-auth-event","An internal AuthError has occurred."),xe(e,"no-such-provider","User was not linked to an account with the given provider."),xe(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),xe(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),xe(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),xe(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),xe(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),xe(e,"provider-already-linked","User can only be linked to one identity for the given provider."),xe(e,"quota-exceeded","The project's quota for this operation has been exceeded."),xe(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),xe(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),xe(e,"rejected-credential","The request contains malformed or mismatching credentials."),xe(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),xe(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),xe(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),xe(e,"timeout","The operation has timed out."),xe(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),xe(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),xe(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),xe(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),xe(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),xe(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),xe(e,"unverified-email","The operation requires a verified email."),xe(e,"user-cancelled","The user did not grant your application the permissions it requested."),xe(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),xe(e,"user-disabled","The user account has been disabled by an administrator."),xe(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),xe(e,"user-signed-out",""),xe(e,"weak-password","The password must be 6 characters long or more."),xe(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),xe(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},kn=mn,wn=new Je("auth","Firebase",mn()),bn=new Tt("@firebase/auth");function _n(e){if(bn.logLevel<=vt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];bn.error.apply(bn,["Auth (".concat(Ht,"): ").concat(e)].concat(n))}}function xn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Sn.apply(void 0,[e].concat(n))}function Tn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Sn.apply(void 0,[e].concat(n))}function In(e,t,n){var r=Object.assign(Object.assign({},kn()),xe({},t,n));return new Je("auth","Firebase",r).create(t,{appName:e.name})}function En(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&xn(e,"argument-error"),In(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Sn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=lt(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(lt(o)))}return wn.create.apply(wn,[e].concat(n))}function Cn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Sn.apply(void 0,[t].concat(r))}}function An(e){var t="INTERNAL ASSERTION FAILED: "+e;throw _n(t),new Error(t)}function Nn(e,t){e||An(t)}var Rn=new Map;function Pn(e){Nn(e instanceof Function,"Expected a class definition");var t=Rn.get(e);return t?(Nn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Rn.set(e,t),t)}function On(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Dn(){return"http:"===Ln()||"https:"===Ln()}function Ln(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Mn=function(){function e(t,n){Te(this,e),this.shortDelay=t,this.longDelay=n,Nn(n>t,"Short delay should be less than long delay!"),this.isMobile=He()||Ge()}return Ee(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Dn()||Ke()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Un(e,t){Nn(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Fn=function(){function e(){Te(this,e)}return Ee(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void An("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void An("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void An("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),jn=(xe(cn={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),xe(cn,"MISSING_CUSTOM_TOKEN","internal-error"),xe(cn,"INVALID_IDENTIFIER","invalid-email"),xe(cn,"MISSING_CONTINUE_URI","internal-error"),xe(cn,"INVALID_PASSWORD","wrong-password"),xe(cn,"MISSING_PASSWORD","internal-error"),xe(cn,"EMAIL_EXISTS","email-already-in-use"),xe(cn,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),xe(cn,"INVALID_IDP_RESPONSE","invalid-credential"),xe(cn,"INVALID_PENDING_TOKEN","invalid-credential"),xe(cn,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),xe(cn,"MISSING_REQ_TYPE","internal-error"),xe(cn,"EMAIL_NOT_FOUND","user-not-found"),xe(cn,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),xe(cn,"EXPIRED_OOB_CODE","expired-action-code"),xe(cn,"INVALID_OOB_CODE","invalid-action-code"),xe(cn,"MISSING_OOB_CODE","internal-error"),xe(cn,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),xe(cn,"INVALID_ID_TOKEN","invalid-user-token"),xe(cn,"TOKEN_EXPIRED","user-token-expired"),xe(cn,"USER_NOT_FOUND","user-token-expired"),xe(cn,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),xe(cn,"INVALID_CODE","invalid-verification-code"),xe(cn,"INVALID_SESSION_INFO","invalid-verification-id"),xe(cn,"INVALID_TEMPORARY_PROOF","invalid-credential"),xe(cn,"MISSING_SESSION_INFO","missing-verification-id"),xe(cn,"SESSION_EXPIRED","code-expired"),xe(cn,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),xe(cn,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),xe(cn,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),xe(cn,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),xe(cn,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),xe(cn,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),xe(cn,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),xe(cn,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),xe(cn,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),xe(cn,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),xe(cn,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),cn),Vn=new Mn(3e4,6e4);function zn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function qn(e,t,n,r){return Bn.apply(this,arguments)}function Bn(){return Bn=be(ke().mark((function e(t,n,r,i){var a,o=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Hn(t,a,be(ke().mark((function e(){var a,o,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=nt(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Fn.fetch()(Qn(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Bn.apply(this,arguments)}function Hn(e,t,n){return Wn.apply(this,arguments)}function Wn(){return(Wn=be(ke().mark((function e(t,n,r){var i,a,o,u,c,l,f,h,d,p;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},jn),n),e.prev=2,a=new $n(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Yn(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,l=c.split(" : "),f=s(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Yn(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=25;break}throw Yn(t,"email-already-in-use",u);case 25:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=30;break}throw In(t,p,d);case 30:xn(t,p);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof Ye)){e.next=37;break}throw e.t0;case 37:xn(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])})))).apply(this,arguments)}function Kn(e,t,n,r){return Gn.apply(this,arguments)}function Gn(){return Gn=be(ke().mark((function e(t,n,r,i){var a,o,u=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,qn(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&xn(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Gn.apply(this,arguments)}function Qn(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Un(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var $n=function(){function e(t){var n=this;Te(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Tn(n.auth,"timeout"))}),Vn.get())}))}return Ee(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Yn(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Tn(e,t,r);return i.customData._tokenResponse=n,i}function Jn(e,t){return Xn.apply(this,arguments)}function Xn(){return(Xn=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qn(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zn(e,t){return er.apply(this,arguments)}function er(){return(er=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tr(e,t){return nr.apply(this,arguments)}function nr(){return(nr=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qn(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rr(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function ir(){return ir=be(ke().mark((function e(t){var n,r,i,a,o,u,s=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=st(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Cn((a=or(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:rr(ar(a.auth_time)),issuedAtTime:rr(ar(a.iat)),expirationTime:rr(ar(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),ir.apply(this,arguments)}function ar(e){return 1e3*Number(e)}function or(e){var t=s(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return _n("JWT malformed, contained fewer than 3 sections"),null;try{var a=Fe(r);return a?JSON.parse(a):(_n("Failed to decode base64 JWT payload"),null)}catch(o){return _n("Caught error parsing JWT payload as JSON",o),null}}function ur(e,t){return sr.apply(this,arguments)}function sr(){return sr=be(ke().mark((function e(t,n){var r=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Ye&&cr(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),sr.apply(this,arguments)}function cr(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var lr=function(){function e(t){Te(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Ee(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(be(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),fr=function(){function e(t,n){Te(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Ee(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=rr(this.lastLoginAt),this.creationTime=rr(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function hr(e){return dr.apply(this,arguments)}function dr(){return dr=be(ke().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,ur(t,tr(r,{idToken:i}));case 6:Cn(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=sn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=vr(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new fr(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),dr.apply(this,arguments)}function pr(){return(pr=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=st(t),e.next=3,hr(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vr(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(lt(n),lt(t))}function yr(e,t){return mr.apply(this,arguments)}function mr(){return(mr=be(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn(t,{},be(ke().mark((function e(){var r,i,a,o,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nt({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Qn(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Fn.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gr=function(){function e(){Te(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Ee(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Cn(e.idToken,"internal-error"),Cn("undefined"!==typeof e.idToken,"internal-error"),Cn("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=or(e);return Cn(t,"internal-error"),Cn("undefined"!==typeof t.exp,"internal-error"),Cn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=be(ke().mark((function e(t){var n,r=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Cn(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=be(ke().mark((function e(t,n){var r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yr(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return An("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Cn("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Cn("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Cn("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function kr(e,t){Cn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var wr=function(){function e(t){Te(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=sn(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new lr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.metadata=new fr(a.createdAt||void 0,a.lastLoginAt||void 0)}return Ee(e,[{key:"getIdToken",value:function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Cn(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return ir.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return pr.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Cn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Cn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=be(ke().mark((function e(t){var n,r,i=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,hr(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,ur(this,Jn(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;Cn(k&&x,t,"internal-error");var T=gr.fromJSON(this.name,x);Cn("string"===typeof k,t,"internal-error"),kr(f,t.name),kr(h,t.name),Cn("boolean"===typeof w,t,"internal-error"),Cn("boolean"===typeof b,t,"internal-error"),kr(d,t.name),kr(p,t.name),kr(v,t.name),kr(y,t.name),kr(m,t.name),kr(g,t.name);var I=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:T,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(I.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(I._redirectEventId=y),I}},{key:"_fromIdTokenResponse",value:function(){var t=be(ke().mark((function t(n,r){var i,a,o,u=arguments;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new gr).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,hr(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),br=function(){function e(){Te(this,e),this.type="NONE",this.storage={}}return Ee(e,[{key:"_isAvailable",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();br.type="NONE";var _r=br;function xr(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Tr=function(){function e(t,n,r){Te(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=xr(this.userKey,a.apiKey,o),this.fullPersistenceKey=xr("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Ee(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?wr._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=be(ke().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Pn(_r),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Pn(_r),u=xr(i,n.config.apiKey,n.name),s=null,c=Se(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=wr._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Ir(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ar(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Er(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Rr(t))return"Blackberry";if(Pr(t))return"Webos";if(Sr(t))return"Safari";if((t.includes("chrome/")||Cr(t))&&!t.includes("edge/"))return"Chrome";if(Nr(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Er(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/firefox\//i.test(e)}function Sr(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Cr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/crios\//i.test(e)}function Ar(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/iemobile/i.test(e)}function Nr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/android/i.test(e)}function Rr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/blackberry/i.test(e)}function Pr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/webos/i.test(e)}function Or(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/iphone|ipad|ipod/i.test(e)}function Dr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return Or(e)||Nr(e)||Pr(e)||Rr(e)||/windows phone/i.test(e)||Ar(e)}function Lr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ir(Be());break;case"Worker":t="".concat(Ir(Be()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ht,"/").concat(r)}var Mr=function(){function e(t,n){Te(this,e),this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fr(this),this.idTokenSubscription=new Fr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}return Ee(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Pn(t)),this._initializationPromise=this.queue(be(ke().mark((function r(){var i,a;return ke().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Tr.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=be(ke().mark((function e(t){var n,r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return Cn(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,hr(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?st(t):null)&&Cn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=be(ke().mark((function e(t){var n=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&Cn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(be(ke().mark((function n(){return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Pn(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Je("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=be(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Cn(n=t&&Pn(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Tr.create(this,[Pn(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=be(ke().mark((function e(t){var n=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Cn(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Cn(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Lr(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=xe({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ur(e){return st(e)}var Fr=function(){function e(t){var n=this;Te(this,e),this.auth=t,this.observer=null,this.addObserver=at((function(e){return n.observer=e}))}return Ee(e,[{key:"next",get:function(){return Cn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function jr(e,t,n){var r=Ur(e);Cn(r._canInitEmulator,r,"emulator-config-failed"),Cn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Vr(t),o=function(e){var t=Vr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:zr(r.substr(a.length+1))}}var o=s(r.split(":"),2);return{host:o[0],port:zr(o[1])}}(t),u=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Vr(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function zr(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var qr=function(){function e(t,n){Te(this,e),this.providerId=t,this.signInMethod=n}return Ee(e,[{key:"toJSON",value:function(){return An("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return An("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return An("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return An("not implemented")}}]),e}();function Br(e,t){return Hr.apply(this,arguments)}function Hr(){return(Hr=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qn(t,"POST","/v1/accounts:resetPassword",zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wr(e,t){return Kr.apply(this,arguments)}function Kr(){return(Kr=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gr(e,t){return Qr.apply(this,arguments)}function Qr(){return(Qr=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qn(t,"POST","/v1/accounts:update",zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $r(e,t){return Yr.apply(this,arguments)}function Yr(){return(Yr=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kn(t,"POST","/v1/accounts:signInWithPassword",zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jr(e,t){return Xr.apply(this,arguments)}function Xr(){return(Xr=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qn(t,"POST","/v1/accounts:sendOobCode",zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zr(e,t){return ei.apply(this,arguments)}function ei(){return(ei=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ti(e,t){return ni.apply(this,arguments)}function ni(){return(ni=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ri(e,t){return ii.apply(this,arguments)}function ii(){return(ii=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ai(e,t){return oi.apply(this,arguments)}function oi(){return(oi=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ui(e,t){return si.apply(this,arguments)}function si(){return(si=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kn(t,"POST","/v1/accounts:signInWithEmailLink",zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ci(e,t){return li.apply(this,arguments)}function li(){return(li=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kn(t,"POST","/v1/accounts:signInWithEmailLink",zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fi=function(e){Ae(n,e);var t=Pe(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Te(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return Ee(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",$r(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",ui(t,{email:this._email,oobCode:this._password}));case 5:xn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Wr(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",ci(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:xn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(qr);function hi(e,t){return di.apply(this,arguments)}function di(){return(di=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kn(t,"POST","/v1/accounts:signInWithIdp",zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pi=function(e){Ae(n,e);var t=Pe(n);function n(){var e;return Te(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Ee(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return hi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,hi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,hi(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=nt(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):xn("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=sn(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(qr);function vi(e,t){return yi.apply(this,arguments)}function yi(){return(yi=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qn(t,"POST","/v1/accounts:sendVerificationCode",zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mi(){return(mi=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kn(t,"POST","/v1/accounts:signInWithPhoneNumber",zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gi(){return(gi=be(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kn(t,"POST","/v1/accounts:signInWithPhoneNumber",zn(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Yn(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ki=xe({},"USER_NOT_FOUND","user-not-found");function wi(){return(wi=be(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Kn(t,"POST","/v1/accounts:signInWithPhoneNumber",zn(t,r),ki));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bi=function(e){Ae(n,e);var t=Pe(n);function n(e){var r;return Te(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Ee(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return mi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return gi.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return wi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(qr);var _i=function(){function e(t){var n,r,i,a,o,u;Te(this,e);var s=rt(it(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Cn(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Ee(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=rt(it(e)).link,n=t?rt(it(t)).deep_link_id:null,r=rt(it(e)).deep_link_id;return(r?rt(it(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(Cb){return null}}}]),e}();var xi=function(){function e(){Te(this,e),this.providerId=e.PROVIDER_ID}return Ee(e,null,[{key:"credential",value:function(e,t){return fi._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=_i.parseLink(t);return Cn(n,"argument-error"),fi._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();xi.PROVIDER_ID="password",xi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",xi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Ti=function(){function e(t){Te(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Ee(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Ii=function(e){Ae(n,e);var t=Pe(n);function n(){var e;return Te(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Ee(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return lt(this.scopes)}}]),n}(Ti),Ei=function(e){Ae(n,e);var t=Pe(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ee(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Cn(e.idToken||e.accessToken,"argument-error"),pi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Cn("providerId"in t&&"signInMethod"in t,"argument-error"),pi._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Ii),Si=function(e){Ae(n,e);var t=Pe(n);function n(){return Te(this,n),t.call(this,"facebook.com")}return Ee(n,null,[{key:"credential",value:function(e){return pi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Cb){return null}}}]),n}(Ii);Si.FACEBOOK_SIGN_IN_METHOD="facebook.com",Si.PROVIDER_ID="facebook.com";var Ci=function(e){Ae(n,e);var t=Pe(n);function n(){var e;return Te(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Ee(n,null,[{key:"credential",value:function(e,t){return pi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(Cb){return null}}}]),n}(Ii);Ci.GOOGLE_SIGN_IN_METHOD="google.com",Ci.PROVIDER_ID="google.com";var Ai=function(e){Ae(n,e);var t=Pe(n);function n(){return Te(this,n),t.call(this,"github.com")}return Ee(n,null,[{key:"credential",value:function(e){return pi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Cb){return null}}}]),n}(Ii);Ai.GITHUB_SIGN_IN_METHOD="github.com",Ai.PROVIDER_ID="github.com";var Ni=function(e){Ae(n,e);var t=Pe(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return Ee(n,[{key:"_getIdTokenResponse",value:function(e){return hi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,hi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,hi(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(qr),Ri=function(e){Ae(n,e);var t=Pe(n);function n(e){return Te(this,n),Cn(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Ee(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Ni.fromJSON(e);return Cn(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Ni._create(r,n)}catch(i){return null}}}]),n}(Ti),Pi=function(e){Ae(n,e);var t=Pe(n);function n(){return Te(this,n),t.call(this,"twitter.com")}return Ee(n,null,[{key:"credential",value:function(e,t){return pi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(Cb){return null}}}]),n}(Ii);function Oi(e,t){return Di.apply(this,arguments)}function Di(){return(Di=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kn(t,"POST","/v1/accounts:signUp",zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Pi.TWITTER_SIGN_IN_METHOD="twitter.com",Pi.PROVIDER_ID="twitter.com";var Li=function(){function e(t){Te(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Ee(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=be(ke().mark((function t(n,r,i){var a,o,u,s,c=arguments;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,wr._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Mi(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=be(ke().mark((function t(n,r,i){var a;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Mi(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Mi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Ui(){return Ui=be(ke().mark((function e(t){var n,r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ur(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Li({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Oi(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Li._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Ui.apply(this,arguments)}var Fi=function(e){Ae(n,e);var t=Pe(n);function n(e,r,i,a){var o,u;return Te(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(Ce(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return Ee(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Ye);function ji(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Fi._fromErrorAndOperation(e,n,t,r);throw n}))}function Vi(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function zi(e,t){return qi.apply(this,arguments)}function qi(){return qi=be(ke().mark((function e(t,n){var r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=st(t),e.next=3,Wi(!0,r,n);case 3:return e.t0=Zn,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Vi(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),qi.apply(this,arguments)}function Bi(e,t){return Hi.apply(this,arguments)}function Hi(){return Hi=be(ke().mark((function e(t,n){var r,i,a=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=ur,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Li._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Hi.apply(this,arguments)}function Wi(e,t,n){return Ki.apply(this,arguments)}function Ki(){return(Ki=be(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hr(n);case 2:i=Vi(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Cn(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gi(e,t){return Qi.apply(this,arguments)}function Qi(){return Qi=be(ke().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,ur(t,ji(i,a,n,t),r);case 6:return Cn((o=e.sent).idToken,i,"internal-error"),Cn(u=or(o.idToken),i,"internal-error"),s=u.sub,Cn(t.uid===s,i,"user-mismatch"),e.abrupt("return",Li._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&xn(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Qi.apply(this,arguments)}function $i(e,t){return Yi.apply(this,arguments)}function Yi(){return Yi=be(ke().mark((function e(t,n){var r,i,a,o,u=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,ji(t,i,n);case 4:return a=e.sent,e.next=7,Li._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Yi.apply(this,arguments)}function Ji(e,t){return Xi.apply(this,arguments)}function Xi(){return(Xi=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$i(Ur(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zi(e,t){return ea.apply(this,arguments)}function ea(){return(ea=be(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=st(t),e.next=3,Wi(!1,r,n.providerId);case 3:return e.abrupt("return",Bi(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ta(e,t){return na.apply(this,arguments)}function na(){return(na=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gi(st(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ra(e,t){return ia.apply(this,arguments)}function ia(){return(ia=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kn(t,"POST","/v1/accounts:signInWithCustomToken",zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aa(){return(aa=be(ke().mark((function e(t,n){var r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ur(t),e.next=3,ra(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Li._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oa=function(){function e(t,n){Te(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Ee(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?ua._fromServerResponse(e,t):xn(e,"internal-error")}}]),e}(),ua=function(e){Ae(n,e);var t=Pe(n);function n(e){var r;return Te(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Ee(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(oa);function sa(e,t,n){var r;Cn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Cn("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Cn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Cn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function ca(){return(ca=be(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=st(t),a={requestType:"PASSWORD_RESET",email:n},r&&sa(i,a,r),e.next=5,ti(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function la(){return(la=be(ke().mark((function e(t,n,r){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Br(st(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fa(){return(fa=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gr(st(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ha(e,t){return da.apply(this,arguments)}function da(){return(da=be(ke().mark((function e(t,n){var r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=st(t),e.next=3,Br(r,{oobCode:n});case 3:i=e.sent,Cn(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Cn(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Cn(i.mfaInfo,r,"internal-error");case 13:Cn(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=oa._fromServerResponse(Ur(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pa(){return(pa=be(ke().mark((function e(t,n){var r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ha(st(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function va(e,t,n){return ya.apply(this,arguments)}function ya(){return(ya=be(ke().mark((function e(t,n,r){var i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ur(t),e.next=3,Oi(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Li._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ma(){return(ma=be(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=st(t),a={requestType:"EMAIL_SIGNIN",email:n},Cn(r.handleCodeInApp,i,"argument-error"),r&&sa(i,a,r),e.next=6,ri(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ga(){return(ga=be(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=st(t),Cn((a=xi.credentialWithLink(n,r||On()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Ji(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ka(e,t){return wa.apply(this,arguments)}function wa(){return(wa=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qn(t,"POST","/v1/accounts:createAuthUri",zn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ba(){return(ba=be(ke().mark((function e(t,n){var r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Dn()?On():"http://localhost",i={identifier:n,continueUri:r},e.next=4,ka(st(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _a(){return(_a=be(ke().mark((function e(t,n){var r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=st(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&sa(r.auth,a,n),e.next=8,Zr(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xa(){return(xa=be(ke().mark((function e(t,n,r){var i,a,o,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=st(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&sa(i.auth,o,r),e.next=8,ai(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ta(e,t){return Ia.apply(this,arguments)}function Ia(){return(Ia=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ea(){return(Ea=be(ke().mark((function e(t,n){var r,i,a,o,u,s,c;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=st(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,ur(a,Ta(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sa(e,t,n){return Ca.apply(this,arguments)}function Ca(){return(Ca=be(ke().mark((function e(t,n,r){var i,a,o,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,ur(t,Wr(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Aa=Ee((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Te(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Na=function(e){Ae(n,e);var t=Pe(n);function n(e,r,i,a){var o;return Te(this,n),(o=t.call(this,e,r,i)).username=a,o}return Ee(n)}(Aa),Ra=function(e){Ae(n,e);var t=Pe(n);function n(e,r){return Te(this,n),t.call(this,e,"facebook.com",r)}return Ee(n)}(Aa),Pa=function(e){Ae(n,e);var t=Pe(n);function n(e,r){return Te(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Ee(n)}(Na),Oa=function(e){Ae(n,e);var t=Pe(n);function n(e,r){return Te(this,n),t.call(this,e,"google.com",r)}return Ee(n)}(Aa),Da=function(e){Ae(n,e);var t=Pe(n);function n(e,r,i){return Te(this,n),t.call(this,e,"twitter.com",r,i)}return Ee(n)}(Na);function La(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=or(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Aa(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Ra(a,i);case"github.com":return new Pa(a,i);case"google.com":return new Oa(a,i);case"twitter.com":return new Da(a,i,e.screenName||null);case"custom":case"anonymous":return new Aa(a,null);default:return new Aa(a,r,i)}}(n)}var Ma=function(){function e(t,n){Te(this,e),this.type=t,this.credential=n}return Ee(e,[{key:"toJSON",value:function(){return{multiFactorSession:xe({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Ua=function(){function e(t,n,r){Te(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Ee(e,[{key:"resolveSignIn",value:function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Ur(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return oa._fromServerResponse(r,e)}));Cn(i.mfaPendingCredential,r,"internal-error");var o=Ma._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=be(ke().mark((function e(t){var a,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Li._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Cn(n.user,r,"internal-error"),e.abrupt("return",Li._forOperation(n.user,n.operationType,u));case 17:xn(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Fa(e,t){return qn(e,"POST","/v2/accounts/mfaEnrollment:start",zn(e,t))}var ja=function(){function e(t){var n=this;Te(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return oa._fromServerResponse(t.auth,e)})))}))}return Ee(e,[{key:"getSession",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ma,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=be(ke().mark((function e(t,n){var r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,ur(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=be(ke().mark((function e(t){var n,r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,ur(this.user,qn(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",zn(a,{idToken:r,mfaEnrollmentId:n})));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Va=new WeakMap;var za="__sak",qa=function(){function e(t,n){Te(this,e),this.storageRetriever=t,this.type=n}return Ee(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(za,"1"),this.storage.removeItem(za),Promise.resolve(!0)):Promise.resolve(!1)}catch(Cb){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Ba=function(e){Ae(n,e);var t=Pe(n);function n(){var e;return Te(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Be();return Sr(e)||Or(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Dr(),e._shouldAllowMigration=!0,e}return Ee(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Qe()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=be(ke().mark((function e(t,r){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,un(Ne(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=be(ke().mark((function e(t){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,un(Ne(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,un(Ne(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(qa);Ba.type="LOCAL";var Ha=Ba,Wa=function(e){Ae(n,e);var t=Pe(n);function n(){return Te(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Ee(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(qa);Wa.type="SESSION";var Ka=Wa;function Ga(e){return Promise.all(e.map(function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Qa=function(){function e(t){Te(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Ee(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=be(ke().mark((function e(t){var n,r,i,a,o,u,s,c;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Ga(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function $a(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Qa.receivers=[];var Ya=function(){function e(t){Te(this,e),this.target=t,this.handlers=new Set}return Ee(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=be(ke().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=$a("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Ja(){return window}function Xa(){return"undefined"!==typeof Ja().WorkerGlobalScope&&"function"===typeof Ja().importScripts}function Za(){return eo.apply(this,arguments)}function eo(){return(eo=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function to(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var no="firebaseLocalStorageDb",ro="firebaseLocalStorage",io="fbase_key",ao=function(){function e(t){Te(this,e),this.request=t}return Ee(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function oo(e,t){return e.transaction([ro],t?"readwrite":"readonly").objectStore(ro)}function uo(){var e=indexedDB.deleteDatabase(no);return new ao(e).toPromise()}function so(){var e=indexedDB.open(no,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(ro,{keyPath:io})}catch(r){n(r)}})),e.addEventListener("success",be(ke().mark((function n(){var r;return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(ro)){n.next=12;break}return r.close(),n.next=5,uo();case 5:return n.t0=t,n.next=8,so();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function co(e,t,n){return lo.apply(this,arguments)}function lo(){return lo=be(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=oo(t,!0).put((xe(i={},io,n),xe(i,"value",r),i)),e.abrupt("return",new ao(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),lo.apply(this,arguments)}function fo(e,t){return ho.apply(this,arguments)}function ho(){return ho=be(ke().mark((function e(t,n){var r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oo(t,!1).get(n),e.next=3,new ao(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),ho.apply(this,arguments)}function po(e,t){var n=oo(e,!0).delete(t);return new ao(n).toPromise()}var vo=function(){function e(){Te(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Ee(e,[{key:"_openDb",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,so();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xa()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=be(ke().mark((function e(){var t=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Qa._getInstance(Xa()?self:null),this.receiver._subscribe("keyChanged",function(){var e=be(ke().mark((function e(n,r){var i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=be(ke().mark((function e(){var t,n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Za();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Ya(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&to()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,so();case 5:return t=e.sent,e.next=8,co(t,za,"1");case 8:return e.next=10,po(t,za);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=be(ke().mark((function e(t,n){var r=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return co(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return fo(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=be(ke().mark((function e(t){var n=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return po(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=be(ke().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=oo(e,!1).getAll();return new ao(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Se(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(be(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();vo.type="LOCAL";var yo=vo;function mo(e,t){return qn(e,"POST","/v2/accounts/mfaSignIn:start",zn(e,t))}function go(e){return ko.apply(this,arguments)}function ko(){return(ko=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wo(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Tn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function bo(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var _o=1e12,xo=function(){function e(t){Te(this,e),this.auth=t,this.counter=_o,this._widgets=new Map}return Ee(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new To(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||_o;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||_o;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||_o,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),To=function(){function e(t,n,r){var i=this;Te(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Cn(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Ee(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Io=bo("rcb"),Eo=new Mn(3e4,6e4),So=function(){function e(){Te(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Ja().grecaptcha}return Ee(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Cn(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Ja().grecaptcha):new Promise((function(r,i){var a=Ja().setTimeout((function(){i(Tn(e,"network-request-failed"))}),Eo.get());Ja()[Io]=function(){Ja().clearTimeout(a),delete Ja()[Io];var o=Ja().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Tn(e,"internal-error"))},wo("".concat("https://www.google.com/recaptcha/api.js?","?").concat(nt({onload:Io,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Tn(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Ja().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var Co=function(){function e(){Te(this,e)}return Ee(e,[{key:"load",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new xo(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Ao="recaptcha",No={theme:"light",type:"image"},Ro=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},No),r=arguments.length>2?arguments[2]:void 0;Te(this,e),this.parameters=n,this.type=Ao,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ur(r),this.isInvisible="invisible"===this.parameters.size,Cn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Cn(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Co:new So,this.validateStartingState()}return Ee(e,[{key:"verify",value:function(){var e=be(ke().mark((function e(){var t,n,r,i=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Cn(!this.parameters.sitekey,this.auth,"argument-error"),Cn(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Cn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Ja()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Cn(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=be(ke().mark((function e(){var t,n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cn(Dn()&&!Xa(),this.auth,"internal-error"),e.next=3,Po();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,go(this.auth);case 8:Cn(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Cn(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Po(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Oo=function(){function e(t,n){Te(this,e),this.verificationId=t,this.onConfirmation=n}return Ee(e,[{key:"confirm",value:function(e){var t=bi._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Do(){return(Do=be(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ur(t),e.next=3,Fo(i,n,st(r));case 3:return a=e.sent,e.abrupt("return",new Oo(a,(function(e){return Ji(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lo(e,t,n){return Mo.apply(this,arguments)}function Mo(){return(Mo=be(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=st(t),e.next=3,Wi(!1,i,"phone");case 3:return e.next=5,Fo(i.auth,n,st(r));case 5:return a=e.sent,e.abrupt("return",new Oo(a,(function(e){return Zi(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uo(){return(Uo=be(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=st(t),e.next=3,Fo(i.auth,n,st(r));case 3:return a=e.sent,e.abrupt("return",new Oo(a,(function(e){return ta(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fo(e,t,n){return jo.apply(this,arguments)}function jo(){return jo=be(ke().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Cn("string"===typeof a,t,"argument-error"),Cn(r.type===Ao,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Cn("enroll"===u.type,t,"internal-error"),e.next=13,Fa(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Cn("signin"===u.type,t,"internal-error"),Cn(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,mo(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,vi(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),jo.apply(this,arguments)}function Vo(){return(Vo=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bi(st(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var zo=function(){function e(t){Te(this,e),this.providerId=e.PROVIDER_ID,this.auth=Ur(t)}return Ee(e,[{key:"verifyPhoneNumber",value:function(e,t){return Fo(this.auth,e,st(t))}}],[{key:"credential",value:function(e,t){return bi._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?bi._fromTokenResponse(n,r):null}}]),e}();function qo(e,t){return t?Pn(t):(Cn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}zo.PROVIDER_ID="phone",zo.PHONE_SIGN_IN_METHOD="phone";var Bo=function(e){Ae(n,e);var t=Pe(n);function n(e){var r;return Te(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Ee(n,[{key:"_getIdTokenResponse",value:function(e){return hi(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return hi(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return hi(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(qr);function Ho(e){return $i(e.auth,new Bo(e),e.bypassAuthState)}function Wo(e){var t=e.auth,n=e.user;return Cn(n,t,"internal-error"),Gi(n,new Bo(e),e.bypassAuthState)}function Ko(e){return Go.apply(this,arguments)}function Go(){return(Go=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Cn(r=t.user,n,"internal-error"),e.abrupt("return",Bi(r,new Bo(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qo=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Te(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Ee(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=be(ke().mark((function t(n,r){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=be(ke().mark((function e(t){var n,r,i,a,o,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ho;case"linkViaPopup":case"linkViaRedirect":return Ko;case"reauthViaPopup":case"reauthViaRedirect":return Wo;default:xn(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Nn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Nn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),$o=new Mn(2e3,1e4);function Yo(e,t,n){return Jo.apply(this,arguments)}function Jo(){return(Jo=be(ke().mark((function e(t,n,r){var i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ur(t),En(t,n,Ti),a=qo(i,r),o=new tu(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xo(){return(Xo=be(ke().mark((function e(t,n,r){var i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return En((i=st(t)).auth,n,Ti),a=qo(i.auth,r),o=new tu(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zo(e,t,n){return eu.apply(this,arguments)}function eu(){return(eu=be(ke().mark((function e(t,n,r){var i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return En((i=st(t)).auth,n,Ti),a=qo(i.auth,r),o=new tu(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tu=function(e){Ae(n,e);var t=Pe(n);function n(e,r,i,a,o){var u;return Te(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Ce(u),u}return Ee(n,[{key:"executeNotNull",value:function(){var e=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Cn(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=be(ke().mark((function e(){var t,n=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nn(1===this.filter.length,"Popup operations only handle one event"),t=$a(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Tn(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Tn(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Tn(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,$o.get())}()}}]),n}(Qo);tu.currentPopupAction=null;var nu="pendingRedirect",ru=new Map,iu=function(e){Ae(n,e);var t=Pe(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Te(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return Ee(n,[{key:"execute",value:function(){var e=be(ke().mark((function e(){var t,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ru.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,au(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,un(Ne(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:ru.set(this.auth._key(),t);case 21:return this.bypassAuthState||ru.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=be(ke().mark((function e(t){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",un(Ne(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",un(Ne(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Qo);function au(e,t){return ou.apply(this,arguments)}function ou(){return ou=be(ke().mark((function e(t,n){var r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lu(n),i=cu(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),ou.apply(this,arguments)}function uu(e,t){return su.apply(this,arguments)}function su(){return(su=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cu(t)._set(lu(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cu(e){return Pn(e._redirectPersistence)}function lu(e){return xr(nu,e.config.apiKey,e.name)}function fu(e,t,n){return function(e,t,n){return hu.apply(this,arguments)}(e,t,n)}function hu(){return(hu=be(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ur(t),En(t,n,Ti),a=qo(i,r),e.next=5,uu(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function du(e,t,n){return function(e,t,n){return pu.apply(this,arguments)}(e,t,n)}function pu(){return(pu=be(ke().mark((function e(t,n,r){var i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return En((i=st(t)).auth,n,Ti),a=qo(i.auth,r),e.next=5,uu(a,i.auth);case 5:return e.next=7,bu(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vu(e,t,n){return function(e,t,n){return yu.apply(this,arguments)}(e,t,n)}function yu(){return(yu=be(ke().mark((function e(t,n,r){var i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return En((i=st(t)).auth,n,Ti),a=qo(i.auth,r),e.next=5,Wi(!1,i,n.providerId);case 5:return e.next=7,uu(a,i.auth);case 7:return e.next=9,bu(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mu(e,t){return gu.apply(this,arguments)}function gu(){return(gu=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ur(t)._initializationPromise;case 2:return e.abrupt("return",ku(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ku(e,t){return wu.apply(this,arguments)}function wu(){return wu=be(ke().mark((function e(t,n){var r,i,a,o,u,s=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Ur(t),a=qo(i,n),o=new iu(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),wu.apply(this,arguments)}function bu(e){return _u.apply(this,arguments)}function _u(){return(_u=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$a("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xu=function(){function e(t){Te(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Ee(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Iu(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Iu(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Tn(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tu(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Tu(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Tu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Iu(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Eu(e){return Su.apply(this,arguments)}function Su(){return Su=be(ke().mark((function e(t){var n,r=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",qn(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Su.apply(this,arguments)}var Cu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Au=/^https?/;function Nu(){return(Nu=be(ke().mark((function e(t){var n,r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Eu(t);case 4:n=e.sent,r=n.authorizedDomains,i=Se(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Ru(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:xn(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function Ru(e){var t=On(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Au.test(r))return!1;if(Cu.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Pu=new Mn(3e4,6e4);function Ou(){var e=Ja().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=lt(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Du=null;function Lu(e){return Du=Du||function(e){return new Promise((function(t,n){var r,i,a;function o(){Ou(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Ou(),n(Tn(e,"network-request-failed"))},timeout:Pu.get()})}if(null===(i=null===(r=Ja().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Ja().gapi)||void 0===a?void 0:a.load)){var u=bo("iframefcb");return Ja()[u]=function(){gapi.load?o():n(Tn(e,"network-request-failed"))},wo("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Du=null,e}))}(e),Du}var Mu=new Mn(5e3,15e3),Uu="__/auth/iframe",Fu="emulator/auth/iframe",ju={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zu(e){var t=e.config;Cn(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Un(t,Fu):"https://".concat(e.config.authDomain,"/").concat(Uu),r={apiKey:t.apiKey,appName:e.name,v:Ht},i=Vu.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(nt(r).slice(1))}function qu(e){return Bu.apply(this,arguments)}function Bu(){return Bu=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lu(t);case 2:return n=e.sent,Cn(r=Ja().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:zu(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ju,dontclear:!0},(function(e){return new Promise(function(){var n=be(ke().mark((function n(r,i){var a,o,u;return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Ja().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Tn(t,"network-request-failed"),o=Ja().setTimeout((function(){i(a)}),Mu.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Bu.apply(this,arguments)}var Hu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Wu=function(){function e(t){Te(this,e),this.window=t,this.associatedEvent=null}return Ee(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Ku(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},Hu),{width:r.toString(),height:i.toString(),top:a,left:o}),l=Be().toLowerCase();n&&(u=Cr(l)?"_blank":n),Er(l)&&(t=t||"http://localhost",c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=s(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return Or(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new Wu(null);var h=window.open(t||"",u,f);Cn(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Wu(h)}var Gu="__/auth/handler",Qu="emulator/auth/handler";function $u(e,t,n,r,i,a){Cn(e.config.authDomain,e,"auth-domain-config-required"),Cn(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ht,eventId:i};if(t instanceof Ti){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,c=Object.entries(a||{});u<c.length;u++){var l=s(c[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof Ii){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Gu);return Un(t,Qu)}(e),"?").concat(nt(p).slice(1))}var Yu="webStorageSupport",Ju=function(){function e(){Te(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ka,this._completeRedirectFn=ku}return Ee(e,[{key:"_openPopup",value:function(){var e=be(ke().mark((function e(t,n,r,i){var a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nn(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=$u(t,n,r,On(),i),e.abrupt("return",Ku(t,o,$a()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=be(ke().mark((function e(t,n,r,i){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=$u(t,n,r,On(),i),Ja().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Nn(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qu(t);case 2:return n=e.sent,r=new xu(t),n.register("authEvent",(function(e){return Cn(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Yu,{type:Yu},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Yu];void 0!==i&&t(!!i),xn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Nu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Dr()||Sr()||Or()}}]),e}(),Xu=Ju,Zu=function(e){Ae(n,e);var t=Pe(n);function n(e){var r;return Te(this,n),(r=t.call(this,"phone")).credential=e,r}return Ee(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return qn(e,"POST","/v2/accounts/mfaEnrollment:finalize",zn(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return qn(e,"POST","/v2/accounts/mfaSignIn:finalize",zn(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){Te(this,e),this.factorId=t}return Ee(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return An("unexpected MultiFactorSessionType")}}}]),e}()),es=function(){function e(){Te(this,e)}return Ee(e,null,[{key:"assertion",value:function(e){return Zu._fromCredential(e)}}]),e}();es.FACTOR_ID="phone";var ts,ns="@firebase/auth",rs="0.19.4",is=function(){function e(t){Te(this,e),this.auth=t,this.internalListeners=new Map}return Ee(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Cn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function as(){return window}ts="Browser",Lt(new ft("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=r.options,a=i.apiKey,o=i.authDomain;return function(e){Cn(a&&!a.includes(":"),"invalid-api-key",{appName:e.name}),Cn(!(null===o||void 0===o?void 0:o.includes(":")),"argument-error",{appName:e.name});var t={apiKey:a,authDomain:o,clientPlatform:ts,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lr(ts)},r=new Mr(e,t);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Pn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(r,n),r}(r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Lt(new ft("auth-internal",(function(e){return function(e){return new is(e)}(Ur(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Yt(ns,rs,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(ts)),Yt(ns,rs,"esm2017");var os=2e3;function us(e,t,n){return ss.apply(this,arguments)}function ss(){return ss=be(ke().mark((function e(t,n,r){var i,a,o,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=as(),o=a.BuildInfo,Nn(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,ps(n.sessionId);case 4:return u=e.sent,s={},Or()?s.ibi=o.packageName:Nr()?s.apn=o.packageName:xn(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",$u(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),ss.apply(this,arguments)}function cs(){return(cs=be(ke().mark((function e(t){var n,r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=as(),r=n.BuildInfo,i={},Or()?i.iosBundleId=r.packageName:Nr()?i.androidPackageName=r.packageName:xn(t,"operation-not-supported-in-this-environment"),e.next=5,Eu(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ls(e){var t=as().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function fs(e,t,n){return hs.apply(this,arguments)}function hs(){return hs=be(ke().mark((function e(t,n,r){var i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=as(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Tn(t,"redirect-cancelled-by-user"))}),os))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Nr()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),hs.apply(this,arguments)}function ds(e){var t,n,r,i,a,o,u,s,c,l,f=as();Cn("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Cn("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Cn("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Cn("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Cn("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function ps(e){return vs.apply(this,arguments)}function vs(){return(vs=be(ke().mark((function e(t){var n,r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ys(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ys(e){if(Nn(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var ms=20,gs=function(e){Ae(n,e);var t=Pe(n);function n(){var e;return Te(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Ee(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),un(Ne(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(xu);function ks(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Ts(),postBody:null,tenantId:e.tenantId,error:Tn(e,"no-auth-event")}}function ws(e,t){return Is()._set(Es(e),t)}function bs(e){return _s.apply(this,arguments)}function _s(){return(_s=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Is()._get(Es(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Is()._remove(Es(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xs(e,t){var n,r,i=function(e){var t=Ss(e),n=t.link?decodeURIComponent(t.link):void 0,r=Ss(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Ss(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Ss(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Tn(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Ts(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<ms;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Is(){return Pn(Ha)}function Es(e){return xr("authEvent",e.config.apiKey,e.name)}function Ss(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=i(t=n)||ct(t)||o(t)||u();r[0];return rt(r.slice(1).join("?"))}var Cs=function(){function e(){Te(this,e),this._redirectPersistence=Ka,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ku}return Ee(e,[{key:"_initialize",value:function(){var e=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new gs(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){xn(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=be(ke().mark((function e(t,n,r,i){var a,o,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ds(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),ru.clear(),e.next=10,this._originValidation(t);case 10:return o=ks(t,r,i),e.next=13,ws(t,o);case 13:return e.next=15,us(t,o,n);case 15:return u=e.sent,e.next=18,ls(u);case 18:return s=e.sent,e.abrupt("return",fs(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return cs.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=as(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(be(ke().mark((function n(){return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,bs(e);case 2:t.onEvent(Ns());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=be(ke().mark((function n(r){var i,a;return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,bs(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=xs(i,r.url)),t.onEvent(a||Ns());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");as().handleOpenURL=function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),As=Cs;function Ns(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Tn("no-auth-event")}}var Rs=1e3;function Ps(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Os(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return!("file:"!==Ps()&&"ionic:"!==Ps()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ds(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return Qe()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/Edge\/\d+/.test(e)}(e)}function Ls(){try{var e=self.localStorage,t=$a();if(e)return e.setItem(t,"1"),e.removeItem(t),!Ds()||$e()}catch(n){return Ms()&&$e()}return!1}function Ms(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Us(){return("http:"===Ps()||"https:"===Ps()||Ke()||Os())&&!(Ge()||We())&&Ls()&&!Ms()}function Fs(){return Os()&&"undefined"!==typeof document}function js(){return Vs.apply(this,arguments)}function Vs(){return(Vs=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fs()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),Rs);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var zs={LOCAL:"local",NONE:"none",SESSION:"session"},qs=Cn,Bs="persistence";function Hs(e,t){qs(Object.values(zs).includes(t),e,"invalid-persistence-type"),Ge()?qs(t!==zs.SESSION,e,"unsupported-persistence-type"):We()?qs(t===zs.NONE,e,"unsupported-persistence-type"):Ms()?qs(t===zs.NONE||t===zs.LOCAL&&$e(),e,"unsupported-persistence-type"):qs(t===zs.NONE||Ls(),e,"unsupported-persistence-type")}function Ws(e){return Ks.apply(this,arguments)}function Ks(){return Ks=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Gs(),r=xr(Bs,t.config.apiKey,t.name),(null===n||void 0===n?void 0:n.sessionStorage)&&n.sessionStorage.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),Ks.apply(this,arguments)}function Gs(){return"undefined"!==typeof window?window:null}var Qs=Cn,$s=function(){function e(){Te(this,e),this.browserResolver=Pn(Xu),this.cordovaResolver=Pn(As),this.underlyingResolver=null,this._redirectPersistence=Ka,this._completeRedirectFn=ku}return Ee(e,[{key:"_initialize",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=be(ke().mark((function e(t,n,r,i){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=be(ke().mark((function e(t,n,r,i){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Fs()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Qs(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,js();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ys(e){return e.unwrap()}function Js(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new nc(e,function(e,t){var n,r=st(e),i=t;return Cn(t.customData.operationType,r,"argument-error"),Cn(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Ua._fromError(r,i)}(e,t));else if(r){var i=Xs(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Xs(e){var t=(e instanceof Ye?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Ye)&&"temporaryProof"in t&&"phoneNumber"in t)return zo.credentialFromResult(e);var n,r=t.providerId;if(!r||r===ln.PASSWORD)return null;switch(r){case ln.GOOGLE:n=Ci;break;case ln.FACEBOOK:n=Si;break;case ln.GITHUB:n=Ai;break;case ln.TWITTER:n=Pi;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Ni._create(r,u):pi._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Ei(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Ye?n.credentialFromError(e):n.credentialFromResult(e)}function Zs(e,t){return t.catch((function(t){throw t instanceof Ye&&Js(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Xs(t)),additionalUserInfo:La(e),user:rc.getOrCreate(r)}}))}function ec(e,t){return tc.apply(this,arguments)}function tc(){return(tc=be(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Zs(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nc=function(){function e(t,n){Te(this,e),this.resolver=n,this.auth=t.wrapped()}return Ee(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Zs(Ys(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),rc=function(){function e(t){Te(this,e),this._delegate=t,this.multiFactor=function(e){var t=st(e);return Va.has(t)||Va.set(t,ja._fromUser(t)),Va.get(t)}(t)}return Ee(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zs(this.auth,Zi(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ec(this.auth,Lo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zs(this.auth,Zo(this._delegate,t,$s)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ws(Ur(this.auth));case 2:return e.abrupt("return",vu(this._delegate,t,$s));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zs(this.auth,ta(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return ec(this.auth,function(e,t,n){return Uo.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Zs(this.auth,function(e,t,n){return Xo.apply(this,arguments)}(this._delegate,e,$s))}},{key:"reauthenticateWithRedirect",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ws(Ur(this.auth));case 2:return e.abrupt("return",du(this._delegate,t,$s));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return _a.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zi(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Sa(st(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Sa(st(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Vo.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Ea.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return xa.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();rc.USER_MAP=new WeakMap;var ic=Cn,ac=function(){function e(t,n){if(Te(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;ic(r,"invalid-api-key",{appName:t.name});var i=[_r];if("undefined"!==typeof window){i=function(e,t){var n=Gs();if(!(null===n||void 0===n?void 0:n.sessionStorage))return[];var r=xr(Bs,e,t);switch(n.sessionStorage.getItem(r)){case zs.NONE:return[_r];case zs.LOCAL:return[yo,Ka];case zs.SESSION:return[Ka];default:return[]}}(r,t.name);for(var a=0,o=[yo,Ha,Ka];a<o.length;a++){var u=o[a];i.includes(u)||i.push(u)}}ic(r,"invalid-api-key",{appName:t.name});var s="undefined"!==typeof window?$s:void 0;this._delegate=n.initialize({options:{persistence:i,popupRedirectResolver:s}}),this._delegate._updateErrorMap(gn),this.linkUnderlyingAuth()}return Ee(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?rc.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){jr(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return fa.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return ha(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return la.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zs(this._delegate,va(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return ba.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=_i.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ic(Us(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,mu(this._delegate,$s);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Zs(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Ur(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=oc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=oc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return ma.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return ca.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Hs(this._delegate,t),e.t0=t,e.next=e.t0===zs.SESSION?4:e.t0===zs.LOCAL?6:e.t0===zs.NONE?11:13;break;case 4:return n=Ka,e.abrupt("break",14);case 6:return e.next=8,Pn(yo)._isAvailable();case 8:return r=e.sent,n=r?yo:Ha,e.abrupt("break",14);case 11:return n=_r,e.abrupt("break",14);case 13:return e.abrupt("return",xn("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Zs(this._delegate,function(e){return Ui.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Zs(this._delegate,Ji(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Zs(this._delegate,function(e,t){return aa.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Zs(this._delegate,function(e,t,n){return Ji(st(e),xi.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Zs(this._delegate,function(e,t,n){return ga.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return ec(this._delegate,function(e,t,n){return Do.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ic(Us(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Zs(this._delegate,Yo(this._delegate,t,$s)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ic(Us(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Ws(this._delegate);case 3:return e.abrupt("return",fu(this._delegate,t,$s));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return pa.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function oc(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&rc.getOrCreate(e))},error:t,complete:n}}ac.Persistence=zs;var uc=function(){function e(){Te(this,e),this.providerId="phone",this._delegate=new zo(Ys(on.auth()))}return Ee(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return zo.credential(e,t)}}]),e}();uc.PHONE_SIGN_IN_METHOD=zo.PHONE_SIGN_IN_METHOD,uc.PROVIDER_ID=zo.PROVIDER_ID;var sc,cc=Cn,lc=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:on.app();Te(this,e),cc(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Ro(t,n,i.auth()),this.type=this._delegate.type}return Ee(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(sc=on).INTERNAL.registerComponent(new ft("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new ac(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:fn,PASSWORD_RESET:hn,RECOVER_EMAIL:dn,REVERT_SECOND_FACTOR_ADDITION:pn,VERIFY_AND_CHANGE_EMAIL:vn,VERIFY_EMAIL:yn}},EmailAuthProvider:xi,FacebookAuthProvider:Si,GithubAuthProvider:Ai,GoogleAuthProvider:Ci,OAuthProvider:Ei,SAMLAuthProvider:Ri,PhoneAuthProvider:uc,PhoneMultiFactorGenerator:es,RecaptchaVerifier:lc,TwitterAuthProvider:Pi,Auth:ac,AuthCredential:qr,Error:Ye}).setInstantiationMode("LAZY").setMultipleInstances(!1)),sc.registerVersion("@firebase/auth-compat","0.2.4");var fc,hc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},dc={},pc=pc||{},vc=hc||self;function yc(){}function mc(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function gc(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var kc="closure_uid_"+(1e9*Math.random()>>>0),wc=0;function bc(e,t,n){return e.call.apply(e.bind,arguments)}function _c(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function xc(e,t,n){return(xc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?bc:_c).apply(null,arguments)}function Tc(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ic(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Ec(){this.s=this.s,this.o=this.o}var Sc={};Ec.prototype.s=!1,Ec.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,kc)&&e[kc]||(e[kc]=++wc)}(this);delete Sc[e]}},Ec.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Cc=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Ac=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Nc(e){return Array.prototype.concat.apply([],arguments)}function Rc(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Pc(e){return/^[\s\xa0]*$/.test(e)}var Oc,Dc=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Lc(e,t){return-1!=e.indexOf(t)}function Mc(e,t){return e<t?-1:e>t?1:0}e:{var Uc=vc.navigator;if(Uc){var Fc=Uc.userAgent;if(Fc){Oc=Fc;break e}}Oc=""}function jc(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Vc(e){var t={};for(var n in e)t[n]=e[n];return t}var zc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qc(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<zc.length;a++)n=zc[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Bc(e){return Bc[" "](e),e}Bc[" "]=yc;var Hc,Wc=Lc(Oc,"Opera"),Kc=Lc(Oc,"Trident")||Lc(Oc,"MSIE"),Gc=Lc(Oc,"Edge"),Qc=Gc||Kc,$c=Lc(Oc,"Gecko")&&!(Lc(Oc.toLowerCase(),"webkit")&&!Lc(Oc,"Edge"))&&!(Lc(Oc,"Trident")||Lc(Oc,"MSIE"))&&!Lc(Oc,"Edge"),Yc=Lc(Oc.toLowerCase(),"webkit")&&!Lc(Oc,"Edge");function Jc(){var e=vc.document;return e?e.documentMode:void 0}e:{var Xc="",Zc=function(){var e=Oc;return $c?/rv:([^\);]+)(\)|;)/.exec(e):Gc?/Edge\/([\d\.]+)/.exec(e):Kc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Yc?/WebKit\/(\S+)/.exec(e):Wc?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Zc&&(Xc=Zc?Zc[1]:""),Kc){var el=Jc();if(null!=el&&el>parseFloat(Xc)){Hc=String(el);break e}}Hc=Xc}var tl,nl={};function rl(){return function(e){var t=nl;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Dc(String(Hc)).split("."),n=Dc("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Mc(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Mc(0==a[2].length,0==o[2].length)||Mc(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(vc.document&&Kc){var il=Jc();tl=il||(parseInt(Hc,10)||void 0)}else tl=void 0;var al=tl,ol=function(){if(!vc.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{vc.addEventListener("test",yc,t),vc.removeEventListener("test",yc,t)}catch(n){}return e}();function ul(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function sl(e,t){if(ul.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if($c){e:{try{Bc(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:cl[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&sl.Z.h.call(this)}}ul.prototype.h=function(){this.defaultPrevented=!0},Ic(sl,ul);var cl={2:"touch",3:"pen",4:"mouse"};sl.prototype.h=function(){sl.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ll="closure_listenable_"+(1e6*Math.random()|0),fl=0;function hl(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++fl,this.ca=this.fa=!1}function dl(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function pl(e){this.src=e,this.g={},this.h=0}function vl(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Cc(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(dl(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function yl(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}pl.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=yl(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new hl(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var ml="closure_lm_"+(1e6*Math.random()|0),gl={};function kl(e,t,n,r,i){if(r&&r.once)return bl(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)kl(e,t[a],n,r,i);return null}return n=Cl(n),e&&e[ll]?e.N(t,n,gc(r)?!!r.capture:!!r,i):wl(e,t,n,!1,r,i)}function wl(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=gc(i)?!!i.capture:!!i,u=El(e);if(u||(e[ml]=u=new pl(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Il;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ol||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Tl(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function bl(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)bl(e,t[a],n,r,i);return null}return n=Cl(n),e&&e[ll]?e.O(t,n,gc(r)?!!r.capture:!!r,i):wl(e,t,n,!0,r,i)}function _l(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)_l(e,t[a],n,r,i);else r=gc(r)?!!r.capture:!!r,n=Cl(n),e&&e[ll]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=yl(a=e.g[t],n,r,i))&&(dl(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=El(e))&&(t=e.g[t.toString()],e=-1,t&&(e=yl(t,n,r,i)),(n=-1<e?t[e]:null)&&xl(n))}function xl(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[ll])vl(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Tl(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=El(t))?(vl(n,e),0==n.h&&(n.src=null,t[ml]=null)):dl(e)}}}function Tl(e){return e in gl?gl[e]:gl[e]="on"+e}function Il(e,t){if(e.ca)e=!0;else{t=new sl(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&xl(e),e=n.call(r,t)}return e}function El(e){return(e=e[ml])instanceof pl?e:null}var Sl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cl(e){return"function"===typeof e?e:(e[Sl]||(e[Sl]=function(t){return e.handleEvent(t)}),e[Sl])}function Al(){Ec.call(this),this.i=new pl(this),this.P=this,this.I=null}function Nl(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new ul(t,e);else if(t instanceof ul)t.target=t.target||e;else{var i=t;qc(t=new ul(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Rl(o,r,!0,t)&&i}if(i=Rl(o=t.g=e,r,!0,t)&&i,i=Rl(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Rl(o=t.g=n[a],r,!1,t)&&i}function Rl(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&vl(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Ic(Al,Ec),Al.prototype[ll]=!0,Al.prototype.removeEventListener=function(e,t,n,r){_l(this,e,t,n,r)},Al.prototype.M=function(){if(Al.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)dl(n[r]);delete t.g[e],t.h--}}this.I=null},Al.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Al.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Pl=vc.JSON.stringify;function Ol(){var e=zl,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Dl,Ll=function(){function e(){Te(this,e),this.h=this.g=null}return Ee(e,[{key:"add",value:function(e,t){var n=Ml.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Ml=new(function(){function e(t,n){Te(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Ee(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Ul}),(function(e){return e.reset()})),Ul=function(){function e(){Te(this,e),this.next=this.g=this.h=null}return Ee(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Fl(e){vc.setTimeout((function(){throw e}),0)}function jl(e,t){Dl||function(){var e=vc.Promise.resolve(void 0);Dl=function(){e.then(ql)}}(),Vl||(Dl(),Vl=!0),zl.add(e,t)}var Vl=!1,zl=new Ll;function ql(){for(var e;e=Ol();){try{e.h.call(e.g)}catch(n){Fl(n)}var t=Ml;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Vl=!1}function Bl(e,t){Al.call(this),this.h=e||1,this.g=t||vc,this.j=xc(this.kb,this),this.l=Date.now()}function Hl(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Wl(e,t,n){if("function"===typeof e)n&&(e=xc(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=xc(e.handleEvent,e)}return 2147483647<Number(t)?-1:vc.setTimeout(e,t||0)}function Kl(e){e.g=Wl((function(){e.g=null,e.i&&(e.i=!1,Kl(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Ic(Bl,Al),(fc=Bl.prototype).da=!1,fc.S=null,fc.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Nl(this,"tick"),this.da&&(Hl(this),this.start()))}},fc.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},fc.M=function(){Bl.Z.M.call(this),Hl(this),delete this.g};var Gl=function(e){Ae(n,e);var t=Pe(n);function n(e,r){var i;return Te(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Ee(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Kl(this)}},{key:"M",value:function(){un(Ne(n.prototype),"M",this).call(this),this.g&&(vc.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Ec);function Ql(e){Ec.call(this),this.h=e,this.g={}}Ic(Ql,Ec);var $l=[];function Yl(e,t,n,r){Array.isArray(n)||(n&&($l[0]=n.toString()),n=$l);for(var i=0;i<n.length;i++){var a=kl(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Jl(e){jc(e.g,(function(e,t){this.g.hasOwnProperty(t)&&xl(e)}),e),e.g={}}function Xl(){this.g=!0}function Zl(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Pl(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Ql.prototype.M=function(){Ql.Z.M.call(this),Jl(this)},Ql.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xl.prototype.Aa=function(){this.g=!1},Xl.prototype.info=function(){};var ef={},tf=null;function nf(){return tf=tf||new Al}function rf(e){ul.call(this,ef.Ma,e)}function af(e){var t=nf();Nl(t,new rf(t,e))}function of(e,t){ul.call(this,ef.STAT_EVENT,e),this.stat=t}function uf(e){var t=nf();Nl(t,new of(t,e))}function sf(e,t){ul.call(this,ef.Na,e),this.size=t}function cf(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return vc.setTimeout((function(){e()}),t)}ef.Ma="serverreachability",Ic(rf,ul),ef.STAT_EVENT="statevent",Ic(of,ul),ef.Na="timingevent",Ic(sf,ul);var lf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ff={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function hf(){}function df(e){return e.h||(e.h=e.i())}function pf(){}hf.prototype.h=null;var vf,yf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function mf(){ul.call(this,"d")}function gf(){ul.call(this,"c")}function kf(){}function wf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Ql(this),this.P=_f,e=Qc?125:void 0,this.W=new Bl(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new bf}function bf(){this.i=null,this.g="",this.h=!1}Ic(mf,ul),Ic(gf,ul),Ic(kf,hf),kf.prototype.g=function(){return new XMLHttpRequest},kf.prototype.i=function(){return{}},vf=new kf;var _f=45e3,xf={},Tf={};function If(e,t,n){e.K=1,e.v=Qf(qf(t)),e.s=n,e.U=!0,Ef(e,null)}function Ef(e,t){e.F=Date.now(),Nf(e),e.A=qf(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),uh(n.h,"t",r),e.C=0,n=e.l.H,e.h=new bf,e.g=cd(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Gl(xc(e.Ia,e,e.g),e.O)),Yl(e.V,e.g,"readystatechange",e.gb),t=e.H?Vc(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),af(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Sf(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Cf(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Af(e,n))==Tf){4==t&&(e.o=4,uf(14),i=!1),Zl(e.j,e.m,null,"[Incomplete Response]");break}if(r==xf){e.o=4,uf(15),Zl(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Zl(e.j,e.m,r,null),Lf(e,r)}Sf(e)&&r!=Tf&&r!=xf&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,uf(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),td(t),t.L=!0,uf(11))):(Zl(e.j,e.m,n,"[Invalid Chunked Response]"),Df(e),Of(e))}function Af(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Tf:(n=Number(t.substring(n,r)),isNaN(n)?xf:(r+=1)+n>t.length?Tf:(t=t.substr(r,n),e.C=r+n,t))}function Nf(e){e.Y=Date.now()+e.P,Rf(e,e.P)}function Rf(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=cf(xc(e.eb,e),t)}function Pf(e){e.B&&(vc.clearTimeout(e.B),e.B=null)}function Of(e){0==e.l.G||e.I||id(e.l,e)}function Df(e){Pf(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Hl(e.W),Jl(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Lf(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||vh(n.i,e)))if(n.I=e.N,!e.J&&vh(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;rd(n),Kh(n)}ed(n),uf(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=cf(xc(n.ab,n),6e3));if(1>=ph(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else od(n,11)}else if((e.J||n.g==e)&&rd(n),!Pc(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(Lc(l,"spdy")||Lc(l,"quic")||Lc(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(yh(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Gf(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=sd(r,r.H?r.la:null,r.W),d.J){mh(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Pf(p),Nf(p)),r.g=d}else Zh(r);0<n.l.length&&$h(n)}else"stop"!=a[0]&&"close"!=a[0]||od(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?od(n,7):Wh(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}af(4)}catch(a){}}function Mf(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(mc(e)||"string"===typeof e)Ac(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(mc(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(mc(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Uf(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Uf)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Ff(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];jf(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)jf(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function jf(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(fc=wf.prototype).setTimeout=function(e){this.P=e},fc.gb=function(e){e=e.target;var t=this.L;t&&3==Vh(e)?t.l():this.Ia(e)},fc.Ia=function(e){try{if(e==this.g)e:{var t=Vh(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Qc||this.g&&(this.h.h||this.g.ga()||zh(this.g)))){this.I||4!=t||7==n||af(8==n||0>=r?3:2),Pf(this);var i=this.g.ba();this.N=i;t:if(Sf(this)){var a=zh(this.g);e="";var o=a.length,u=4==Vh(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Df(this),Of(this);var s="";break t}this.h.i=new vc.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pc(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,uf(12),Df(this),Of(this);break e}Zl(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Lf(this,i)}this.U?(Cf(this,t,s),Qc&&this.i&&3==t&&(Yl(this.V,this.W,"tick",this.fb),this.W.start())):(Zl(this.j,this.m,s,null),Lf(this,s)),4==t&&Df(this),this.i&&!this.I&&(4==t?id(this.l,this):(this.i=!1,Nf(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,uf(12)):(this.o=0,uf(13)),Df(this),Of(this)}}}catch(t){}},fc.fb=function(){if(this.g){var e=Vh(this.g),t=this.g.ga();this.C<t.length&&(Pf(this),Cf(this,e,t),this.i&&4!=e&&Nf(this))}},fc.cancel=function(){this.I=!0,Df(this)},fc.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(af(3),uf(17)),Df(this),this.o=2,Of(this)):Rf(this,this.Y-e)},(fc=Uf.prototype).R=function(){Ff(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},fc.T=function(){return Ff(this),this.g.concat()},fc.get=function(e,t){return jf(this.h,e)?this.h[e]:t},fc.set=function(e,t){jf(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},fc.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Vf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function zf(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof zf){this.g=void 0!==t?t:e.g,Bf(this,e.j),this.s=e.s,Hf(this,e.i),Wf(this,e.m),this.l=e.l,t=e.h;var n=new rh;n.i=t.i,t.g&&(n.g=new Uf(t.g),n.h=t.h),Kf(this,n),this.o=e.o}else e&&(n=String(e).match(Vf))?(this.g=!!t,Bf(this,n[1]||"",!0),this.s=$f(n[2]||""),Hf(this,n[3]||"",!0),Wf(this,n[4]),this.l=$f(n[5]||"",!0),Kf(this,n[6]||"",!0),this.o=$f(n[7]||"")):(this.g=!!t,this.h=new rh(null,this.g))}function qf(e){return new zf(e)}function Bf(e,t,n){e.j=n?$f(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Hf(e,t,n){e.i=n?$f(t,!0):t}function Wf(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Kf(e,t,n){t instanceof rh?(e.h=t,function(e,t){t&&!e.j&&(ih(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(ah(this,t),uh(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Yf(t,th)),e.h=new rh(t,e.g))}function Gf(e,t,n){e.h.set(t,n)}function Qf(e){return Gf(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function $f(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Yf(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Jf),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Jf(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}zf.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Yf(t,Xf,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Yf(t,Xf,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Yf(n,"/"==n.charAt(0)?eh:Zf,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Yf(n,nh)),e.join("")};var Xf=/[#\/\?@]/g,Zf=/[#\?:]/g,eh=/[#\?]/g,th=/[#\?@]/g,nh=/#/g;function rh(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ih(e){e.g||(e.g=new Uf,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function ah(e,t){ih(e),t=sh(e,t),jf(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,jf((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Ff(e)))}function oh(e,t){return ih(e),t=sh(e,t),jf(e.g.h,t)}function uh(e,t,n){ah(e,t),0<n.length&&(e.i=null,e.g.set(sh(e,t),Rc(n)),e.h+=n.length)}function sh(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(fc=rh.prototype).add=function(e,t){ih(this),this.i=null,e=sh(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},fc.forEach=function(e,t){ih(this),this.g.forEach((function(n,r){Ac(n,(function(n){e.call(t,n,r,this)}),this)}),this)},fc.T=function(){ih(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},fc.R=function(e){ih(this);var t=[];if("string"===typeof e)oh(this,e)&&(t=Nc(t,this.g.get(sh(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Nc(t,e[n])}return t},fc.set=function(e,t){return ih(this),this.i=null,oh(this,e=sh(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},fc.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},fc.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var ch=Ee((function e(t,n){Te(this,e),this.h=t,this.g=n}));function lh(e){this.l=e||hh,vc.PerformanceNavigationTiming?e=0<(e=vc.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(vc.g&&vc.g.Ea&&vc.g.Ea()&&vc.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var fh,hh=10;function dh(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ph(e){return e.h?1:e.g?e.g.size:0}function vh(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function yh(e,t){e.g?e.g.add(t):e.h=t}function mh(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function gh(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Se(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Rc(e.i)}function kh(){}function wh(){this.g=new kh}function bh(e,t,n){var r=n||"";try{Mf(e,(function(e,n){var i=e;gc(e)&&(i=Pl(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function _h(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function xh(e){this.l=e.$b||null,this.j=e.ib||!1}function Th(e,t){Al.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Ih,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}lh.prototype.cancel=function(){if(this.i=gh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Se(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},kh.prototype.stringify=function(e){return vc.JSON.stringify(e,void 0)},kh.prototype.parse=function(e){return vc.JSON.parse(e,void 0)},Ic(xh,hf),xh.prototype.g=function(){return new Th(this.l,this.j)},xh.prototype.i=(fh={},function(){return fh}),Ic(Th,Al);var Ih=0;function Eh(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Sh(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ch(e)}function Ch(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(fc=Th.prototype).open=function(e,t){if(this.readyState!=Ih)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ch(this)},fc.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||vc).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},fc.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Sh(this)),this.readyState=Ih},fc.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ch(this)),this.g&&(this.readyState=3,Ch(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof vc.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Eh(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},fc.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Sh(this):Ch(this),3==this.readyState&&Eh(this)}},fc.Ua=function(e){this.g&&(this.response=this.responseText=e,Sh(this))},fc.Ta=function(e){this.g&&(this.response=e,Sh(this))},fc.ha=function(){this.g&&Sh(this)},fc.setRequestHeader=function(e,t){this.v.append(e,t)},fc.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},fc.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Th.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ah=vc.JSON.parse;function Nh(e){Al.call(this),this.headers=new Uf,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Rh,this.K=this.L=!1}Ic(Nh,Al);var Rh="",Ph=/^https?$/i,Oh=["POST","PUT"];function Dh(e){return"content-type"==e.toLowerCase()}function Lh(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Mh(e),Fh(e)}function Mh(e){e.D||(e.D=!0,Nl(e,"complete"),Nl(e,"error"))}function Uh(e){if(e.h&&"undefined"!=typeof pc&&(!e.C[1]||4!=Vh(e)||2!=e.ba()))if(e.v&&4==Vh(e))Wl(e.Fa,0,e);else if(Nl(e,"readystatechange"),4==Vh(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Vf)[1]||null;if(!a&&vc.self&&vc.self.location){var o=vc.self.location.protocol;a=o.substr(0,o.length-1)}i=!Ph.test(a?a.toLowerCase():"")}t=i}if(t)Nl(e,"complete"),Nl(e,"success");else{e.m=6;try{var u=2<Vh(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",Mh(e)}}finally{Fh(e)}}}function Fh(e,t){if(e.g){jh(e);var n=e.g,r=e.C[0]?yc:null;e.g=null,e.C=null,t||Nl(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function jh(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(vc.clearTimeout(e.A),e.A=null)}function Vh(e){return e.g?e.g.readyState:0}function zh(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Rh:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function qh(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return jc(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Gf(e,t,n))}function Bh(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Hh(e){this.za=0,this.l=[],this.h=new Xl,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Bh("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Bh("baseRetryDelayMs",5e3,e),this.$a=Bh("retryDelaySeedMs",1e4,e),this.Ya=Bh("forwardChannelMaxRetries",2,e),this.ra=Bh("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new lh(e&&e.concurrentRequestLimit),this.Ca=new wh,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Wh(e){if(Gh(e),3==e.G){var t=e.V++,n=qf(e.F);Gf(n,"SID",e.J),Gf(n,"RID",t),Gf(n,"TYPE","terminate"),Jh(e,n),(t=new wf(e,e.h,t,void 0)).K=2,t.v=Qf(qf(n)),n=!1,vc.navigator&&vc.navigator.sendBeacon&&(n=vc.navigator.sendBeacon(t.v.toString(),"")),!n&&vc.Image&&((new Image).src=t.v,n=!0),n||(t.g=cd(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Nf(t)}ud(e)}function Kh(e){e.g&&(td(e),e.g.cancel(),e.g=null)}function Gh(e){Kh(e),e.u&&(vc.clearTimeout(e.u),e.u=null),rd(e),e.i.cancel(),e.m&&("number"===typeof e.m&&vc.clearTimeout(e.m),e.m=null)}function Qh(e,t){e.l.push(new ch(e.Za++,t)),3==e.G&&$h(e)}function $h(e){dh(e.i)||e.m||(e.m=!0,jl(e.Ha,e),e.C=0)}function Yh(e,t){var n;n=t?t.m:e.V++;var r=qf(e.F);Gf(r,"SID",e.J),Gf(r,"RID",n),Gf(r,"AID",e.U),Jh(e,r),e.o&&e.s&&qh(r,e.o,e.s),n=new wf(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Xh(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),yh(e.i,n),If(n,r,t)}function Jh(e,t){e.j&&Mf({},(function(e,n){Gf(t,n,e)}))}function Xh(e,t,n){n=Math.min(e.l.length,n);var r=e.j?xc(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{bh(l,o,"req"+c+"_")}catch(zd){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Zh(e){e.g||e.u||(e.Y=1,jl(e.Ga,e),e.A=0)}function ed(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=cf(xc(e.Ga,e),ad(e,e.A)),e.A++,!0)}function td(e){null!=e.B&&(vc.clearTimeout(e.B),e.B=null)}function nd(e){e.g=new wf(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=qf(e.oa);Gf(t,"RID","rpc"),Gf(t,"SID",e.J),Gf(t,"CI",e.N?"0":"1"),Gf(t,"AID",e.U),Jh(e,t),Gf(t,"TYPE","xmlhttp"),e.o&&e.s&&qh(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Qf(qf(t)),n.s=null,n.U=!0,Ef(n,e)}function rd(e){null!=e.v&&(vc.clearTimeout(e.v),e.v=null)}function id(e,t){var n=null;if(e.g==t){rd(e),td(e),e.g=null;var r=2}else{if(!vh(e.i,t))return;n=t.D,mh(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Nl(r=nf(),new sf(r,n,t,i)),$h(e)}else Zh(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(ph(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=cf(xc(e.Ha,e,t),ad(e,e.C)),e.C++,!0))}(e,t)||2==r&&ed(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:od(e,5);break;case 4:od(e,10);break;case 3:od(e,6);break;default:od(e,2)}}function ad(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function od(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=xc(e.jb,e);n||(n=new zf("//www.google.com/images/cleardot.gif"),vc.location&&"http"==vc.location.protocol||Bf(n,"https"),Qf(n)),function(e,t){var n=new Xl;if(vc.Image){var r=new Image;r.onload=Tc(_h,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Tc(_h,n,r,"TestLoadImage: error",!1,t),r.onabort=Tc(_h,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Tc(_h,n,r,"TestLoadImage: timeout",!1,t),vc.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else uf(2);e.G=0,e.j&&e.j.va(t),ud(e),Gh(e)}function ud(e){e.G=0,e.I=-1,e.j&&(0==gh(e.i).length&&0==e.l.length||(e.i.i.length=0,Rc(e.l),e.l.length=0),e.j.ua())}function sd(e,t,n){var r=function(e){return e instanceof zf?qf(e):new zf(e,void 0)}(n);if(""!=r.i)t&&Hf(r,t+"."+r.i),Wf(r,r.m);else{var i=vc.location;r=function(e,t,n,r){var i=new zf(null,void 0);return e&&Bf(i,e),t&&Hf(i,t),n&&Wf(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&jc(e.aa,(function(e,t){Gf(r,t,e)})),t=e.D,n=e.sa,t&&n&&Gf(r,t,n),Gf(r,"VER",e.ma),Jh(e,r),r}function cd(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Nh(new xh({ib:!0})):new Nh(e.qa)).L=e.H,t}function ld(){}function fd(){if(Kc&&!(10<=Number(al)))throw Error("Environmental error: no available transport.")}function hd(e,t){Al.call(this),this.g=new Hh(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Pc(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Pc(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new vd(this)}function dd(e){mf.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function pd(){gf.call(this),this.status=1}function vd(e){this.g=e}(fc=Nh.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():vf.g(),this.C=this.u?df(this.u):df(vf),this.g.onreadystatechange=xc(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Lh(this,a)}e=n||"";var i=new Uf(this.headers);r&&Mf(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Dh,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=vc.FormData&&e instanceof vc.FormData,!(0<=Cc(Oh,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{jh(this),0<this.B&&((this.K=function(e){return Kc&&rl()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xc(this.pa,this)):this.A=Wl(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Lh(this,a)}},fc.pa=function(){"undefined"!=typeof pc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nl(this,"timeout"),this.abort(8))},fc.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Nl(this,"complete"),Nl(this,"abort"),Fh(this))},fc.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Fh(this,!0)),Nh.Z.M.call(this)},fc.Fa=function(){this.s||(this.F||this.v||this.l?Uh(this):this.cb())},fc.cb=function(){Uh(this)},fc.ba=function(){try{return 2<Vh(this)?this.g.status:-1}catch(fh){return-1}},fc.ga=function(){try{return this.g?this.g.responseText:""}catch(fh){return""}},fc.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ah(t)}},fc.Da=function(){return this.m},fc.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(fc=Hh.prototype).ma=8,fc.G=1,fc.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},fc.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new wf(this,this.h,e,void 0),n=this.s;if(this.P&&(n?qc(n=Vc(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Xh(this,t,r),Gf(i=qf(this.F),"RID",e),Gf(i,"CVER",22),this.D&&Gf(i,"X-HTTP-Session-Id",this.D),Jh(this,i),this.o&&n&&qh(i,this.o,n),yh(this.i,t),this.Ra&&Gf(i,"TYPE","init"),this.ja?(Gf(i,"$req",r),Gf(i,"SID","null"),t.$=!0,If(t,i,null)):If(t,i,r),this.G=2}}else 3==this.G&&(e?Yh(this,e):0==this.l.length||dh(this.i)||Yh(this))},fc.Ga=function(){if(this.u=null,nd(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=cf(xc(this.bb,this),e)}},fc.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,uf(10),Kh(this),nd(this))},fc.ab=function(){null!=this.v&&(this.v=null,Kh(this),ed(this),uf(19))},fc.jb=function(e){e?(this.h.info("Successfully pinged google.com"),uf(2)):(this.h.info("Failed to ping google.com"),uf(1))},(fc=ld.prototype).xa=function(){},fc.wa=function(){},fc.va=function(){},fc.ua=function(){},fc.Oa=function(){},fd.prototype.g=function(e,t){return new hd(e,t)},Ic(hd,Al),hd.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),jl(xc(e.hb,e,t))),uf(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=sd(e,null,e.W),$h(e)},hd.prototype.close=function(){Wh(this.g)},hd.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Qh(this.g,t)}else this.v?((t={}).__data__=Pl(e),Qh(this.g,t)):Qh(this.g,e)},hd.prototype.M=function(){this.g.j=null,delete this.j,Wh(this.g),delete this.g,hd.Z.M.call(this)},Ic(dd,mf),Ic(pd,gf),Ic(vd,ld),vd.prototype.xa=function(){Nl(this.g,"a")},vd.prototype.wa=function(e){Nl(this.g,new dd(e))},vd.prototype.va=function(e){Nl(this.g,new pd(e))},vd.prototype.ua=function(){Nl(this.g,"b")},fd.prototype.createWebChannel=fd.prototype.g,hd.prototype.send=hd.prototype.u,hd.prototype.open=hd.prototype.m,hd.prototype.close=hd.prototype.close,lf.NO_ERROR=0,lf.TIMEOUT=8,lf.HTTP_ERROR=6,ff.COMPLETE="complete",pf.EventType=yf,yf.OPEN="a",yf.CLOSE="b",yf.ERROR="c",yf.MESSAGE="d",Al.prototype.listen=Al.prototype.N,Nh.prototype.listenOnce=Nh.prototype.O,Nh.prototype.getLastError=Nh.prototype.La,Nh.prototype.getLastErrorCode=Nh.prototype.Da,Nh.prototype.getStatus=Nh.prototype.ba,Nh.prototype.getResponseJson=Nh.prototype.Qa,Nh.prototype.getResponseText=Nh.prototype.ga,Nh.prototype.send=Nh.prototype.ea;var yd=dc.createWebChannelTransport=function(){return new fd},md=dc.getStatEventTarget=function(){return nf()},gd=dc.ErrorCode=lf,kd=dc.EventType=ff,wd=dc.Event=ef,bd=dc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},_d=dc.FetchXmlHttpFactory=xh,xd=dc.WebChannel=pf,Td=dc.XhrIo=Nh,Id="@firebase/firestore",Ed=function(){function e(t){Te(this,e),this.uid=t}return Ee(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Ed.UNAUTHENTICATED=new Ed(null),Ed.GOOGLE_CREDENTIALS=new Ed("google-credentials-uid"),Ed.FIRST_PARTY=new Ed("first-party-uid"),Ed.MOCK_USER=new Ed("mock-user");var Sd="9.6.1",Cd=new Tt("@firebase/firestore");function Ad(){return Cd.logLevel}function Nd(e){if(Cd.logLevel<=vt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Od);Cd.debug.apply(Cd,["Firestore (".concat(Sd,"): ").concat(e)].concat(lt(i)))}}function Rd(e){if(Cd.logLevel<=vt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Od);Cd.error.apply(Cd,["Firestore (".concat(Sd,"): ").concat(e)].concat(lt(i)))}}function Pd(e){if(Cd.logLevel<=vt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Od);Cd.warn.apply(Cd,["Firestore (".concat(Sd,"): ").concat(e)].concat(lt(i)))}}function Od(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Dd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Sd,") INTERNAL ASSERTION FAILED: ")+e;throw Rd(t),new Error(t)}function Ld(e,t){e||Dd()}function Md(e,t){return e}var Ud={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Fd=function(e){Ae(n,e);var t=Pe(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,r)).code=e,i.message=r,i.name="FirebaseError",i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Ee(n)}(De(Error)),jd=Ee((function e(){var t=this;Te(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Vd=Ee((function e(t,n){Te(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),zd=function(){function e(){Te(this,e)}return Ee(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ed.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),qd=function(){function e(t){Te(this,e),this.token=t,this.changeListener=null}return Ee(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Bd=function(){function e(t){Te(this,e),this.t=t,this.currentUser=Ed.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Ee(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new jd;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new jd,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Nd("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Nd("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new jd)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Nd("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Ld("string"==typeof n.accessToken),new Vd(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Ld(null===e||"string"==typeof e),new Ed(e)}}]),e}(),Hd=Ee((function e(t,n,r){Te(this,e),this.type="FirstParty",this.user=Ed.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Wd=function(){function e(t,n,r){Te(this,e),this.h=t,this.l=n,this.m=r}return Ee(e,[{key:"getToken",value:function(){return Promise.resolve(new Hd(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ed.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Kd=Ee((function e(t){Te(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Gd=function(){function e(t){Te(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null}return Ee(e,[{key:"start",value:function(e,t){var n=this;this.o=function(n){e.enqueueRetryable((function(){return function(e){return null!=e.error&&Nd("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message)),t(e.token)}(n)}))};var r=function(e){Nd("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return r(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?r(e):Nd("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((function(e){return e?(Ld("string"==typeof e.token),new Kd(e.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Qd=function(){function e(t,n){var r=this;Te(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.p(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return Ee(e,[{key:"p",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function $d(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Qd.I=-1;var Yd=function(){function e(){Te(this,e)}return Ee(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=$d(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Jd(e,t){return e<t?-1:e>t?1:0}function Xd(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Zd(e){return e+"\0"}var ep=function(){function e(t,n){if(Te(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Fd(Ud.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Fd(Ud.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Fd(Ud.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Fd(Ud.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Ee(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Jd(this.nanoseconds,e.nanoseconds):Jd(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),tp=function(){function e(t){Te(this,e),this.timestamp=t}return Ee(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new ep(0,0))}}]),e}();function np(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function rp(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ip(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var ap=function(){function e(t,n,r){Te(this,e),void 0===n?n=0:n>t.length&&Dd(),void 0===r?r=t.length-n:r>t.length-n&&Dd(),this.segments=t,this.offset=n,this.len=r}return Ee(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),op=function(e){Ae(n,e);var t=Pe(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ee(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Fd(Ud.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,lt(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ap),up=/^[_a-zA-Z][_a-zA-Z0-9]*$/,sp=function(e){Ae(n,e);var t=Pe(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ee(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return up.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Fd(Ud.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Fd(Ud.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Fd(Ud.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Fd(Ud.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ap),cp=function(){function e(t){Te(this,e),this.fields=t,t.sort(sp.comparator)}return Ee(e,[{key:"covers",value:function(e){var t,n=Se(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Xd(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var lp=function(){function e(t){Te(this,e),this.binaryString=t}return Ee(e,[{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Jd(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(t){return new e(atob(t))}},{key:"fromUint8Array",value:function(t){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t);return new e(n)}}]),e}();lp.EMPTY_BYTE_STRING=new lp("");var fp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hp(e){if(Ld(!!e),"string"==typeof e){var t=0,n=fp.exec(e);if(Ld(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:dp(e.seconds),nanos:dp(e.nanos)}}function dp(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function pp(e){return"string"==typeof e?lp.fromBase64String(e):lp.fromUint8Array(e)}function vp(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function yp(e){var t=e.mapValue.fields.__previous_value__;return vp(t)?yp(t):t}function mp(e){var t=hp(e.mapValue.fields.__local_write_time__.timestampValue);return new ep(t.seconds,t.nanos)}function gp(e){return null==e}function kp(e){return 0===e&&1/e==-1/0}function wp(e){return"number"==typeof e&&Number.isInteger(e)&&!kp(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var bp=function(){function e(t){Te(this,e),this.path=t}return Ee(e,[{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"isEqual",value:function(e){return null!==e&&0===op.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(op.fromString(t))}},{key:"fromName",value:function(t){return new e(op.fromString(t).popFirst(5))}},{key:"comparator",value:function(e,t){return op.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new op(t.slice()))}}]),e}();function _p(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?vp(e)?4:10:Dd()}function xp(e,t){var n=_p(e);if(n!==_p(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return mp(e).isEqual(mp(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=hp(e.timestampValue),r=hp(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return pp(e.bytesValue).isEqual(pp(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return dp(e.geoPointValue.latitude)===dp(t.geoPointValue.latitude)&&dp(e.geoPointValue.longitude)===dp(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return dp(e.integerValue)===dp(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=dp(e.doubleValue),r=dp(t.doubleValue);return n===r?kp(n)===kp(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Xd(e.arrayValue.values||[],t.arrayValue.values||[],xp);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(np(n)!==np(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!xp(n[i],r[i])))return!1;return!0}(e,t);default:return Dd()}}function Tp(e,t){return void 0!==(e.values||[]).find((function(e){return xp(e,t)}))}function Ip(e,t){var n=_p(e),r=_p(t);if(n!==r)return Jd(n,r);switch(n){case 0:return 0;case 1:return Jd(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=dp(e.integerValue||e.doubleValue),r=dp(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ep(e.timestampValue,t.timestampValue);case 4:return Ep(mp(e),mp(t));case 5:return Jd(e.stringValue,t.stringValue);case 6:return function(e,t){var n=pp(e),r=pp(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Jd(n[i],r[i]);if(0!==a)return a}return Jd(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Jd(dp(e.latitude),dp(t.latitude));return 0!==n?n:Jd(dp(e.longitude),dp(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Ip(n[i],r[i]);if(a)return a}return Jd(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Jd(r[o],a[o]);if(0!==u)return u;var s=Ip(n[r[o]],i[a[o]]);if(0!==s)return s}return Jd(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Dd()}}function Ep(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Jd(e,t);var n=hp(e),r=hp(t),i=Jd(n.seconds,r.seconds);return 0!==i?i:Jd(n.nanos,r.nanos)}function Sp(e){return Cp(e)}function Cp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=hp(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?pp(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,bp.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Se(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Cp(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Se(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Cp(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Dd();var t,n}function Ap(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Np(e){return!!e&&"integerValue"in e}function Rp(e){return!!e&&"arrayValue"in e}function Pp(e){return!!e&&"nullValue"in e}function Op(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Dp(e){return!!e&&"mapValue"in e}function Lp(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return rp(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Lp(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Lp(e.arrayValue.values[r]);return n}return Object.assign({},e)}var Mp=function(){function e(t){Te(this,e),this.value=t}return Ee(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Dp(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lp(t)}},{key:"setAll",value:function(e){var t=this,n=sp.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Lp(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Dp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return xp(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Dp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){rp(t,(function(t,n){return e[t]=n}));var r,i=Se(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Lp(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Up(e){var t=[];return rp(e.fields,(function(e,n){var r=new sp([e]);if(Dp(n)){var i=Up(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Se(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new cp(t)}var Fp=function(){function e(t,n,r,i,a){Te(this,e),this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=a}return Ee(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Mp.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Mp.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"clone",value:function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,tp.min(),Mp.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Mp.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Mp.empty(),2)}}]),e}(),jp=Ee((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Te(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.R=null}));function Vp(e){return new jp(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function zp(e){var t=Md(e);if(null===t.R){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+Sp(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),gp(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=ev(t.startAt)),t.endAt&&(n+="|ub:",n+=ev(t.endAt)),t.R=n}return t.R}function qp(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!nv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!xp(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!iv(e.startAt,t.startAt)&&iv(e.endAt,t.endAt)}function Bp(e){return bp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Hp=function(e){Ae(n,e);var t=Pe(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Ee(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Ip(t,this.value)):null!==t&&_p(this.value)===_p(t)&&this.v(Ip(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Dd()}}},{key:"V",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new Wp(e,t,r):"array-contains"===t?new $p(e,r):"in"===t?new Yp(e,r):"not-in"===t?new Jp(e,r):"array-contains-any"===t?new Xp(e,r):new n(e,t,r)}},{key:"P",value:function(e,t,n){return"in"===t?new Kp(e,n):new Gp(e,n)}}]),n}(function(){return Ee((function e(){Te(this,e)}))}());var Wp=function(e){Ae(n,e);var t=Pe(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this,e,r,i)).key=bp.fromName(i.referenceValue),a}return Ee(n,[{key:"matches",value:function(e){var t=bp.comparator(e.key,this.key);return this.v(t)}}]),n}(Hp),Kp=function(e){Ae(n,e);var t=Pe(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e,"in",r)).keys=Qp("in",r),i}return Ee(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Hp),Gp=function(e){Ae(n,e);var t=Pe(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e,"not-in",r)).keys=Qp("not-in",r),i}return Ee(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Hp);function Qp(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return bp.fromName(e.referenceValue)}))}var $p=function(e){Ae(n,e);var t=Pe(n);function n(e,r){return Te(this,n),t.call(this,e,"array-contains",r)}return Ee(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Rp(t)&&Tp(t.arrayValue,this.value)}}]),n}(Hp),Yp=function(e){Ae(n,e);var t=Pe(n);function n(e,r){return Te(this,n),t.call(this,e,"in",r)}return Ee(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Tp(this.value.arrayValue,t)}}]),n}(Hp),Jp=function(e){Ae(n,e);var t=Pe(n);function n(e,r){return Te(this,n),t.call(this,e,"not-in",r)}return Ee(n,[{key:"matches",value:function(e){if(Tp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Tp(this.value.arrayValue,t)}}]),n}(Hp),Xp=function(e){Ae(n,e);var t=Pe(n);function n(e,r){return Te(this,n),t.call(this,e,"array-contains-any",r)}return Ee(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Rp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Tp(t.value.arrayValue,e)}))}}]),n}(Hp),Zp=Ee((function e(t,n){Te(this,e),this.position=t,this.before=n}));function ev(e){return"".concat(e.before?"b":"a",":").concat(e.position.map((function(e){return Sp(e)})).join(","))}var tv=Ee((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Te(this,e),this.field=t,this.dir=n}));function nv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function rv(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?bp.comparator(bp.fromName(o.referenceValue),n.key):Ip(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function iv(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!xp(e.position[n],t.position[n]))return!1;return!0}var av=Ee((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Te(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.S=null,this.D=null,this.startAt,this.endAt}));function ov(e,t,n,r,i,a,o,u){return new av(e,t,n,r,i,a,o,u)}function uv(e){return new av(e)}function sv(e){return!gp(e.limit)&&"F"===e.limitType}function cv(e){return!gp(e.limit)&&"L"===e.limitType}function lv(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function fv(e){var t,n=Se(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.V())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function hv(e){return null!==e.collectionGroup}function dv(e){var t=Md(e);if(null===t.S){t.S=[];var n=fv(t),r=lv(t);if(null!==n&&null===r)n.isKeyField()||t.S.push(new tv(n)),t.S.push(new tv(sp.keyField(),"asc"));else{var i,a=!1,o=Se(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.S.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.S.push(new tv(sp.keyField(),s))}}}return t.S}function pv(e){var t=Md(e);if(!t.D)if("F"===t.limitType)t.D=Vp(t.path,t.collectionGroup,dv(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Se(dv(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new tv(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Zp(t.endAt.position,!t.endAt.before):null,s=t.startAt?new Zp(t.startAt.position,!t.startAt.before):null;t.D=Vp(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.D}function vv(e,t,n){return new av(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function yv(e,t){return qp(pv(e),pv(t))&&e.limitType===t.limitType}function mv(e){return"".concat(zp(pv(e)),"|lt:").concat(e.limitType)}function gv(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Sp(t.value));var t})).join(", "),"]")),gp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: "+ev(e.startAt)),e.endAt&&(t+=", endAt: "+ev(e.endAt)),"Target(".concat(t,")")}(pv(e)),"; limitType=").concat(e.limitType,")")}function kv(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):bp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Se(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Se(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!rv(e.startAt,dv(e),t))&&(!e.endAt||!rv(e.endAt,dv(e),t))}(e,t)}function wv(e){return function(t,n){var r,i=!1,a=Se(dv(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=bv(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function bv(e,t,n){var r=e.field.isKeyField()?bp.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ip(r,i):Dd()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Dd()}}function _v(e,t){if(e.C){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kp(t)?"-0":t}}function xv(e){return{integerValue:""+e}}function Tv(e,t){return wp(t)?xv(t):_v(e,t)}var Iv=Ee((function e(){Te(this,e),this._=void 0}));function Ev(e,t,n){return e instanceof Av?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Nv?Rv(e,t):e instanceof Pv?Ov(e,t):function(e,t){var n=Cv(e,t),r=Lv(n)+Lv(e.N);return Np(n)&&Np(e.N)?xv(r):_v(e.k,r)}(e,t)}function Sv(e,t,n){return e instanceof Nv?Rv(e,t):e instanceof Pv?Ov(e,t):n}function Cv(e,t){return e instanceof Dv?Np(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Av=function(e){Ae(n,e);var t=Pe(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ee(n)}(Iv),Nv=function(e){Ae(n,e);var t=Pe(n);function n(e){var r;return Te(this,n),(r=t.call(this)).elements=e,r}return Ee(n)}(Iv);function Rv(e,t){var n,r=Mv(t),i=Se(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return xp(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Pv=function(e){Ae(n,e);var t=Pe(n);function n(e){var r;return Te(this,n),(r=t.call(this)).elements=e,r}return Ee(n)}(Iv);function Ov(e,t){var n,r=Mv(t),i=Se(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!xp(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Dv=function(e){Ae(n,e);var t=Pe(n);function n(e,r){var i;return Te(this,n),(i=t.call(this)).k=e,i.N=r,i}return Ee(n)}(Iv);function Lv(e){return dp(e.integerValue||e.doubleValue)}function Mv(e){return Rp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Uv=Ee((function e(t,n){Te(this,e),this.field=t,this.transform=n}));var Fv=Ee((function e(t,n){Te(this,e),this.version=t,this.transformResults=n})),jv=function(){function e(t,n){Te(this,e),this.updateTime=t,this.exists=n}return Ee(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Vv(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var zv=Ee((function e(){Te(this,e)}));function qv(e,t,n){e instanceof Gv?function(e,t,n){var r=e.value.clone(),i=Yv(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Qv?function(e,t,n){if(Vv(e.precondition,t)){var r=Yv(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll($v(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Bv(e,t,n){e instanceof Gv?function(e,t,n){if(Vv(e.precondition,t)){var r=e.value.clone(),i=Jv(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Kv(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Qv?function(e,t,n){if(Vv(e.precondition,t)){var r=Jv(e.fieldTransforms,n,t),i=t.data;i.setAll($v(e)),i.setAll(r),t.convertToFoundDocument(Kv(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Vv(e.precondition,t)&&t.convertToNoDocument(tp.min())}(e,t)}function Hv(e,t){var n,r=null,i=Se(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Cv(a.transform,o||null);null!=u&&(null==r&&(r=Mp.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Wv(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Xd(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Nv&&t instanceof Nv||e instanceof Pv&&t instanceof Pv?Xd(e.elements,t.elements,xp):e instanceof Dv&&t instanceof Dv?xp(e.N,t.N):e instanceof Av&&t instanceof Av}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Kv(e){return e.isFoundDocument()?e.version:tp.min()}var Gv=function(e){Ae(n,e);var t=Pe(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Te(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Ee(n)}(zv),Qv=function(e){Ae(n,e);var t=Pe(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Te(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Ee(n)}(zv);function $v(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Yv(e,t,n){var r=new Map;Ld(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Sv(o,u,n[i]))}return r}function Jv(e,t,n){var r,i=new Map,a=Se(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Ev(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Xv,Zv,ey=function(e){Ae(n,e);var t=Pe(n);function n(e,r){var i;return Te(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Ee(n)}(zv),ty=function(e){Ae(n,e);var t=Pe(n);function n(e,r){var i;return Te(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Ee(n)}(zv),ny=Ee((function e(t){Te(this,e),this.count=t}));function ry(e){switch(e){default:return Dd();case Ud.CANCELLED:case Ud.UNKNOWN:case Ud.DEADLINE_EXCEEDED:case Ud.RESOURCE_EXHAUSTED:case Ud.INTERNAL:case Ud.UNAVAILABLE:case Ud.UNAUTHENTICATED:return!1;case Ud.INVALID_ARGUMENT:case Ud.NOT_FOUND:case Ud.ALREADY_EXISTS:case Ud.PERMISSION_DENIED:case Ud.FAILED_PRECONDITION:case Ud.ABORTED:case Ud.OUT_OF_RANGE:case Ud.UNIMPLEMENTED:case Ud.DATA_LOSS:return!0}}function iy(e){if(void 0===e)return Rd("GRPC error has no .code"),Ud.UNKNOWN;switch(e){case Xv.OK:return Ud.OK;case Xv.CANCELLED:return Ud.CANCELLED;case Xv.UNKNOWN:return Ud.UNKNOWN;case Xv.DEADLINE_EXCEEDED:return Ud.DEADLINE_EXCEEDED;case Xv.RESOURCE_EXHAUSTED:return Ud.RESOURCE_EXHAUSTED;case Xv.INTERNAL:return Ud.INTERNAL;case Xv.UNAVAILABLE:return Ud.UNAVAILABLE;case Xv.UNAUTHENTICATED:return Ud.UNAUTHENTICATED;case Xv.INVALID_ARGUMENT:return Ud.INVALID_ARGUMENT;case Xv.NOT_FOUND:return Ud.NOT_FOUND;case Xv.ALREADY_EXISTS:return Ud.ALREADY_EXISTS;case Xv.PERMISSION_DENIED:return Ud.PERMISSION_DENIED;case Xv.FAILED_PRECONDITION:return Ud.FAILED_PRECONDITION;case Xv.ABORTED:return Ud.ABORTED;case Xv.OUT_OF_RANGE:return Ud.OUT_OF_RANGE;case Xv.UNIMPLEMENTED:return Ud.UNIMPLEMENTED;case Xv.DATA_LOSS:return Ud.DATA_LOSS;default:return Dd()}}(Zv=Xv||(Xv={}))[Zv.OK=0]="OK",Zv[Zv.CANCELLED=1]="CANCELLED",Zv[Zv.UNKNOWN=2]="UNKNOWN",Zv[Zv.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zv[Zv.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zv[Zv.NOT_FOUND=5]="NOT_FOUND",Zv[Zv.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zv[Zv.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zv[Zv.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zv[Zv.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zv[Zv.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zv[Zv.ABORTED=10]="ABORTED",Zv[Zv.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zv[Zv.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zv[Zv.INTERNAL=13]="INTERNAL",Zv[Zv.UNAVAILABLE=14]="UNAVAILABLE",Zv[Zv.DATA_LOSS=15]="DATA_LOSS";var ay=function(){function e(t,n){Te(this,e),this.comparator=t,this.root=n||uy.EMPTY}return Ee(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,uy.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,uy.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new oy(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new oy(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new oy(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new oy(this.root,e,this.comparator,!0)}}]),e}(),oy=function(){function e(t,n,r,i){Te(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Ee(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),uy=function(){function e(t,n,r,i,a){Te(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Ee(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Dd();if(this.right.isRed())throw Dd();var e=this.left.check();if(e!==this.right.check())throw Dd();return e+(this.isRed()?0:1)}}]),e}();uy.EMPTY=null,uy.RED=!0,uy.BLACK=!1,uy.EMPTY=new(function(){function e(){Te(this,e),this.size=0}return Ee(e,[{key:"key",get:function(){throw Dd()}},{key:"value",get:function(){throw Dd()}},{key:"color",get:function(){throw Dd()}},{key:"left",get:function(){throw Dd()}},{key:"right",get:function(){throw Dd()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new uy(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var sy=function(){function e(t){Te(this,e),this.comparator=t,this.data=new ay(this.comparator)}return Ee(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new cy(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new cy(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),cy=function(){function e(t){Te(this,e),this.iter=t}return Ee(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}(),ly=new ay(bp.comparator);function fy(){return ly}var hy=new ay(bp.comparator);function dy(){return hy}var py=new ay(bp.comparator);function vy(){return py}var yy=new sy(bp.comparator);function my(){for(var e=yy,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var gy=new sy(Jd);function ky(){return gy}var wy=function(){function e(t,n,r,i,a){Te(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Ee(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,by.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(tp.min(),r,ky(),fy(),my())}}]),e}(),by=function(){function e(t,n,r,i,a){Te(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Ee(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(lp.EMPTY_BYTE_STRING,n,my(),my(),my())}}]),e}(),_y=Ee((function e(t,n,r,i){Te(this,e),this.$=t,this.removedTargetIds=n,this.key=r,this.F=i})),xy=Ee((function e(t,n){Te(this,e),this.targetId=t,this.O=n})),Ty=Ee((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lp.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Te(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Iy=function(){function e(){Te(this,e),this.M=0,this.L=Cy(),this.B=lp.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}return Ee(e,[{key:"current",get:function(){return this.U}},{key:"resumeToken",get:function(){return this.B}},{key:"K",get:function(){return 0!==this.M}},{key:"j",get:function(){return this.q}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}},{key:"G",value:function(){var e=my(),t=my(),n=my();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Dd()}})),new by(this.B,this.U,e,t,n)}},{key:"H",value:function(){this.q=!1,this.L=Cy()}},{key:"J",value:function(e,t){this.q=!0,this.L=this.L.insert(e,t)}},{key:"Y",value:function(e){this.q=!0,this.L=this.L.remove(e)}},{key:"X",value:function(){this.M+=1}},{key:"Z",value:function(){this.M-=1}},{key:"tt",value:function(){this.q=!0,this.U=!0}}]),e}(),Ey=function(){function e(t){Te(this,e),this.et=t,this.nt=new Map,this.st=fy(),this.it=Sy(),this.rt=new sy(Jd)}return Ee(e,[{key:"ot",value:function(e){var t,n=Se(e.$);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=Se(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ut",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ht(n);switch(e.state){case 0:t.lt(n)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||t.removeTarget(n);break;case 3:t.lt(n)&&(r.tt(),r.W(e.resumeToken));break;case 4:t.lt(n)&&(t.ft(n),r.W(e.resumeToken));break;default:Dd()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((function(e,r){n.lt(r)&&t(r)}))}},{key:"dt",value:function(e){var t=e.targetId,n=e.O.count,r=this.wt(t);if(r){var i=r.target;if(Bp(i))if(0===n){var a=new bp(i.path);this.ct(t,a,Fp.newNoDocument(a,tp.min()))}else Ld(1===n);else this._t(t)!==n&&(this.ft(t),this.rt=this.rt.add(t))}}},{key:"gt",value:function(e){var t=this,n=new Map;this.nt.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Bp(a.target)){var o=new bp(a.target.path);null!==t.st.get(o)||t.yt(i,o)||t.ct(i,o,Fp.newNoDocument(o,e))}r.j&&(n.set(i,r.G()),r.H())}}));var r=my();this.it.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new wy(e,n,this.rt,this.st,r);return this.st=fy(),this.it=Sy(),this.rt=new sy(Jd),i}},{key:"at",value:function(e,t){if(this.lt(e)){var n=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,n),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.lt(e)){var r=this.ht(e);this.yt(e,t)?r.J(t,1):r.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),n&&(this.st=this.st.insert(t,n))}}},{key:"removeTarget",value:function(e){this.nt.delete(e)}},{key:"_t",value:function(e){var t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"X",value:function(e){this.ht(e).X()}},{key:"ht",value:function(e){var t=this.nt.get(e);return t||(t=new Iy,this.nt.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.it.get(e);return t||(t=new sy(Jd),this.it=this.it.insert(e,t)),t}},{key:"lt",value:function(e){var t=null!==this.wt(e);return t||Nd("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}},{key:"ft",value:function(e){var t=this;this.nt.set(e,new Iy),this.et.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"yt",value:function(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}]),e}();function Sy(){return new ay(bp.comparator)}function Cy(){return new ay(bp.comparator)}var Ay={asc:"ASCENDING",desc:"DESCENDING"},Ny={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ry=Ee((function e(t,n){Te(this,e),this.databaseId=t,this.C=n}));function Py(e,t){return e.C?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Oy(e,t){return e.C?t.toBase64():t.toUint8Array()}function Dy(e,t){return Py(e,t.toTimestamp())}function Ly(e){return Ld(!!e),tp.fromTimestamp(function(e){var t=hp(e);return new ep(t.seconds,t.nanos)}(e))}function My(e,t){return function(e){return new op(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Uy(e){var t=op.fromString(e);return Ld(sm(t)),t}function Fy(e,t){return My(e.databaseId,t.path)}function jy(e,t){var n=Uy(t);if(n.get(1)!==e.databaseId.projectId)throw new Fd(Ud.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Fd(Ud.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new bp(By(n))}function Vy(e,t){return My(e.databaseId,t)}function zy(e){var t=Uy(e);return 4===t.length?op.emptyPath():By(t)}function qy(e){return new op(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function By(e){return Ld(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Hy(e,t,n){return{name:Fy(e,t),fields:n.value.mapValue.fields}}function Wy(e,t,n){var r=jy(e,t.name),i=Ly(t.updateTime),a=new Mp({mapValue:{fields:t.fields}}),o=Fp.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Ky(e,t){return"found"in t?function(e,t){Ld(!!t.found),t.found.name,t.found.updateTime;var n=jy(e,t.found.name),r=Ly(t.found.updateTime),i=new Mp({mapValue:{fields:t.found.fields}});return Fp.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Ld(!!t.missing),Ld(!!t.readTime);var n=jy(e,t.missing),r=Ly(t.readTime);return Fp.newNoDocument(n,r)}(e,t):Dd()}function Gy(e,t){var n;if(t instanceof Gv)n={update:Hy(e,t.key,t.value)};else if(t instanceof ey)n={delete:Fy(e,t.key)};else if(t instanceof Qv)n={update:Hy(e,t.key,t.data),updateMask:um(t.fieldMask)};else{if(!(t instanceof ty))return Dd();n={verify:Fy(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Av)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Nv)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Pv)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Dv)return{fieldPath:t.field.canonicalString(),increment:n.N};throw Dd()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Dy(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Dd()}(e,t.precondition)),n}function Qy(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?jv.updateTime(Ly(e.updateTime)):void 0!==e.exists?jv.exists(e.exists):jv.none()}(t.currentDocument):jv.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Ld("REQUEST_TIME"===t.setToServerValue),n=new Av;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Nv(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Pv(i)}else"increment"in t?n=new Dv(e,t.increment):Dd();var a=sp.fromServerFormat(t.fieldPath);return new Uv(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=jy(e,t.update.name),a=new Mp({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new cp(t.map((function(e){return sp.fromServerFormat(e)})))}(t.updateMask);return new Qv(i,a,o,n,r)}return new Gv(i,a,n,r)}if(t.delete){var u=jy(e,t.delete);return new ey(u,n)}if(t.verify){var s=jy(e,t.verify);return new ty(s,n)}return Dd()}function $y(e,t){return{documents:[Vy(e,t.path)]}}function Yy(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Vy(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Vy(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Op(e.value))return{unaryFilter:{field:rm(e.field),op:"IS_NAN"}};if(Pp(e.value))return{unaryFilter:{field:rm(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Op(e.value))return{unaryFilter:{field:rm(e.field),op:"IS_NOT_NAN"}};if(Pp(e.value))return{unaryFilter:{field:rm(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rm(e.field),op:nm(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:rm(e.field),direction:tm(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=function(e,t){return e.C||gp(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=Zy(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Zy(t.endAt)),n}function Jy(e){var t=zy(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ld(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Xy(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new tv(im(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return gp(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=em(n.startAt));var l=null;return n.endAt&&(l=em(n.endAt)),ov(t,i,u,o,s,"F",c,l)}function Xy(e){return e?void 0!==e.unaryFilter?[om(e)]:void 0!==e.fieldFilter?[am(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Xy(e)})).reduce((function(e,t){return e.concat(t)})):Dd():[]}function Zy(e){return{before:e.before,values:e.position}}function em(e){var t=!!e.before,n=e.values||[];return new Zp(n,t)}function tm(e){return Ay[e]}function nm(e){return Ny[e]}function rm(e){return{fieldPath:e.canonicalString()}}function im(e){return sp.fromServerFormat(e.fieldPath)}function am(e){return Hp.create(im(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Dd()}}(e.fieldFilter.op),e.fieldFilter.value)}function om(e){switch(e.unaryFilter.op){case"IS_NAN":var t=im(e.unaryFilter.field);return Hp.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=im(e.unaryFilter.field);return Hp.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=im(e.unaryFilter.field);return Hp.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=im(e.unaryFilter.field);return Hp.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Dd()}}function um(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function sm(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function cm(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=fm(t)),t=lm(e.get(n),t);return fm(t)}function lm(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function fm(e){return e+"\x01\x01"}function hm(e){var t=e.length;if(Ld(t>=2),2===t)return Ld("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),op.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Dd(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Dd()}a=o+2}return new op(r)}var dm=Ee((function e(t,n){Te(this,e),this.seconds=t,this.nanoseconds=n})),pm=Ee((function e(t,n,r){Te(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r}));pm.store="owner",pm.key="owner";var vm=Ee((function e(t,n,r){Te(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r}));vm.store="mutationQueues",vm.keyPath="userId";var ym=Ee((function e(t,n,r,i,a){Te(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}));ym.store="mutations",ym.keyPath="batchId",ym.userMutationsIndex="userMutationsIndex",ym.userMutationsKeyPath=["userId","batchId"];var mm=function(){function e(){Te(this,e)}return Ee(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,cm(t)]}},{key:"key",value:function(e,t,n){return[e,cm(t),n]}}]),e}();mm.store="documentMutations",mm.PLACEHOLDER=new mm;var gm=Ee((function e(t,n){Te(this,e),this.path=t,this.readTime=n})),km=Ee((function e(t,n){Te(this,e),this.path=t,this.version=n})),wm=Ee((function e(t,n,r,i,a,o){Te(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=o}));wm.store="remoteDocuments",wm.readTimeIndex="readTimeIndex",wm.readTimeIndexPath="readTime",wm.collectionReadTimeIndex="collectionReadTimeIndex",wm.collectionReadTimeIndexPath=["parentPath","readTime"];var bm=Ee((function e(t){Te(this,e),this.byteSize=t}));bm.store="remoteDocumentGlobal",bm.key="remoteDocumentGlobalKey";var _m=Ee((function e(t,n,r,i,a,o,u){Te(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=o,this.query=u}));_m.store="targets",_m.keyPath="targetId",_m.queryTargetsIndexName="queryTargetsIndex",_m.queryTargetsKeyPath=["canonicalId","targetId"];var xm=Ee((function e(t,n,r){Te(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r}));xm.store="targetDocuments",xm.keyPath=["targetId","path"],xm.documentTargetsIndex="documentTargetsIndex",xm.documentTargetsKeyPath=["path","targetId"];var Tm=Ee((function e(t,n,r,i){Te(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i}));Tm.key="targetGlobalKey",Tm.store="targetGlobal";var Im=Ee((function e(t,n){Te(this,e),this.collectionId=t,this.parent=n}));Im.store="collectionParents",Im.keyPath=["collectionId","parent"];var Em=Ee((function e(t,n,r,i){Te(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i}));Em.store="clientMetadata",Em.keyPath="clientId";var Sm=Ee((function e(t,n,r){Te(this,e),this.bundleId=t,this.createTime=n,this.version=r}));Sm.store="bundles",Sm.keyPath="bundleId";var Cm=Ee((function e(t,n,r){Te(this,e),this.name=t,this.readTime=n,this.bundledQuery=r}));Cm.store="namedQueries",Cm.keyPath="name";var Am=[vm.store,ym.store,mm.store,wm.store,_m.store,pm.store,Tm.store,xm.store].concat([Em.store]).concat([bm.store]).concat([Im.store]).concat([Sm.store,Cm.store]),Nm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Rm=function(){function e(){Te(this,e),this.onCommittedListeners=[]}return Ee(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Pm=function(){function e(t){var n=this;Te(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Ee(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Dd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Se(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Om=function(){function e(t,n){var r=this;Te(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.It=new jd,this.transaction.oncomplete=function(){r.It.resolve()},this.transaction.onabort=function(){n.error?r.It.reject(new Mm(t,n.error)):r.It.resolve()},this.transaction.onerror=function(e){var n=zm(e.target.error);r.It.reject(new Mm(t,n))}}return Ee(e,[{key:"At",get:function(){return this.It.promise}},{key:"abort",value:function(e){e&&this.It.reject(e),this.aborted||(Nd("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Fm(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Mm(n,t)}}}]),e}(),Dm=function(){function e(t,n,r){Te(this,e),this.name=t,this.version=n,this.Rt=r,12.2===e.Pt(Be())&&Rd("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Ee(e,[{key:"Ct",value:function(){var e=be(ke().mark((function e(t){var n=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Nd("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Mm(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Fd(Ud.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Fd(Ud.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Mm(t,n))},i.onupgradeneeded=function(e){Nd("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Rt.Nt(t,i.transaction,e.oldVersion,n.version).next((function(){Nd("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.kt&&(this.db.onversionchange=function(e){return n.kt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"xt",value:function(e){this.kt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=be(ke().mark((function e(t,n,r,i){var a,o,u,s,c=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=ke().mark((function e(){var n,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.Ct(t);case 4:return c.db=e.sent,n=Om.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).catch((function(e){return n.abort(e),Pm.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.At;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s="FirebaseError"!==e.t1.name&&o<3,Nd("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),c.close(),s){e.next=18;break}return e.abrupt("return",{v:Promise.reject(e.t1)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Nd("SimpleDb","Removing database:",e),jm(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"bt",value:function(){if(!$e())return!1;if(e.vt())return!0;var t=Be(),n=e.Pt(t),r=0<n&&n<10,i=e.Vt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"vt",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/github.io/nwitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyC_tu8LNFnMoVw-0OaOmopurLCy9YOa7wY",REACT_APP_APP_ID:"1:931248421559:web:0a359dceffdf0d71f3eb32",REACT_APP_AUTH_DOMAIN:"nwitter-f3e1d.firebaseapp.com",REACT_APP_DATABASE_URL:"https://nwitter-f3e1d-default-rtdb.firebaseio.com",REACT_APP_MESSAGIN_ID:"",REACT_APP_PROJECT_ID:"nwitter-f3e1d",REACT_APP_STORAGE_BUCKET:"nwitter-f3e1d.appspot.com"})||void 0===e?void 0:e.St)}},{key:"Dt",value:function(e,t){return e.store(t)}},{key:"Pt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Vt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Lm=function(){function e(t){Te(this,e),this.$t=t,this.Ft=!1,this.Ot=null}return Ee(e,[{key:"isDone",get:function(){return this.Ft}},{key:"Mt",get:function(){return this.Ot}},{key:"cursor",set:function(e){this.$t=e}},{key:"done",value:function(){this.Ft=!0}},{key:"Lt",value:function(e){this.Ot=e}},{key:"delete",value:function(){return jm(this.$t.delete())}}]),e}(),Mm=function(e){Ae(n,e);var t=Pe(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,Ud.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Ee(n)}(Fd);function Um(e){return"IndexedDbTransactionError"===e.name}var Fm=function(){function e(t){Te(this,e),this.store=t}return Ee(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Nd("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Nd("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),jm(n)}},{key:"add",value:function(e){return Nd("SimpleDb","ADD",this.store.name,e,e),jm(this.store.add(e))}},{key:"get",value:function(e){var t=this;return jm(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Nd("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Nd("SimpleDb","DELETE",this.store.name,e),jm(this.store.delete(e))}},{key:"count",value:function(){return Nd("SimpleDb","COUNT",this.store.name),jm(this.store.count())}},{key:"Bt",value:function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.Ut(n,(function(e,t){r.push(t)})).next((function(){return r}))}},{key:"qt",value:function(e,t){Nd("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Kt=!1;var r=this.cursor(n);return this.Ut(r,(function(e,t,n){return n.delete()}))}},{key:"jt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Ut(r,t)}},{key:"Qt",value:function(e){var t=this.cursor({});return new Pm((function(n,r){t.onerror=function(e){var t=zm(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Ut",value:function(e,t){var n=[];return new Pm((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Lm(i),o=t(i.primaryKey,i.value,a);if(o instanceof Pm){var u=o.catch((function(e){return a.done(),Pm.reject(e)}));n.push(u)}a.isDone?r():null===a.Mt?i.continue():i.continue(a.Mt)}else r()}})).next((function(){return Pm.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function jm(e){return new Pm((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=zm(e.target.error);n(t)}}))}var Vm=!1;function zm(e){var t=Dm.Pt(Be());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Fd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Vm||(Vm=!0,setTimeout((function(){throw r}),0)),r}}return e}var qm=function(e){Ae(n,e);var t=Pe(n);function n(e,r){var i;return Te(this,n),(i=t.call(this)).Wt=e,i.currentSequenceNumber=r,i}return Ee(n)}(Rm);function Bm(e,t){var n=Md(e);return Dm.Dt(n.Wt,t)}var Hm=function(){function e(t,n,r,i){Te(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Ee(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&qv(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=Se(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Bv(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=Se(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Bv(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(tp.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),my())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Xd(this.mutations,e.mutations,(function(e,t){return Wv(e,t)}))&&Xd(this.baseMutations,e.baseMutations,(function(e,t){return Wv(e,t)}))}}]),e}(),Wm=function(){function e(t,n,r,i){Te(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Ee(e,null,[{key:"from",value:function(t,n,r){Ld(t.mutations.length===r.length);for(var i=vy(),a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Km=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:tp.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:tp.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:lp.EMPTY_BYTE_STRING;Te(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Ee(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Gm=Ee((function e(t){Te(this,e),this.Gt=t}));function Qm(e,t){if(t.document)return Wy(e.Gt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=bp.fromSegments(t.noDocument.path),r=Zm(t.noDocument.readTime),i=Fp.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var a=bp.fromSegments(t.unknownDocument.path),o=Zm(t.unknownDocument.version);return Fp.newUnknownDocument(a,o)}return Dd()}function $m(e,t,n){var r=Ym(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var a=function(e,t){return{name:Fy(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Py(e,t.version.toTimestamp())}}(e.Gt,t),o=t.hasCommittedMutations;return new wm(null,null,a,o,r,i)}if(t.isNoDocument()){var u=t.key.path.toArray(),s=Xm(t.version),c=t.hasCommittedMutations;return new wm(null,new gm(u,s),null,c,r,i)}if(t.isUnknownDocument()){var l=t.key.path.toArray(),f=Xm(t.version);return new wm(new km(l,f),null,null,!0,r,i)}return Dd()}function Ym(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Jm(e){var t=new ep(e[0],e[1]);return tp.fromTimestamp(t)}function Xm(e){var t=e.toTimestamp();return new dm(t.seconds,t.nanoseconds)}function Zm(e){var t=new ep(e.seconds,e.nanoseconds);return tp.fromTimestamp(t)}function eg(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Qy(e.Gt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Qy(e.Gt,t)})),u=ep.fromMillis(t.localWriteTimeMs);return new Hm(t.batchId,u,n,o)}function tg(e){var t,n,r=Zm(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Zm(e.lastLimboFreeSnapshotVersion):tp.min();return void 0!==e.query.documents?(Ld(1===(n=e.query).documents.length),t=pv(uv(zy(n.documents[0])))):t=function(e){return pv(Jy(e))}(e.query),new Km(t,e.targetId,0,e.lastListenSequenceNumber,r,i,lp.fromBase64String(e.resumeToken))}function ng(e,t){var n,r=Xm(t.snapshotVersion),i=Xm(t.lastLimboFreeSnapshotVersion);n=Bp(t.target)?$y(e.Gt,t.target):Yy(e.Gt,t.target);var a=t.resumeToken.toBase64();return new _m(t.targetId,zp(t.target),r,a,t.sequenceNumber,i,n)}function rg(e){var t=Jy({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?vv(t,t.limit,"L"):t}var ig=function(){function e(){Te(this,e)}return Ee(e,[{key:"getBundleMetadata",value:function(e,t){return ag(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Zm(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return ag(e).put({bundleId:(n=t).id,createTime:Xm(Ly(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return og(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:rg(t.bundledQuery),readTime:Zm(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return og(e).put(function(e){return{name:e.name,readTime:Xm(Ly(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function ag(e){return Bm(e,Sm.store)}function og(e){return Bm(e,Cm.store)}var ug=function(){function e(){Te(this,e),this.zt=new sg}return Ee(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.zt.add(t),Pm.resolve()}},{key:"getCollectionParents",value:function(e,t){return Pm.resolve(this.zt.getEntries(t))}}]),e}(),sg=function(){function e(){Te(this,e),this.index={}}return Ee(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new sy(op.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new sy(op.comparator)).toArray()}}]),e}(),cg=function(){function e(){Te(this,e),this.Ht=new sg}return Ee(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ht.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ht.add(t)}));var a={collectionId:r,parent:cm(i)};return lg(e).put(a)}return Pm.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Zd(t),""],!1,!0);return lg(e).Bt(r).next((function(e){var r,i=Se(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(hm(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}}]),e}();function lg(e){return Bm(e,Im.store)}var fg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hg=function(){function e(t,n,r){Te(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Ee(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function dg(e,t,n){var r=e.store(ym.store),i=e.store(mm.store),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.jt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Ld(1===u)})));var c,l=[],f=Se(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=mm.key(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Pm.waitFor(a).next((function(){return l}))}function pg(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Dd();t=e.noDocument}return JSON.stringify(t).length}hg.DEFAULT_COLLECTION_PERCENTILE=10,hg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hg.DEFAULT=new hg(41943040,hg.DEFAULT_COLLECTION_PERCENTILE,hg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hg.DISABLED=new hg(-1,0,0);var vg=function(){function e(t,n,r,i){Te(this,e),this.userId=t,this.k=n,this.Jt=r,this.referenceDelegate=i,this.Yt={}}return Ee(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return mg(e).jt({index:ym.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=gg(e),o=mg(e);return o.add({}).next((function(u){Ld("number"==typeof u);var s,c=new Hm(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Gy(e.Gt,t)})),i=n.mutations.map((function(t){return Gy(e.Gt,t)}));return new ym(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.k,i.userId,c),f=[],h=new sy((function(e,t){return Jd(e.canonicalString(),t.canonicalString())})),d=Se(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=mm.key(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,mm.PLACEHOLDER))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.Jt.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Yt[u]=c.keys()})),Pm.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return mg(e).get(t).next((function(e){return e?(Ld(e.userId===n.userId),eg(n.k,e)):null}))}},{key:"Zt",value:function(e,t){var n=this;return this.Yt[t]?Pm.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Yt[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return mg(e).jt({index:ym.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(Ld(t.batchId>=r),a=eg(n.k,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return mg(e).jt({index:ym.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return mg(e).Bt(ym.userMutationsIndex,n).next((function(e){return e.map((function(e){return eg(t.k,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=mm.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return gg(e).jt({range:i},(function(r,i,o){var u=s(r,3),c=u[0],l=u[1],f=u[2],h=hm(l);if(c===n.userId&&t.path.isEqual(h))return mg(e).get(f).next((function(e){if(!e)throw Dd();Ld(e.userId===n.userId),a.push(eg(n.k,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new sy(Jd),i=[];return t.forEach((function(t){var a=mm.prefixForPath(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=gg(e).jt({range:o},(function(e,i,a){var o=s(e,3),u=o[0],c=o[1],l=o[2],f=hm(c);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),Pm.waitFor(i).next((function(){return n.te(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=mm.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new sy(Jd);return gg(e).jt({range:o},(function(e,t,a){var o=s(e,3),c=o[0],l=o[1],f=o[2],h=hm(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.te(e,u)}))}},{key:"te",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(mg(e).get(t).next((function(e){if(null===e)throw Dd();Ld(e.userId===n.userId),r.push(eg(n.k,e))})))})),Pm.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return dg(e.Wt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.ee(t.batchId)})),Pm.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"ee",value:function(e){delete this.Yt[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Pm.resolve();var r=IDBKeyRange.lowerBound(mm.prefixForUser(t.userId)),i=[];return gg(e).jt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=hm(e[1]);i.push(a)}else r.done()})).next((function(){Ld(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return yg(e,this.userId,t)}},{key:"ne",value:function(e){var t=this;return kg(e).get(this.userId).next((function(e){return e||new vm(t.userId,-1,"")}))}}],[{key:"Xt",value:function(t,n,r,i){return Ld(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function yg(e,t,n){var r=mm.prefixForPath(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return gg(e).jt({range:a,Kt:!0},(function(e,n,r){var a=s(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function mg(e){return Bm(e,ym.store)}function gg(e){return Bm(e,mm.store)}function kg(e){return Bm(e,vm.store)}var wg=function(){function e(t){Te(this,e),this.se=t}return Ee(e,[{key:"next",value:function(){return this.se+=2,this.se}}],[{key:"ie",value:function(){return new e(0)}},{key:"re",value:function(){return new e(-1)}}]),e}(),bg=function(){function e(t,n){Te(this,e),this.referenceDelegate=t,this.k=n}return Ee(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.oe(e).next((function(n){var r=new wg(n.highestTargetId);return n.highestTargetId=r.next(),t.ae(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.oe(e).next((function(e){return tp.fromTimestamp(new ep(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.oe(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.oe(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.ae(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.ce(e,t).next((function(){return n.oe(e).next((function(r){return r.targetCount+=1,n.ue(t,r),n.ae(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.ce(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return _g(e).delete(t.targetId)})).next((function(){return n.oe(e)})).next((function(t){return Ld(t.targetCount>0),t.targetCount-=1,n.ae(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return _g(e).jt((function(o,u){var s=tg(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Pm.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return _g(e).jt((function(e,n){var r=tg(n);t(r)}))}},{key:"oe",value:function(e){return xg(e).get(Tm.key).next((function(e){return Ld(null!==e),e}))}},{key:"ae",value:function(e,t){return xg(e).put(Tm.key,t)}},{key:"ce",value:function(e,t){return _g(e).put(ng(this.k,t))}},{key:"ue",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.oe(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=zp(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return _g(e).jt({range:r,index:_m.queryTargetsIndexName},(function(e,n,r){var a=tg(n);qp(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Tg(e);return t.forEach((function(t){var o=cm(t.path);i.push(a.put(new xm(n,o))),i.push(r.referenceDelegate.addReference(e,n,t))})),Pm.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Tg(e);return Pm.forEach(t,(function(t){var a=cm(t.path);return Pm.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Tg(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Tg(e),i=my();return r.jt({range:n,Kt:!0},(function(e,t,n){var r=hm(e[1]),a=new bp(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=cm(t.path),r=IDBKeyRange.bound([n],[Zd(n)],!1,!0),i=0;return Tg(e).jt({index:xm.documentTargetsIndex,Kt:!0,range:r},(function(e,t,n){var r=s(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return _g(e).get(t).next((function(e){return e?tg(e):null}))}}]),e}();function _g(e){return Bm(e,_m.store)}function xg(e){return Bm(e,Tm.store)}function Tg(e){return Bm(e,xm.store)}function Ig(e){return Eg.apply(this,arguments)}function Eg(){return Eg=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Ud.FAILED_PRECONDITION&&t.message===Nm){e.next=2;break}throw t;case 2:Nd("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Eg.apply(this,arguments)}function Sg(e,t){var n=s(e,2),r=n[0],i=n[1],a=s(t,2),o=a[0],u=a[1],c=Jd(r,o);return 0===c?Jd(i,u):c}var Cg=function(){function e(t){Te(this,e),this.he=t,this.buffer=new sy(Sg),this.le=0}return Ee(e,[{key:"fe",value:function(){return++this.le}},{key:"de",value:function(e){var t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Sg(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Ag=function(){function e(t,n){Te(this,e),this.garbageCollector=t,this.asyncQueue=n,this.we=!1,this._e=null}return Ee(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}},{key:"stop",value:function(){this._e&&(this._e.cancel(),this._e=null)}},{key:"started",get:function(){return null!==this._e}},{key:"me",value:function(e){var t=this,n=this.we?3e5:6e4;Nd("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,be(ke().mark((function n(){return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t._e=null,t.we=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Um(n.t0)){n.next=12;break}Nd("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Ig(n.t0);case 14:return n.next=16,t.me(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),Ng=function(){function e(t,n){Te(this,e),this.ge=t,this.params=n}return Ee(e,[{key:"calculateTargetCount",value:function(e,t){return this.ge.ye(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Pm.resolve(Qd.I);var r=new Cg(t);return this.ge.forEachTarget(e,(function(e){return r.de(e.sequenceNumber)})).next((function(){return n.ge.pe(e,(function(e){return r.de(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.ge.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.ge.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Nd("LruGarbageCollector","Garbage collection skipped; disabled"),Pm.resolve(fg)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Nd("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),fg):n.Te(e,t)}))}},{key:"getCacheSize",value:function(e){return this.ge.getCacheSize(e)}},{key:"Te",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Nd("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Ad()<=vt.DEBUG&&Nd("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Pm.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Rg=function(){function e(t,n){Te(this,e),this.db=t,this.garbageCollector=function(e,t){return new Ng(e,t)}(this,n)}return Ee(e,[{key:"ye",value:function(e){var t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Ee",value:function(e){var t=0;return this.pe(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"pe",value:function(e,t){return this.Ie(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Pg(e,n)}},{key:"removeReference",value:function(e,t,n){return Pg(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Pg(e,t)}},{key:"Ae",value:function(e,t){return function(e,t){var n=!1;return kg(e).Qt((function(r){return yg(e,r,t).next((function(e){return e&&(n=!0),Pm.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ie(e,(function(o,u){if(u<=t){var s=n.Ae(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o),Tg(e).delete([0,cm(o.path)])}))}));i.push(s)}})).next((function(){return Pm.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Pg(e,t)}},{key:"Ie",value:function(e,t){var n,r=Tg(e),i=Qd.I;return r.jt({index:xm.documentTargetsIndex},(function(e,r){var a=s(e,2),o=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==Qd.I&&t(new bp(hm(n)),i),i=c,n=u):i=Qd.I})).next((function(){i!==Qd.I&&t(new bp(hm(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Pg(e,t){return Tg(e).put(function(e,t){return new xm(0,cm(e.path),t)}(t,e.currentSequenceNumber))}var Og=function(){function e(t,n){Te(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return Ee(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Se(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){rp(this.inner,(function(t,n){var r,i=Se(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return ip(this.inner)}}]),e}(),Dg=function(){function e(){Te(this,e),this.changes=new Og((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Ee(e,[{key:"getReadTime",value:function(e){var t=this.changes.get(e);return t?t.readTime:tp.min()}},{key:"addEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}},{key:"removeEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.assertNotApplied(),this.changes.set(e,{document:Fp.newInvalidDocument(e),readTime:t})}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Pm.resolve(n.document):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Lg=function(){function e(t,n){Te(this,e),this.k=t,this.Jt=n}return Ee(e,[{key:"addEntry",value:function(e,t,n){return Fg(e).put(jg(t),n)}},{key:"removeEntry",value:function(e,t){var n=Fg(e),r=jg(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Re(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this;return Fg(e).get(jg(t)).next((function(e){return n.Pe(t,e)}))}},{key:"be",value:function(e,t){var n=this;return Fg(e).get(jg(t)).next((function(e){return{document:n.Pe(t,e),size:pg(e)}}))}},{key:"getEntries",value:function(e,t){var n=this,r=fy();return this.ve(e,t,(function(e,t){var i=n.Pe(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Ve",value:function(e,t){var n=this,r=fy(),i=new ay(bp.comparator);return this.ve(e,t,(function(e,t){var a=n.Pe(e,t);r=r.insert(e,a),i=i.insert(e,pg(t))})).next((function(){return{documents:r,Se:i}}))}},{key:"ve",value:function(e,t,n){if(t.isEmpty())return Pm.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return Fg(e).jt({range:r},(function(e,t,r){for(var o=bp.fromSegments(e);a&&bp.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.Lt(a.path.toArray()):r.done()})).next((function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){var r=this,i=fy(),a=t.path.length+1,o={};if(n.isEqual(tp.min())){var u=t.path.toArray();o.range=IDBKeyRange.lowerBound(u)}else{var s=t.path.toArray(),c=Ym(n);o.range=IDBKeyRange.lowerBound([s,c],!0),o.index=wm.collectionReadTimeIndex}return Fg(e).jt(o,(function(e,n,o){if(e.length===a){var u=Qm(r.k,n);t.path.isPrefixOf(u.key.path)?kv(t,u)&&(i=i.insert(u.key,u)):o.done()}})).next((function(){return i}))}},{key:"newChangeBuffer",value:function(e){return new Mg(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Ug(e).get(bm.key).next((function(e){return Ld(!!e),e}))}},{key:"Re",value:function(e,t){return Ug(e).put(bm.key,t)}},{key:"Pe",value:function(e,t){if(t){var n=Qm(this.k,t);if(!n.isNoDocument()||!n.version.isEqual(tp.min()))return n}return Fp.newInvalidDocument(e)}}]),e}(),Mg=function(e){Ae(n,e);var t=Pe(n);function n(e,r){var i;return Te(this,n),(i=t.call(this)).De=e,i.trackRemovals=r,i.Ce=new Og((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Ee(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new sy((function(e,t){return Jd(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Ce.get(a);if(o.document.isValidDocument()){var s=$m(t.De.k,o.document,t.getReadTime(a));i=i.add(a.path.popLast());var c=pg(s);r+=c-u,n.push(t.De.addEntry(e,a,s))}else if(r-=u,t.trackRemovals){var l=$m(t.De.k,Fp.newNoDocument(a,tp.min()),t.getReadTime(a));n.push(t.De.addEntry(e,a,l))}else n.push(t.De.removeEntry(e,a))})),i.forEach((function(r){n.push(t.De.Jt.addToCollectionParentIndex(e,r))})),n.push(this.De.updateMetadata(e,r)),Pm.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.De.be(e,t).next((function(e){return n.Ce.set(t,e.size),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.De.Ve(e,t).next((function(e){var t=e.documents;return e.Se.forEach((function(e,t){n.Ce.set(e,t)})),t}))}}]),n}(Dg);function Ug(e){return Bm(e,bm.store)}function Fg(e){return Bm(e,wm.store)}function jg(e){return e.path.toArray()}var Vg=function(){function e(t){Te(this,e),this.k=t}return Ee(e,[{key:"Nt",value:function(e,t,n,r){var i=this;Ld(n<r&&n>=0&&r<=11);var a=new Om("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(pm.store)}(e),function(e){e.createObjectStore(vm.store,{keyPath:vm.keyPath}),e.createObjectStore(ym.store,{keyPath:ym.keyPath,autoIncrement:!0}).createIndex(ym.userMutationsIndex,ym.userMutationsKeyPath,{unique:!0}),e.createObjectStore(mm.store)}(e),zg(e),function(e){e.createObjectStore(wm.store)}(e));var o=Pm.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(xm.store),e.deleteObjectStore(_m.store),e.deleteObjectStore(Tm.store)}(e),zg(e)),o=o.next((function(){return function(e){var t=e.store(Tm.store),n=new Tm(0,0,tp.min().toTimestamp(),0);return t.put(Tm.key,n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store(ym.store).Bt().next((function(n){e.deleteObjectStore(ym.store),e.createObjectStore(ym.store,{keyPath:ym.keyPath,autoIncrement:!0}).createIndex(ym.userMutationsIndex,ym.userMutationsKeyPath,{unique:!0});var r=t.store(ym.store),i=n.map((function(e){return r.put(e)}));return Pm.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore(Em.store,{keyPath:Em.keyPath})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ne(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore(bm.store)}(e),i.ke(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.xe(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.$e(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(wm.store);t.createIndex(wm.readTimeIndex,wm.readTimeIndexPath,{unique:!1}),t.createIndex(wm.collectionReadTimeIndex,wm.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(o=o.next((function(){return i.Fe(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore(Sm.store,{keyPath:Sm.keyPath})}(e),function(e){e.createObjectStore(Cm.store,{keyPath:Cm.keyPath})}(e)}))),o}},{key:"ke",value:function(e){var t=0;return e.store(wm.store).jt((function(e,n){t+=pg(n)})).next((function(){var n=new bm(t);return e.store(bm.store).put(bm.key,n)}))}},{key:"Ne",value:function(e){var t=this,n=e.store(vm.store),r=e.store(ym.store);return n.Bt().next((function(n){return Pm.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Bt(ym.userMutationsIndex,i).next((function(r){return Pm.forEach(r,(function(r){Ld(r.userId===n.userId);var i=eg(t.k,r);return dg(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"xe",value:function(e){var t=e.store(xm.store),n=e.store(wm.store);return e.store(Tm.store).get(Tm.key).next((function(e){var r=[];return n.jt((function(n,i){var a=new op(n),o=function(e){return[0,cm(e)]}(a);r.push(t.get(o).next((function(n){return n?Pm.resolve():function(n){return t.put(new xm(0,cm(n),e.highestListenSequenceNumber))}(a)})))})).next((function(){return Pm.waitFor(r)}))}))}},{key:"$e",value:function(e,t){e.createObjectStore(Im.store,{keyPath:Im.keyPath});var n=t.store(Im.store),r=new sg,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:cm(i)})}};return t.store(wm.store).jt({Kt:!0},(function(e,t){var n=new op(e);return i(n.popLast())})).next((function(){return t.store(mm.store).jt({Kt:!0},(function(e,t){var n=s(e,3),r=(n[0],n[1]),a=(n[2],hm(r));return i(a.popLast())}))}))}},{key:"Fe",value:function(e){var t=this,n=e.store(_m.store);return n.jt((function(e,r){var i=tg(r),a=ng(t.k,i);return n.put(a)}))}}]),e}();function zg(e){e.createObjectStore(xm.store,{keyPath:xm.keyPath}).createIndex(xm.documentTargetsIndex,xm.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(_m.store,{keyPath:_m.keyPath}).createIndex(_m.queryTargetsIndexName,_m.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Tm.store)}var qg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Bg=function(){function e(t,n,r,i,a,o,u,s,c,l){if(Te(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Oe=a,this.window=o,this.document=u,this.Me=c,this.Le=l,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=function(e){return Promise.resolve()},!e.bt())throw new Fd(Ud.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Rg(this,i),this.Ge=n+"main",this.k=new Gm(s),this.ze=new Dm(this.Ge,11,new Vg(this.k)),this.He=new bg(this.referenceDelegate,this.k),this.Jt=new cg,this.Je=function(e,t){return new Lg(e,t)}(this.k,this.Jt),this.Ye=new ig,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===l&&Rd("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Ee(e,[{key:"start",value:function(){var e=this;return this.Ze().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Fd(Ud.FAILED_PRECONDITION,qg);return e.tn(),e.en(),e.nn(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.He.getHighestSequenceNumber(t)}))})).then((function(t){e.Be=new Qd(t,e.Me)})).then((function(){e.Ue=!0})).catch((function(t){return e.ze&&e.ze.close(),Promise.reject(t)}))}},{key:"sn",value:function(e){var t=this;return this.We=function(){var n=be(ke().mark((function n(r){return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ze.xt(function(){var t=be(ke().mark((function t(n){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget(be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ze();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ze",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Wg(t).put(new Em(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.rn(t).next((function(t){t||(e.isPrimary=!1,e.Oe.enqueueRetryable((function(){return e.We(!1)})))}))})).next((function(){return e.on(t)})).next((function(n){return e.isPrimary&&!n?e.an(t).next((function(){return!1})):!!n&&e.cn(t).next((function(){return!0}))}))})).catch((function(t){if(Um(t))return Nd("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Nd("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Oe.enqueueRetryable((function(){return e.We(t)})),e.isPrimary=t}))}},{key:"rn",value:function(e){var t=this;return Hg(e).get(pm.key).next((function(e){return Pm.resolve(t.un(e))}))}},{key:"hn",value:function(e){return Wg(e).delete(this.clientId)}},{key:"ln",value:function(){var e=be(ke().mark((function e(){var t,n,r,i,a=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.fn(this.Qe,18e5)){e.next=6;break}return this.Qe=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Bm(e,Em.store);return t.Bt().next((function(e){var n=a.dn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Pm.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Xe){n=Se(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Xe.removeItem(this.wn(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nn",value:function(){var e=this;this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ze().then((function(){return e.ln()})).then((function(){return e.nn()}))}))}},{key:"un",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"on",value:function(e){var t=this;return this.Le?Pm.resolve(!0):Hg(e).get(pm.key).next((function(n){if(null!==n&&t.fn(n.leaseTimestampMs,5e3)&&!t._n(n.ownerId)){if(t.un(n)&&t.networkEnabled)return!0;if(!t.un(n)){if(!n.allowTabSynchronization)throw new Fd(Ud.FAILED_PRECONDITION,qg);return!1}}return!(!t.networkEnabled||!t.inForeground)||Wg(e).Bt().next((function(e){return void 0===t.dn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Nd("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=be(ke().mark((function e(){var t=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ue=!1,this.mn(),this.je&&(this.je.cancel(),this.je=null),this.gn(),this.yn(),e.next=7,this.ze.runTransaction("shutdown","readwrite",[pm.store,Em.store],(function(e){var n=new qm(e,Qd.I);return t.an(n).next((function(){return t.hn(n)}))}));case 7:this.ze.close(),this.pn();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dn",value:function(e,t){var n=this;return e.filter((function(e){return n.fn(e.updateTimeMs,t)&&!n._n(e.clientId)}))}},{key:"Tn",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Wg(t).Bt().next((function(t){return e.dn(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ue}},{key:"getMutationQueue",value:function(e){return vg.Xt(e,this.k,this.Jt,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r=this;Nd("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite";return this.ze.runTransaction(e,a,Am,(function(a){return i=new qm(a,r.Be?r.Be.next():Qd.I),"readwrite-primary"===t?r.rn(i).next((function(e){return!!e||r.on(i)})).next((function(t){if(!t)throw Rd("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Oe.enqueueRetryable((function(){return r.We(!1)})),new Fd(Ud.FAILED_PRECONDITION,Nm);return n(i)})).next((function(e){return r.cn(i).next((function(){return e}))})):r.En(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"En",value:function(e){var t=this;return Hg(e).get(pm.key).next((function(e){if(null!==e&&t.fn(e.leaseTimestampMs,5e3)&&!t._n(e.ownerId)&&!t.un(e)&&!(t.Le||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Fd(Ud.FAILED_PRECONDITION,qg)}))}},{key:"cn",value:function(e){var t=new pm(this.clientId,this.allowTabSynchronization,Date.now());return Hg(e).put(pm.key,t)}},{key:"an",value:function(e){var t=this,n=Hg(e);return n.get(pm.key).next((function(e){return t.un(e)?(Nd("IndexedDbPersistence","Releasing primary lease."),n.delete(pm.key)):Pm.resolve()}))}},{key:"fn",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Rd("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"tn",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=function(){e.Oe.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ze()}))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}},{key:"gn",value:function(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}},{key:"en",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=function(){t.mn(),!We()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Oe.enterRestrictedMode(!0),t.Oe.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.qe))}},{key:"yn",value:function(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}},{key:"_n",value:function(e){var t;try{var n=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Nd("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Rd("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"mn",value:function(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(Ic){Rd("Failed to set zombie client id.",Ic)}}},{key:"pn",value:function(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(Ic){}}},{key:"wn",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"bt",value:function(){return Dm.bt()}}]),e}();function Hg(e){return Bm(e,pm.store)}function Wg(e){return Bm(e,Em.store)}function Kg(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Gg=Ee((function e(t,n){Te(this,e),this.progress=t,this.In=n})),Qg=function(){function e(t,n,r){Te(this,e),this.Je=t,this.An=n,this.Jt=r}return Ee(e,[{key:"Rn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Pn(e,t,r)}))}},{key:"Pn",value:function(e,t,n){return this.Je.getEntry(e,t).next((function(e){var t,r=Se(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"bn",value:function(e,t){e.forEach((function(e,n){var r,i=Se(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"vn",value:function(e,t){var n=this;return this.Je.getEntries(e,t).next((function(t){return n.Vn(e,t).next((function(){return t}))}))}},{key:"Vn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.bn(t,e)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return bp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Sn(e,t.path):hv(t)?this.Dn(e,t,n):this.Cn(e,t,n)}},{key:"Sn",value:function(e,t){return this.Rn(e,new bp(t)).next((function(e){var t=dy();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Dn",value:function(e,t,n){var r=this,i=t.collectionGroup,a=dy();return this.Jt.getCollectionParents(e,i).next((function(o){return Pm.forEach(o,(function(o){var u=function(e,t){return new av(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Cn(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"Cn",value:function(e,t,n){var r,i,a=this;return this.Je.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,a.An.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,a.Nn(e,i,r).next((function(e){r=e;var t,n=Se(i);try{for(n.s();!(t=n.n()).done;){var a,o=t.value,u=Se(o.mutations);try{for(u.s();!(a=u.n()).done;){var s=a.value,c=s.key,l=r.get(c);null==l&&(l=Fp.newInvalidDocument(c),r=r.insert(c,l)),Bv(s,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}catch(f){u.e(f)}finally{u.f()}}}catch(f){n.e(f)}finally{n.f()}}))})).next((function(){return r.forEach((function(e,n){kv(t,n)||(r=r.remove(e))})),r}))}},{key:"Nn",value:function(e,t,n){var r,i=my(),a=Se(t);try{for(a.s();!(r=a.n()).done;){var o,u=Se(r.value.mutations);try{for(u.s();!(o=u.n()).done;){var s=o.value;s instanceof Qv&&null===n.get(s.key)&&(i=i.add(s.key))}}catch(l){u.e(l)}finally{u.f()}}}catch(l){a.e(l)}finally{a.f()}var c=n;return this.Je.getEntries(e,i).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(c=c.insert(e,t))})),c}))}}]),e}(),$g=function(){function e(t,n,r,i){Te(this,e),this.targetId=t,this.fromCache=n,this.kn=r,this.xn=i}return Ee(e,null,[{key:"$n",value:function(t,n){var r,i=my(),a=my(),o=Se(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Yg=function(){function e(){Te(this,e)}return Ee(e,[{key:"Fn",value:function(e){this.On=e}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(tp.min())?this.Mn(e,t):this.On.vn(e,r).next((function(a){var o=i.Ln(t,a);return(sv(t)||cv(t))&&i.Bn(t.limitType,o,r,n)?i.Mn(e,t):(Ad()<=vt.DEBUG&&Nd("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),gv(t)),i.On.getDocumentsMatchingQuery(e,t,n).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"Ln",value:function(e,t){var n=new sy(wv(e));return t.forEach((function(t,r){kv(e,r)&&(n=n.add(r))})),n}},{key:"Bn",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mn",value:function(e,t){return Ad()<=vt.DEBUG&&Nd("QueryEngine","Using full collection scan to execute query:",gv(t)),this.On.getDocumentsMatchingQuery(e,t,tp.min())}}]),e}(),Jg=function(){function e(t,n,r,i){Te(this,e),this.persistence=t,this.Un=n,this.k=i,this.qn=new ay(Jd),this.Kn=new Og((function(e){return zp(e)}),qp),this.jn=tp.min(),this.An=t.getMutationQueue(r),this.Qn=t.getRemoteDocumentCache(),this.He=t.getTargetCache(),this.Wn=new Qg(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=t.getBundleCache(),this.Un.Fn(this.Wn)}return Ee(e,[{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qn)}))}}]),e}();function Xg(e,t,n,r){return new Jg(e,t,n,r)}function Zg(e,t){return ek.apply(this,arguments)}function ek(){return ek=be(ke().mark((function e(t,n){var r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Md(t),i=r.An,a=r.Wn,e.next=4,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.An.getAllMutationBatches(e).next((function(o){return t=o,i=r.persistence.getMutationQueue(n),a=new Qg(r.Qn,i,r.persistence.getIndexManager()),i.getAllMutationBatches(e)})).next((function(n){var r,i=[],o=[],u=my(),s=Se(t);try{for(s.s();!(r=s.n()).done;){var c=r.value;i.push(c.batchId);var l,f=Se(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Se(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=Se(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return a.vn(e,u).next((function(e){return{Gn:e,removedBatchIds:i,addedBatchIds:o}}))}))}));case 4:return o=e.sent,e.abrupt("return",(r.An=i,r.Wn=a,r.Un.Fn(r.Wn),o));case 6:case"end":return e.stop()}}),e)}))),ek.apply(this,arguments)}function tk(e,t){var n=Md(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Pm.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Ld(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),o.next((function(){return e.An.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.An.performConsistencyCheck(e)})).next((function(){return n.Wn.vn(e,r)}))}))}function nk(e){var t=Md(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.He.getLastRemoteSnapshotVersion(e)}))}function rk(e,t){var n=Md(e),r=t.snapshotVersion,i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;var o=[];t.targetChanges.forEach((function(t,a){var u=i.get(a);if(u){o.push(n.He.removeMatchingKeys(e,t.removedDocuments,a).next((function(){return n.He.addMatchingKeys(e,t.addedDocuments,a)})));var s=t.resumeToken;if(s.approximateByteSize()>0){var c=u.withResumeToken(s,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(a,c),function(e,t,n){return Ld(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,t)&&o.push(n.He.updateTargetData(e,c))}}}));var u=fy();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(ik(e,a,t.documentUpdates,r,void 0).next((function(e){u=e}))),!r.isEqual(tp.min())){var s=n.He.getLastRemoteSnapshotVersion(e).next((function(t){return n.He.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return Pm.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.Wn.Vn(e,u)})).next((function(){return u}))})).then((function(e){return n.qn=i,e}))}function ik(e,t,n,r,i){var a=my();return n.forEach((function(e){return a=a.add(e)})),t.getEntries(e,a).next((function(e){var a=fy();return n.forEach((function(n,o){var u=e.get(n),s=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(tp.min())?(t.removeEntry(n,s),a=a.insert(n,o)):!u.isValidDocument()||o.version.compareTo(u.version)>0||0===o.version.compareTo(u.version)&&u.hasPendingWrites?(t.addEntry(o,s),a=a.insert(n,o)):Nd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",u.version," Watch version:",o.version)})),a}))}function ak(e,t){var n=Md(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.An.getNextMutationBatchAfterBatchId(e,t)}))}function ok(e,t){var n=Md(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.He.getTargetData(e,t).next((function(i){return i?(r=i,Pm.resolve(r)):n.He.allocateTargetId(e).next((function(i){return r=new Km(t,i,0,e.currentSequenceNumber),n.He.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qn=n.qn.insert(e.targetId,e),n.Kn.set(t,e.targetId)),e}))}function uk(e,t,n){return sk.apply(this,arguments)}function sk(){return sk=be(ke().mark((function e(t,n,r){var i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Md(t),a=i.qn.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Um(e.t1)){e.next=12;break}throw e.t1;case 12:Nd("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qn=i.qn.remove(n),i.Kn.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),sk.apply(this,arguments)}function ck(e,t,n){var r=Md(e),i=tp.min(),a=my();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Md(e),i=r.Kn.get(n);return void 0!==i?Pm.resolve(r.qn.get(i)):r.He.getTargetData(t,n)}(r,e,pv(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Un.getDocumentsMatchingQuery(e,t,n?i:tp.min(),n?a:my())})).next((function(e){return{documents:e,zn:a}}))}))}function lk(e,t){var n=Md(e),r=Md(n.He),i=n.qn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function fk(e){var t=Md(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=Md(e),i=fy(),a=Ym(n),o=Fg(t),u=IDBKeyRange.lowerBound(a,!0);return o.jt({index:wm.readTimeIndex,range:u},(function(e,t){var n=Qm(r.k,t);i=i.insert(n.key,n),a=t.readTime})).next((function(){return{In:i,readTime:Jm(a)}}))}(t.Qn,e,t.jn)})).then((function(e){var n=e.In,r=e.readTime;return t.jn=r,n}))}function hk(e){return dk.apply(this,arguments)}function dk(){return dk=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Md(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=Fg(e),n=tp.min();return t.jt({index:wm.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=Jm(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){n.jn=e})));case 2:case"end":return e.stop()}}),e)}))),dk.apply(this,arguments)}function pk(e,t,n,r){return vk.apply(this,arguments)}function vk(){return vk=be(ke().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Md(t),o=my(),u=fy(),s=vy(),c=Se(r);try{for(c.s();!(l=c.n()).done;)f=l.value,h=n.Hn(f.metadata.name),f.document&&(o=o.add(h)),u=u.insert(h,n.Jn(f)),s=s.insert(h,n.Yn(f.metadata.readTime))}catch(v){c.e(v)}finally{c.f()}return d=a.Qn.newChangeBuffer({trackRemovals:!0}),e.next=7,ok(a,function(e){return pv(uv(op.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return ik(e,d,u,tp.min(),s).next((function(t){return d.apply(e),t})).next((function(t){return a.He.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.He.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.Wn.Vn(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),vk.apply(this,arguments)}function yk(e,t){return mk.apply(this,arguments)}function mk(){return mk=be(ke().mark((function e(t,n){var r,i,a,o=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:my(),e.next=3,ok(t,pv(rg(n.bundledQuery)));case 3:return i=e.sent,a=Md(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Ly(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ye.saveNamedQuery(e,n);var o=i.withResumeToken(lp.EMPTY_BYTE_STRING,t);return a.qn=a.qn.insert(o.targetId,o),a.He.updateTargetData(e,o).next((function(){return a.He.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.He.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ye.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),mk.apply(this,arguments)}var gk=function(){function e(t){Te(this,e),this.k=t,this.Xn=new Map,this.Zn=new Map}return Ee(e,[{key:"getBundleMetadata",value:function(e,t){return Pm.resolve(this.Xn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Xn.set(t.id,{id:(n=t).id,version:n.version,createTime:Ly(n.createTime)}),Pm.resolve()}},{key:"getNamedQuery",value:function(e,t){return Pm.resolve(this.Zn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Zn.set(t.name,function(e){return{name:e.name,query:rg(e.bundledQuery),readTime:Ly(e.readTime)}}(t)),Pm.resolve()}}]),e}(),kk=function(){function e(){Te(this,e),this.ts=new sy(wk.es),this.ns=new sy(wk.ss)}return Ee(e,[{key:"isEmpty",value:function(){return this.ts.isEmpty()}},{key:"addReference",value:function(e,t){var n=new wk(e,t);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}},{key:"rs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.os(new wk(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new bp(new op([])),r=new wk(n,e),i=new wk(n,e+1),a=[];return this.ns.forEachInRange([r,i],(function(e){t.os(e),a.push(e.key)})),a}},{key:"hs",value:function(){var e=this;this.ts.forEach((function(t){return e.os(t)}))}},{key:"os",value:function(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}},{key:"ls",value:function(e){var t=new bp(new op([])),n=new wk(t,e),r=new wk(t,e+1),i=my();return this.ns.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new wk(e,0),n=this.ts.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),wk=function(){function e(t,n){Te(this,e),this.key=t,this.fs=n}return Ee(e,null,[{key:"es",value:function(e,t){return bp.comparator(e.key,t.key)||Jd(e.fs,t.fs)}},{key:"ss",value:function(e,t){return Jd(e.fs,t.fs)||bp.comparator(e.key,t.key)}}]),e}(),bk=function(){function e(t,n){Te(this,e),this.Jt=t,this.referenceDelegate=n,this.An=[],this.ds=1,this.ws=new sy(wk.es)}return Ee(e,[{key:"checkEmpty",value:function(e){return Pm.resolve(0===this.An.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];var a=new Hm(i,t,n,r);this.An.push(a);var o,u=Se(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ws=this.ws.add(new wk(s.key,i)),this.Jt.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Pm.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Pm.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.gs(n),i=r<0?0:r;return Pm.resolve(this.An.length>i?this.An[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Pm.resolve(0===this.An.length?-1:this.ds-1)}},{key:"getAllMutationBatches",value:function(e){return Pm.resolve(this.An.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new wk(t,0),i=new wk(t,Number.POSITIVE_INFINITY),a=[];return this.ws.forEachInRange([r,i],(function(e){var t=n._s(e.fs);a.push(t)})),Pm.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new sy(Jd);return t.forEach((function(e){var t=new wk(e,0),i=new wk(e,Number.POSITIVE_INFINITY);n.ws.forEachInRange([t,i],(function(e){r=r.add(e.fs)}))})),Pm.resolve(this.ys(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;bp.isDocumentKey(i)||(i=i.child(""));var a=new wk(new bp(i),0),o=new sy(Jd);return this.ws.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.fs)),!0)}),a),Pm.resolve(this.ys(o))}},{key:"ys",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Ld(0===this.ps(t.batchId,"removed")),this.An.shift();var r=this.ws;return Pm.forEach(t.mutations,(function(i){var a=new wk(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ws=r}))}},{key:"ee",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new wk(t,0),r=this.ws.firstAfterOrEqual(n);return Pm.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.An.length,Pm.resolve()}},{key:"ps",value:function(e,t){return this.gs(e)}},{key:"gs",value:function(e){return 0===this.An.length?0:e-this.An[0].batchId}},{key:"_s",value:function(e){var t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}]),e}(),_k=function(){function e(t,n){Te(this,e),this.Jt=t,this.Ts=n,this.docs=new ay(bp.comparator),this.size=0}return Ee(e,[{key:"addEntry",value:function(e,t,n){var r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-a,this.Jt.addToCollectionParentIndex(e,r.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Pm.resolve(n?n.document.clone():Fp.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=fy();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():Fp.newInvalidDocument(e))})),Pm.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){for(var r=fy(),i=new bp(t.path.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value,c=s.document,l=s.readTime;if(!t.path.isPrefixOf(u.path))break;l.compareTo(n)<=0||kv(t,c)&&(r=r.insert(c.key,c.clone()))}return Pm.resolve(r)}},{key:"Es",value:function(e,t){return Pm.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new xk(this)}},{key:"getSize",value:function(e){return Pm.resolve(this.size)}}]),e}(),xk=function(e){Ae(n,e);var t=Pe(n);function n(e){var r;return Te(this,n),(r=t.call(this)).De=e,r}return Ee(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.De.addEntry(e,i.document,t.getReadTime(r))):t.De.removeEntry(r)})),Pm.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.De.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.De.getEntries(e,t)}}]),n}(Dg),Tk=function(){function e(t){Te(this,e),this.persistence=t,this.Is=new Og((function(e){return zp(e)}),qp),this.lastRemoteSnapshotVersion=tp.min(),this.highestTargetId=0,this.As=0,this.Rs=new kk,this.targetCount=0,this.Ps=wg.ie()}return Ee(e,[{key:"forEachTarget",value:function(e,t){return this.Is.forEach((function(e,n){return t(n)})),Pm.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Pm.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Pm.resolve(this.As)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ps.next(),Pm.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.As&&(this.As=t),Pm.resolve()}},{key:"ce",value:function(e){this.Is.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ps=new wg(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.ce(t),this.targetCount+=1,Pm.resolve()}},{key:"updateTargetData",value:function(e,t){return this.ce(t),Pm.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,Pm.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Is.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Is.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Pm.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Pm.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Is.get(t)||null;return Pm.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Rs.rs(t,n),Pm.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Rs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Pm.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Rs.us(t),Pm.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Rs.ls(t);return Pm.resolve(n)}},{key:"containsKey",value:function(e,t){return Pm.resolve(this.Rs.containsKey(t))}}]),e}(),Ik=function(){function e(t,n){var r=this;Te(this,e),this.bs={},this.Be=new Qd(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=t(this),this.He=new Tk(this),this.Jt=new ug,this.Je=function(e,t){return new _k(e,(function(e){return r.referenceDelegate.vs(e)}))}(this.Jt),this.k=new Gm(n),this.Ye=new gk(this.k)}return Ee(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ue=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ue}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getMutationQueue",value:function(e){var t=this.bs[e.toKey()];return t||(t=new bk(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=t),t}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r=this;Nd("MemoryPersistence","Starting transaction:",e);var i=new Ek(this.Be.next());return this.referenceDelegate.Vs(),n(i).next((function(e){return r.referenceDelegate.Ss(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ds",value:function(e,t){return Pm.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Ek=function(e){Ae(n,e);var t=Pe(n);function n(e){var r;return Te(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Ee(n)}(Rm),Sk=function(){function e(t){Te(this,e),this.persistence=t,this.Cs=new kk,this.Ns=null}return Ee(e,[{key:"xs",get:function(){if(this.Ns)return this.Ns;throw Dd()}},{key:"addReference",value:function(e,t,n){return this.Cs.addReference(n,t),this.xs.delete(n.toString()),Pm.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Cs.removeReference(n,t),this.xs.add(n.toString()),Pm.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.xs.add(t.toString()),Pm.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Cs.us(t.targetId).forEach((function(e){return n.xs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.xs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Vs",value:function(){this.Ns=new Set}},{key:"Ss",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Pm.forEach(this.xs,(function(r){var i=bp.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Ns=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.xs.delete(t.toString()):n.xs.add(t.toString())}))}},{key:"vs",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return Pm.or([function(){return Pm.resolve(n.Cs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ds(e,t)}])}}],[{key:"ks",value:function(t){return new e(t)}}]),e}();function Ck(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Ak(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Nk(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Rk=function(){function e(t,n,r,i){Te(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Ee(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Fs",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Fd(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Rd("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Pk=function(){function e(t,n,r){Te(this,e),this.targetId=t,this.state=n,this.error=r}return Ee(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Fs",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Fd(i.error.code,i.error.message))),a?new e(t,i.state,r):(Rd("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Ok=function(){function e(t,n){Te(this,e),this.clientId=t,this.activeTargetIds=n}return Ee(e,null,[{key:"Fs",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=ky(),o=0;i&&o<r.activeTargetIds.length;++o)i=wp(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Rd("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Dk=function(){function e(t,n){Te(this,e),this.clientId=t,this.onlineState=n}return Ee(e,null,[{key:"Fs",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Rd("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Lk=function(){function e(){Te(this,e),this.activeTargetIds=ky()}return Ee(e,[{key:"Ms",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ls",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Os",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Mk=function(){function e(t,n,r,i,a){Te(this,e),this.window=t,this.Oe=n,this.persistenceKey=r,this.Bs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new ay(Jd),this.started=!1,this.js=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Qs=Ck(this.persistenceKey,this.Bs),this.Ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Ks=this.Ks.insert(this.Bs,new Lk),this.Gs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.zs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Hs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Js=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Ys=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}return Ee(e,[{key:"start",value:function(){var e=be(ke().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Tn();case 2:t=e.sent,n=Se(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Bs){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Ck(this.persistenceKey,i)))&&(o=Ok.Fs(i,a))&&(this.Ks=this.Ks.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Xs(),(u=this.storage.getItem(this.Js))&&(s=this.Zs(u))&&this.ti(s),c=Se(this.js);try{for(c.s();!(l=c.n()).done;)f=l.value,this.qs(f)}catch(d){c.e(d)}finally{c.f()}this.js=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ws,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.ei(this.Ks)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.Ks.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.ni(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.ni(e,t,n),this.si(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Nk(this.persistenceKey,e));if(n){var r=Pk.Fs(e,n);r&&(t=r.state)}}return this.ii.Ms(e),this.Xs(),t}},{key:"removeLocalQueryTarget",value:function(e){this.ii.Ls(e),this.Xs()}},{key:"isLocalQueryTarget",value:function(e){return this.ii.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Nk(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.ri(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.si(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.oi(e)}},{key:"notifyBundleLoaded",value:function(){this.ai()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Nd("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Nd("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Nd("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"qs",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Nd("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void Rd("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable(be(ke().mark((function e(){var r,i,a,o,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.Gs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.ci(n.key),e.abrupt("return",t.ui(r,null));case 6:if(!(i=t.hi(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.ui(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.zs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.li(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.fi(a));case 16:e.next=39;break;case 18:if(!t.Hs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.di(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.wi(o));case 23:e.next=39;break;case 25:if(n.key!==t.Js){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Zs(n.newValue))){e.next=30;break}return e.abrupt("return",t.ti(u));case 30:e.next=39;break;case 32:if(n.key!==t.Ws){e.next=37;break}s=function(e){var t=Qd.I;if(null!=e)try{var n=JSON.parse(e);Ld("number"==typeof n),t=n}catch(e){Rd("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Qd.I&&t.sequenceNumberHandler(s),e.next=39;break;case 37:if(n.key!==t.Ys){e.next=39;break}return e.abrupt("return",t.syncEngine._i());case 39:e.next=42;break;case 41:t.js.push(n);case 42:case"end":return e.stop()}}),e)}))))}}},{key:"ii",get:function(){return this.Ks.get(this.Bs)}},{key:"Xs",value:function(){this.setItem(this.Qs,this.ii.Os())}},{key:"ni",value:function(e,t,n){var r=new Rk(this.currentUser,e,t,n),i=Ak(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}},{key:"si",value:function(e){var t=Ak(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"oi",value:function(e){var t={clientId:this.Bs,onlineState:e};this.storage.setItem(this.Js,JSON.stringify(t))}},{key:"ri",value:function(e,t,n){var r=Nk(this.persistenceKey,e),i=new Pk(e,t,n);this.setItem(r,i.Os())}},{key:"ai",value:function(){this.setItem(this.Ys,"value-not-used")}},{key:"ci",value:function(e){var t=this.Gs.exec(e);return t?t[1]:null}},{key:"hi",value:function(e,t){var n=this.ci(e);return Ok.Fs(n,t)}},{key:"li",value:function(e,t){var n=this.zs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Rk.Fs(new Ed(i),r,t)}},{key:"di",value:function(e,t){var n=this.Hs.exec(e),r=Number(n[1]);return Pk.Fs(r,t)}},{key:"Zs",value:function(e){return Dk.Fs(e)}},{key:"fi",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.mi(t.batchId,t.state,t.error));case 2:Nd("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wi",value:function(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}},{key:"ui",value:function(e,t){var n=this,r=t?this.Ks.insert(e,t):this.Ks.remove(e),i=this.ei(this.Ks),a=this.ei(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.yi(o,u).then((function(){n.Ks=r}))}},{key:"ti",value:function(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"ei",value:function(e){var t=ky();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"bt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Uk=function(){function e(){Te(this,e),this.pi=new Lk,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Ee(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ti[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.pi.Ls(e)}},{key:"isLocalQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ti[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.pi.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"start",value:function(){return this.pi=new Lk,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),Fk=function(){function e(){Te(this,e)}return Ee(e,[{key:"Ei",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),jk=function(){function e(){var t=this;Te(this,e),this.Ii=function(){return t.Ai()},this.Ri=function(){return t.Pi()},this.bi=[],this.vi()}return Ee(e,[{key:"Ei",value:function(e){this.bi.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}},{key:"vi",value:function(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}},{key:"Ai",value:function(){Nd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Se(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Pi",value:function(){Nd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Se(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"bt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Vk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},zk=function(){function e(t){Te(this,e),this.Vi=t.Vi,this.Si=t.Si}return Ee(e,[{key:"Di",value:function(e){this.Ci=e}},{key:"Ni",value:function(e){this.ki=e}},{key:"onMessage",value:function(e){this.xi=e}},{key:"close",value:function(){this.Si()}},{key:"send",value:function(e){this.Vi(e)}},{key:"$i",value:function(){this.Ci()}},{key:"Fi",value:function(e){this.ki(e)}},{key:"Oi",value:function(e){this.xi(e)}}]),e}(),qk=function(e){Ae(n,e);var t=Pe(n);function n(e){var r;return Te(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return Ee(n,[{key:"Ki",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Td;o.listenOnce(kd.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case gd.NO_ERROR:var t=o.getResponseJson();Nd("Connection","XHR received:",JSON.stringify(t)),i(t);break;case gd.TIMEOUT:Nd("Connection",'RPC "'+e+'" timed out'),a(new Fd(Ud.DEADLINE_EXCEEDED,"Request time out"));break;case gd.HTTP_ERROR:var n=o.getStatus();if(Nd("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ud).indexOf(t)>=0?t:Ud.UNKNOWN}(r.status);a(new Fd(u,r.message))}else a(new Fd(Ud.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Fd(Ud.UNAVAILABLE,"Connection failed."));break;default:Dd()}}finally{Nd("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"Qi",value:function(e,t,n){var r=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=yd(),a=md(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new _d({})),this.qi(o.initMessageHeaders,t,n),He()||Ge()||Be().indexOf("Electron/")>=0||Qe()||Be().indexOf("MSAppHost/")>=0||Ke()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Nd("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new zk({Vi:function(e){l?Nd("Connection","Not sending because WebChannel is closed:",e):(c||(Nd("Connection","Opening WebChannel transport."),s.open(),c=!0),Nd("Connection","WebChannel sending:",e),s.send(e))},Si:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,xd.EventType.OPEN,(function(){l||Nd("Connection","WebChannel transport opened.")})),h(s,xd.EventType.CLOSE,(function(){l||(l=!0,Nd("Connection","WebChannel transport closed"),f.Fi())})),h(s,xd.EventType.ERROR,(function(e){l||(l=!0,Pd("Connection","WebChannel transport errored:",e),f.Fi(new Fd(Ud.UNAVAILABLE,"The operation could not be completed")))})),h(s,xd.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Ld(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Nd("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Xv[e];if(void 0!==t)return iy(t)}(a),u=i.message;void 0===o&&(o=Ud.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.Fi(new Fd(o,u)),s.close()}else Nd("Connection","WebChannel received:",n),f.Oi(n)}})),h(a,wd.STAT_EVENT,(function(e){e.stat===bd.PROXY?Nd("Connection","Detected buffering proxy"):e.stat===bd.NOPROXY&&Nd("Connection","Detected no buffering proxy")})),setTimeout((function(){f.$i()}),0),f}}]),n}(function(){function e(t){Te(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.Mi=n+"://"+t.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Ee(e,[{key:"Bi",value:function(e,t,n,r,i){var a=this.Ui(e,t);Nd("RestConnection","Sending: ",a,n);var o={};return this.qi(o,r,i),this.Ki(e,a,o,n).then((function(e){return Nd("RestConnection","Received: ",e),e}),(function(t){throw Pd("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ji",value:function(e,t,n,r,i){return this.Bi(e,t,n,r,i)}},{key:"qi",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Sd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Ui",value:function(e,t){var n=Vk[e];return"".concat(this.Mi,"/v1/").concat(t,":").concat(n)}}]),e}());function Bk(){return"undefined"!=typeof window?window:null}function Hk(){return"undefined"!=typeof document?document:null}function Wk(e){return new Ry(e,!0)}var Kk=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Te(this,e),this.Oe=t,this.timerId=n,this.Wi=r,this.Gi=i,this.zi=a,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}return Ee(e,[{key:"reset",value:function(){this.Hi=0}},{key:"Xi",value:function(){this.Hi=this.zi}},{key:"Zi",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),i=Math.max(0,n-r);i>0&&Nd("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Hi," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,i,(function(){return t.Yi=Date.now(),e()})),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}},{key:"er",value:function(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}},{key:"cancel",value:function(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}},{key:"tr",value:function(){return(Math.random()-.5)*this.Hi}}]),e}(),Gk=function(){function e(t,n,r,i,a,o,u,s){Te(this,e),this.Oe=t,this.nr=r,this.sr=i,this.ir=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new Kk(t,n)}return Ee(e,[{key:"hr",value:function(){return 1===this.state||5===this.state||this.lr()}},{key:"lr",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.dr()}},{key:"stop",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.hr(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"wr",value:function(){this.state=0,this.ur.reset()}},{key:"_r",value:function(){var e=this;this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,(function(){return e.mr()})))}},{key:"gr",value:function(e){this.yr(),this.stream.send(e)}},{key:"mr",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.lr()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"yr",value:function(){this.ar&&(this.ar.cancel(),this.ar=null)}},{key:"pr",value:function(){this.cr&&(this.cr.cancel(),this.cr=null)}},{key:"close",value:function(){var e=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yr(),this.pr(),this.ur.cancel(),this.rr++,4!==t?this.ur.reset():n&&n.code===Ud.RESOURCE_EXHAUSTED?(Rd(n.toString()),Rd("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):n&&n.code===Ud.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Tr(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Ni(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Tr",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Er(this.rr),n=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.rr===n&&e.Ir(i,a)}),(function(n){t((function(){var t=new Fd(Ud.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Ar(t)}))}))}},{key:"Ir",value:function(e,t){var n=this,r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di((function(){r((function(){return n.state=2,n.cr=n.Oe.enqueueAfterDelay(n.sr,1e4,(function(){return n.lr()&&(n.state=3),Promise.resolve()})),n.listener.Di()}))})),this.stream.Ni((function(e){r((function(){return n.Ar(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"dr",value:function(){var e=this;this.state=5,this.ur.Zi(be(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Ar",value:function(e){return Nd("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Er",value:function(e){var t=this;return function(n){t.Oe.enqueueAndForget((function(){return t.rr===e?n():(Nd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Qk=function(e){Ae(n,e);var t=Pe(n);function n(e,r,i,a,o,u){var s;return Te(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).k=o,s}return Ee(n,[{key:"Rr",value:function(e,t){return this.ir.Qi("Listen",e,t)}},{key:"onMessage",value:function(e){this.ur.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Dd()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.C?(Ld(void 0===t||"string"==typeof t),lp.fromBase64String(t||"")):(Ld(void 0===t||t instanceof Uint8Array),lp.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Ud.UNKNOWN:iy(e.code);return new Fd(t,e.message||"")}(o);n=new Ty(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=jy(e,s.document.name),l=Ly(s.document.updateTime),f=new Mp({mapValue:{fields:s.document.fields}}),h=Fp.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new _y(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=jy(e,v.document),m=v.readTime?Ly(v.readTime):tp.min(),g=Fp.newNoDocument(y,m),k=v.removedTargetIds||[];n=new _y([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=jy(e,w.document),_=w.removedTargetIds||[];n=new _y([],_,b,null)}else{if(!("filter"in t))return Dd();t.filter;var x=t.filter;x.targetId;var T=x.count||0,I=new ny(T),E=x.targetId;n=new xy(E,I)}return n}(this.k,e),n=function(e){if(!("targetChange"in e))return tp.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?tp.min():t.readTime?Ly(t.readTime):tp.min()}(e);return this.listener.Pr(t,n)}},{key:"br",value:function(e){var t={};t.database=qy(this.k),t.addTarget=function(e,t){var n,r=t.target;return(n=Bp(r)?{documents:$y(e,r)}:{query:Yy(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Oy(e,t.resumeToken):t.snapshotVersion.compareTo(tp.min())>0&&(n.readTime=Py(e,t.snapshotVersion.toTimestamp())),n}(this.k,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Dd()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.k,e);n&&(t.labels=n),this.gr(t)}},{key:"vr",value:function(e){var t={};t.database=qy(this.k),t.removeTarget=e,this.gr(t)}}]),n}(Gk),$k=function(e){Ae(n,e);var t=Pe(n);function n(e,r,i,a,o,u){var s;return Te(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).k=o,s.Vr=!1,s}return Ee(n,[{key:"Sr",get:function(){return this.Vr}},{key:"start",value:function(){this.Vr=!1,this.lastStreamToken=void 0,un(Ne(n.prototype),"start",this).call(this)}},{key:"Tr",value:function(){this.Vr&&this.Dr([])}},{key:"Rr",value:function(e,t){return this.ir.Qi("Write",e,t)}},{key:"onMessage",value:function(e){if(Ld(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();var t=function(e,t){return e&&e.length>0?(Ld(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Ly(e.updateTime):Ly(t);return n.isEqual(tp.min())&&(n=Ly(t)),new Fv(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Ly(e.commitTime);return this.listener.Cr(n,t)}return Ld(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}},{key:"kr",value:function(){var e={};e.database=qy(this.k),this.gr(e)}},{key:"Dr",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Gy(t.k,e)}))};this.gr(n)}}]),n}(Gk),Yk=function(e){Ae(n,e);var t=Pe(n);function n(e,r,i,a){var o;return Te(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.ir=i,o.k=a,o.$r=!1,o}return Ee(n,[{key:"Fr",value:function(){if(this.$r)throw new Fd(Ud.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Bi",value:function(e,t,n){var r=this;return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.ir.Bi(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ud.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Fd(Ud.UNKNOWN,e.toString())}))}},{key:"ji",value:function(e,t,n){var r=this;return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.ir.ji(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ud.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Fd(Ud.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.$r=!0}}]),n}(function(){return Ee((function e(){Te(this,e)}))}()),Jk=function(){function e(t,n){Te(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}return Ee(e,[{key:"Br",value:function(){var e=this;0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Mr=null,e.qr("Backend didn't respond within 10 seconds."),e.Ur("Offline"),Promise.resolve()})))}},{key:"Kr",value:function(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.Ur("Offline")))}},{key:"set",value:function(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}},{key:"Ur",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"qr",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.Lr?(Rd(t),this.Lr=!1):Nd("OnlineStateTracker",t)}},{key:"jr",value:function(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}]),e}(),Xk=Ee((function e(t,n,r,i,a){var o=this;Te(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=a,this.Hr.Ei((function(e){r.enqueueAndForget(be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=cw(o),!e.t0){e.next=5;break}return Nd("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Md(t)).Gr.add(4),e.next=4,tw(n);case 4:return n.Jr.set("Unknown"),n.Gr.delete(4),e.next=8,Zk(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.Jr=new Jk(r,i)}));function Zk(e){return ew.apply(this,arguments)}function ew(){return ew=be(ke().mark((function e(t){var n,r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!cw(t)){e.next=18;break}n=Se(t.zr),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),ew.apply(this,arguments)}function tw(e){return nw.apply(this,arguments)}function nw(){return nw=be(ke().mark((function e(t){var n,r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Se(t.zr),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),nw.apply(this,arguments)}function rw(e,t){var n=Md(e);n.Wr.has(t.targetId)||(n.Wr.set(t.targetId,t),sw(n)?uw(n):Mw(n).lr()&&aw(n,t))}function iw(e,t){var n=Md(e),r=Mw(n);n.Wr.delete(t),r.lr()&&ow(n,t),0===n.Wr.size&&(r.lr()?r._r():cw(n)&&n.Jr.set("Unknown"))}function aw(e,t){e.Yr.X(t.targetId),Mw(e).br(t)}function ow(e,t){e.Yr.X(t),Mw(e).vr(t)}function uw(e){e.Yr=new Ey({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.Wr.get(t)||null}}),Mw(e).start(),e.Jr.Br()}function sw(e){return cw(e)&&!Mw(e).hr()&&e.Wr.size>0}function cw(e){return 0===Md(e).Gr.size}function lw(e){e.Yr=void 0}function fw(e){return hw.apply(this,arguments)}function hw(){return hw=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Wr.forEach((function(e,n){aw(t,e)}));case 1:case"end":return e.stop()}}),e)}))),hw.apply(this,arguments)}function dw(e,t){return pw.apply(this,arguments)}function pw(){return pw=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:lw(t),sw(t)?(t.Jr.Kr(n),uw(t)):t.Jr.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),pw.apply(this,arguments)}function vw(e,t,n){return yw.apply(this,arguments)}function yw(){return yw=be(ke().mark((function e(t,n,r){var i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Jr.set("Online"),!(n instanceof Ty&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=be(ke().mark((function e(t,n){var r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Se(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Wr.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Wr.delete(o),t.Yr.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Nd("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,mw(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof _y?t.Yr.ot(n):n instanceof xy?t.Yr.dt(n):t.Yr.ut(n),r.isEqual(tp.min())){e.next=29;break}return e.prev=14,e.next=17,nk(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Yr.gt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Wr.get(r);i&&e.Wr.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.Wr.get(t);if(n){e.Wr.set(t,n.withResumeToken(lp.EMPTY_BYTE_STRING,n.snapshotVersion)),ow(e,t);var r=new Km(n.target,t,1,n.sequenceNumber);aw(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Nd("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,mw(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),yw.apply(this,arguments)}function mw(e,t,n){return gw.apply(this,arguments)}function gw(){return gw=be(ke().mark((function e(t,n,r){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Um(n)){e.next=2;break}throw n;case 2:return t.Gr.add(1),e.next=5,tw(t);case 5:t.Jr.set("Offline"),r||(r=function(){return nk(t.localStore)}),t.asyncQueue.enqueueRetryable(be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nd("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Gr.delete(1),e.next=6,Zk(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),gw.apply(this,arguments)}function kw(e,t){return t().catch((function(n){return mw(e,n,t)}))}function ww(e){return bw.apply(this,arguments)}function bw(){return bw=be(ke().mark((function e(t){var n,r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Md(t),r=Uw(n),i=n.Qr.length>0?n.Qr[n.Qr.length-1].batchId:-1;case 2:if(!_w(n)){e.next=19;break}return e.prev=3,e.next=6,ak(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Qr.length&&r._r(),e.abrupt("break",19);case 10:i=a.batchId,xw(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,mw(n,e.t0);case 17:e.next=2;break;case 19:Tw(n)&&Iw(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),bw.apply(this,arguments)}function _w(e){return cw(e)&&e.Qr.length<10}function xw(e,t){e.Qr.push(t);var n=Uw(e);n.lr()&&n.Sr&&n.Dr(t.mutations)}function Tw(e){return cw(e)&&!Uw(e).hr()&&e.Qr.length>0}function Iw(e){Uw(e).start()}function Ew(e){return Sw.apply(this,arguments)}function Sw(){return Sw=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Uw(t).kr();case 1:case"end":return e.stop()}}),e)}))),Sw.apply(this,arguments)}function Cw(e){return Aw.apply(this,arguments)}function Aw(){return Aw=be(ke().mark((function e(t){var n,r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Uw(t),r=Se(t.Qr);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Dr(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Aw.apply(this,arguments)}function Nw(e,t,n){return Rw.apply(this,arguments)}function Rw(){return Rw=be(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Qr.shift(),a=Wm.from(i,n,r),e.next=3,kw(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,ww(t);case 5:case"end":return e.stop()}}),e)}))),Rw.apply(this,arguments)}function Pw(e,t){return Ow.apply(this,arguments)}function Ow(){return Ow=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Uw(t).Sr,!e.t0){e.next=4;break}return e.next=4,function(){var e=be(ke().mark((function e(t,n){var r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ry(i=n.code)||i===Ud.ABORTED){e.next=7;break}return r=t.Qr.shift(),Uw(t).wr(),e.next=5,kw(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,ww(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Tw(t)&&Iw(t);case 5:case"end":return e.stop()}}),e)}))),Ow.apply(this,arguments)}function Dw(e,t){return Lw.apply(this,arguments)}function Lw(){return Lw=be(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Md(t),!n){e.next=7;break}return r.Gr.delete(2),e.next=5,Zk(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Gr.add(2),e.next=12,tw(r);case 12:r.Jr.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Lw.apply(this,arguments)}function Mw(e){return e.Xr||(e.Xr=function(e,t,n){var r=Md(e);return r.Fr(),new Qk(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:fw.bind(null,e),Ni:dw.bind(null,e),Pr:vw.bind(null,e)}),e.zr.push(function(){var t=be(ke().mark((function t(n){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Xr.wr(),sw(e)?uw(e):e.Jr.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Xr.stop();case 6:lw(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Xr}function Uw(e){return e.Zr||(e.Zr=function(e,t,n){var r=Md(e);return r.Fr(),new $k(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:Ew.bind(null,e),Ni:Pw.bind(null,e),Nr:Cw.bind(null,e),Cr:Nw.bind(null,e)}),e.zr.push(function(){var t=be(ke().mark((function t(n){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Zr.wr(),t.next=4,ww(e);case 4:t.next=9;break;case 6:return t.next=8,e.Zr.stop();case 8:e.Qr.length>0&&(Nd("RemoteStore","Stopping write stream with ".concat(e.Qr.length," pending writes")),e.Qr=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Zr}var Fw=function(){function e(t,n,r,i,a){Te(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new jd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Ee(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fd(Ud.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function jw(e,t){if(Rd("AsyncQueue","".concat(t,": ").concat(e)),Um(e))return new Fd(Ud.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Vw=function(){function e(t){Te(this,e),this.comparator=t?function(e,n){return t(e,n)||bp.comparator(e.key,n.key)}:function(e,t){return bp.comparator(e.key,t.key)},this.keyedMap=dy(),this.sortedSet=new ay(this.comparator)}return Ee(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),zw=function(){function e(){Te(this,e),this.eo=new ay(bp.comparator)}return Ee(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.eo.get(t);n?0!==e.type&&3===n.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==n.type?this.eo=this.eo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.eo=this.eo.remove(t):1===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):Dd():this.eo=this.eo.insert(t,e)}},{key:"no",value:function(){var e=[];return this.eo.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),qw=function(){function e(t,n,r,i,a,o,u,s){Te(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return Ee(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Vw.emptySet(n),a,r,i,!0,!1)}}]),e}(),Bw=Ee((function e(){Te(this,e),this.so=void 0,this.listeners=[]})),Hw=Ee((function e(){Te(this,e),this.queries=new Og((function(e){return mv(e)}),yv),this.onlineState="Unknown",this.io=new Set}));function Ww(e,t){return Kw.apply(this,arguments)}function Kw(){return Kw=be(ke().mark((function e(t,n){var r,i,a,o,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Md(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Bw),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.so=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=jw(e.t0,"Initialization of query '".concat(gv(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.ro(r.onlineState),o.so&&n.oo(o.so)&&Jw(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Kw.apply(this,arguments)}function Gw(e,t){return Qw.apply(this,arguments)}function Qw(){return Qw=be(ke().mark((function e(t,n){var r,i,a,o,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Md(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Qw.apply(this,arguments)}function $w(e,t){var n,r=Md(e),i=!1,a=Se(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Se(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.oo(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.so=o}}}catch(f){a.e(f)}finally{a.f()}i&&Jw(r)}function Yw(e,t,n){var r=Md(e),i=r.queries.get(t);if(i){var a,o=Se(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Jw(e){e.io.forEach((function(e){e.next()}))}var Xw=function(){function e(t,n,r){Te(this,e),this.query=t,this.ao=n,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}return Ee(e,[{key:"oo",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Se(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new qw(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.co?this.ho(e)&&(this.ao.next(e),a=!0):this.lo(e,this.onlineState)&&(this.fo(e),a=!0),this.uo=e,a}},{key:"onError",value:function(e){this.ao.error(e)}},{key:"ro",value:function(e){this.onlineState=e;var t=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}},{key:"lo",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.wo||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"ho",value:function(e){if(e.docChanges.length>0)return!0;var t=this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"fo",value:function(e){e=qw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}]),e}(),Zw=function(){function e(t,n){Te(this,e),this.payload=t,this.byteLength=n}return Ee(e,[{key:"_o",value:function(){return"metadata"in this.payload}}]),e}(),eb=function(){function e(t){Te(this,e),this.k=t}return Ee(e,[{key:"Hn",value:function(e){return jy(this.k,e)}},{key:"Jn",value:function(e){return e.metadata.exists?Wy(this.k,e.document,!1):Fp.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}},{key:"Yn",value:function(e){return Ly(e)}}]),e}(),tb=function(){function e(t,n,r){Te(this,e),this.mo=t,this.localStore=n,this.k=r,this.queries=[],this.documents=[],this.progress=nb(t)}return Ee(e,[{key:"yo",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"po",value:function(e){var t,n=new Map,r=new eb(this.k),i=Se(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Hn(a.metadata.name),s=Se(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||my()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=be(ke().mark((function e(){var t,n,r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pk(this.localStore,new eb(this.k),this.documents,this.mo.id);case 2:t=e.sent,n=this.po(this.documents),r=Se(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,yk(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",new Gg(Object.assign({},this.progress),t)));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function nb(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var rb=Ee((function e(t){Te(this,e),this.key=t})),ib=Ee((function e(t){Te(this,e),this.key=t})),ab=function(){function e(t,n){Te(this,e),this.query=t,this.To=n,this.Eo=null,this.current=!1,this.Io=my(),this.mutatedKeys=my(),this.Ao=wv(t),this.Ro=new Vw(this.Ao)}return Ee(e,[{key:"Po",get:function(){return this.To}},{key:"bo",value:function(e,t){var n=this,r=t?t.vo:new zw,i=t?t.Ro:this.Ro,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=sv(this.query)&&i.size===this.query.limit?i.last():null,c=cv(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=kv(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Vo(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Ao(f,s)>0||c&&n.Ao(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),sv(this.query)||cv(this.query))for(;o.size>this.query.limit;){var l=sv(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Ro:o,vo:r,Bn:u,mutatedKeys:a}}},{key:"Vo",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;var a=e.vo.no();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dd()}};return n(e)-n(t)}(e.type,t.type)||r.Ao(e.doc,t.doc)})),this.So(n);var o=t?this.Do():[],u=0===this.Io.size&&this.current?1:0,s=u!==this.Eo;return this.Eo=u,0!==a.length||s?{snapshot:new qw(this.query,e.Ro,i,a,e.mutatedKeys,0===u,s,!1),Co:o}:{Co:o}}},{key:"ro",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new zw,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}},{key:"No",value:function(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}},{key:"So",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.To=t.To.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.To=t.To.delete(e)})),this.current=e.current)}},{key:"Do",value:function(){var e=this;if(!this.current)return[];var t=this.Io;this.Io=my(),this.Ro.forEach((function(t){e.No(t.key)&&(e.Io=e.Io.add(t.key))}));var n=[];return t.forEach((function(t){e.Io.has(t)||n.push(new ib(t))})),this.Io.forEach((function(e){t.has(e)||n.push(new rb(e))})),n}},{key:"ko",value:function(e){this.To=e.zn,this.Io=my();var t=this.bo(e.documents);return this.applyChanges(t,!0)}},{key:"xo",value:function(){return qw.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}]),e}(),ob=Ee((function e(t,n,r){Te(this,e),this.query=t,this.targetId=n,this.view=r})),ub=Ee((function e(t){Te(this,e),this.key=t,this.$o=!1})),sb=function(){function e(t,n,r,i,a,o){Te(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Fo={},this.Oo=new Og((function(e){return mv(e)}),yv),this.Mo=new Map,this.Lo=new Set,this.Bo=new ay(bp.comparator),this.Uo=new Map,this.qo=new kk,this.Ko={},this.jo=new Map,this.Qo=wg.re(),this.onlineState="Unknown",this.Wo=void 0}return Ee(e,[{key:"isPrimaryClient",get:function(){return!0===this.Wo}}]),e}();function cb(e,t){return lb.apply(this,arguments)}function lb(){return lb=be(ke().mark((function e(t,n){var r,i,a,o,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n_(t),!(o=r.Oo.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.xo(),e.next=15;break;case 6:return e.next=8,ok(r.localStore,pv(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,fb(r,n,i,"current"===s);case 13:a=e.sent,r.isPrimaryClient&&rw(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),lb.apply(this,arguments)}function fb(e,t,n,r){return hb.apply(this,arguments)}function hb(){return hb=be(ke().mark((function e(t,n,r,i){var a,o,u,s,c,l;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Go=function(e,n,r){return function(){var e=be(ke().mark((function e(t,n,r,i){var a,o,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.bo(r),e.t0=a.Bn,!e.t0){e.next=6;break}return e.next=5,ck(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.bo(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Pb(t,n.targetId,u.Co),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,ck(t.localStore,n,!0);case 3:return a=e.sent,o=new ab(n,a.zn),u=o.bo(a.documents),s=by.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),Pb(t,r,c.Co),l=new ob(n,r,o),e.abrupt("return",(t.Oo.set(n,l),t.Mo.has(r)?t.Mo.get(r).push(n):t.Mo.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),hb.apply(this,arguments)}function db(e,t){return pb.apply(this,arguments)}function pb(){return pb=be(ke().mark((function e(t,n){var r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Md(t),i=r.Oo.get(n),!((a=r.Mo.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Mo.set(i.targetId,a.filter((function(e){return!yv(e,n)}))),void r.Oo.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,uk(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),iw(r.remoteStore,i.targetId),Nb(r,i.targetId)})).catch(Ig);case 9:e.next=14;break;case 11:return Nb(r,i.targetId),e.next=14,uk(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),pb.apply(this,arguments)}function vb(e,t,n){return yb.apply(this,arguments)}function yb(){return yb=be(ke().mark((function e(t,n,r){var i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r_(t),e.prev=1,e.next=4,function(e,t){var n,r=Md(e),i=ep.now(),a=t.reduce((function(e,t){return e.add(t.key)}),my());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Wn.vn(e,a).next((function(a){n=a;var o,u=[],s=Se(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Hv(c,n.get(c.key));null!=l&&u.push(new Qv(c.key,l,Up(l.value.mapValue),jv.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.An.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Ko[e.currentUser.toKey()];r||(r=new ay(Jd)),r=r.insert(t,n),e.Ko[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Lb(i,a.changes);case 9:return e.next=11,ww(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=jw(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),yb.apply(this,arguments)}function mb(e,t){return gb.apply(this,arguments)}function gb(){return gb=be(ke().mark((function e(t,n){var r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Md(t),e.prev=1,e.next=4,rk(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Uo.get(t);n&&(Ld(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.$o=!0:e.modifiedDocuments.size>0?Ld(n.$o):e.removedDocuments.size>0&&(Ld(n.$o),n.$o=!1))})),e.next=8,Lb(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Ig(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),gb.apply(this,arguments)}function kb(e,t,n){var r=Md(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Oo.forEach((function(e,n){var r=n.view.ro(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Md(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Se(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.ro(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Jw(n)}(r.eventManager,t),i.length&&r.Fo.Pr(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function wb(e,t,n){return bb.apply(this,arguments)}function bb(){return bb=be(ke().mark((function e(t,n,r){var i,a,o,u,s,c;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Md(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Uo.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new ay(bp.comparator)).insert(o,Fp.newNoDocument(o,tp.min())),s=my().add(o),c=new wy(tp.min(),new Map,new sy(Jd),u,s),e.next=9,mb(i,c);case 9:i.Bo=i.Bo.remove(o),i.Uo.delete(n),Db(i),e.next=16;break;case 14:return e.next=16,uk(i.localStore,n,!1).then((function(){return Nb(i,n,r)})).catch(Ig);case 16:case"end":return e.stop()}}),e)}))),bb.apply(this,arguments)}function _b(e,t){return xb.apply(this,arguments)}function xb(){return xb=be(ke().mark((function e(t,n){var r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Md(t),i=n.batch.batchId,e.prev=1,e.next=4,tk(r.localStore,n);case 4:return a=e.sent,Ab(r,i,null),Cb(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Lb(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ig(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),xb.apply(this,arguments)}function Tb(e,t,n){return Ib.apply(this,arguments)}function Ib(){return Ib=be(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Md(t),e.prev=1,e.next=4,function(e,t){var n=Md(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.An.lookupMutationBatch(e,t).next((function(t){return Ld(null!==t),r=t.keys(),n.An.removeMutationBatch(e,t)})).next((function(){return n.An.performConsistencyCheck(e)})).next((function(){return n.Wn.vn(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Ab(i,n,r),Cb(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Lb(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ig(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Ib.apply(this,arguments)}function Eb(e,t){return Sb.apply(this,arguments)}function Sb(){return Sb=be(ke().mark((function e(t,n){var r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cw((r=Md(t)).remoteStore)||Nd("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Md(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.An.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.jo.get(i)||[]).push(n),r.jo.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=jw(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Sb.apply(this,arguments)}function Cb(e,t){(e.jo.get(t)||[]).forEach((function(e){e.resolve()})),e.jo.delete(t)}function Ab(e,t,n){var r=Md(e),i=r.Ko[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Ko[r.currentUser.toKey()]=i}}function Nb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Se(e.Mo.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Oo.delete(a),n&&e.Fo.zo(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Mo.delete(t),e.isPrimaryClient&&e.qo.us(t).forEach((function(t){e.qo.containsKey(t)||Rb(e,t)}))}function Rb(e,t){e.Lo.delete(t.path.canonicalString());var n=e.Bo.get(t);null!==n&&(iw(e.remoteStore,n),e.Bo=e.Bo.remove(t),e.Uo.delete(n),Db(e))}function Pb(e,t,n){var r,i=Se(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof rb?(e.qo.addReference(a.key,t),Ob(e,a)):a instanceof ib?(Nd("SyncEngine","Document no longer in limbo: "+a.key),e.qo.removeReference(a.key,t),e.qo.containsKey(a.key)||Rb(e,a.key)):Dd()}}catch(o){i.e(o)}finally{i.f()}}function Ob(e,t){var n=t.key,r=n.path.canonicalString();e.Bo.get(n)||e.Lo.has(r)||(Nd("SyncEngine","New document in limbo: "+n),e.Lo.add(r),Db(e))}function Db(e){for(;e.Lo.size>0&&e.Bo.size<e.maxConcurrentLimboResolutions;){var t=e.Lo.values().next().value;e.Lo.delete(t);var n=new bp(op.fromString(t)),r=e.Qo.next();e.Uo.set(r,new ub(n)),e.Bo=e.Bo.insert(n,r),rw(e.remoteStore,new Km(pv(uv(n.path)),r,2,Qd.I))}}function Lb(e,t,n){return Mb.apply(this,arguments)}function Mb(){return Mb=be(ke().mark((function e(t,n,r){var i,a,o,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Md(t),a=[],o=[],u=[],e.t0=i.Oo.isEmpty(),e.t0){e.next=9;break}return i.Oo.forEach((function(e,t){u.push(i.Go(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=$g.$n(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Fo.Pr(a),e.next=9,function(){var e=be(ke().mark((function e(t,n){var r,i,a,o,u,s,c,l;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Md(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Pm.forEach(n,(function(t){return Pm.forEach(t.kn,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Pm.forEach(t.xn,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Um(e.t0)){e.next=10;break}throw e.t0;case 10:Nd("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Se(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.qn.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.qn=r.qn.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Mb.apply(this,arguments)}function Ub(e,t){return Fb.apply(this,arguments)}function Fb(){return Fb=be(ke().mark((function e(t,n){var r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Md(t)).currentUser.isEqual(n)){e.next=11;break}return Nd("SyncEngine","User change. New user:",n.toKey()),e.next=5,Zg(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.jo.forEach((function(e){e.forEach((function(e){e.reject(new Fd(Ud.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.jo.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Lb(r,i.Gn);case 11:case"end":return e.stop()}}),e)}))),Fb.apply(this,arguments)}function jb(e,t){var n=Md(e),r=n.Uo.get(t);if(r&&r.$o)return my().add(r.key);var i=my(),a=n.Mo.get(t);if(!a)return i;var o,u=Se(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.Oo.get(s);i=i.unionWith(c.view.Po)}}catch(l){u.e(l)}finally{u.f()}return i}function Vb(e,t){return zb.apply(this,arguments)}function zb(){return zb=be(ke().mark((function e(t,n){var r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Md(t),e.next=3,ck(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ko(i),e.abrupt("return",(r.isPrimaryClient&&Pb(r,n.targetId,a.Co),a));case 6:case"end":return e.stop()}}),e)}))),zb.apply(this,arguments)}function qb(e){return Bb.apply(this,arguments)}function Bb(){return Bb=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Md(t),e.abrupt("return",fk(n.localStore).then((function(e){return Lb(n,e)})));case 2:case"end":return e.stop()}}),e)}))),Bb.apply(this,arguments)}function Hb(e,t,n,r){return Wb.apply(this,arguments)}function Wb(){return Wb=be(ke().mark((function e(t,n,r,i){var a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Md(t),e.next=3,function(e,t){var n=Md(e),r=Md(n.An);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Zt(e,t).next((function(t){return t?n.Wn.vn(e,t):Pm.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,ww(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Ab(a,n,i||null),Cb(a,n),function(e,t){Md(Md(e).An).ee(t)}(a.localStore,n)):Dd();case 11:return e.next=13,Lb(a,o);case 13:e.next=16;break;case 15:Nd("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Wb.apply(this,arguments)}function Kb(e,t){return Gb.apply(this,arguments)}function Gb(){return Gb=be(ke().mark((function e(t,n){var r,i,a,o,u,s,c,l;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n_(r=Md(t)),r_(r),!0!==n||!0===r.Wo){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Qb(r,i.toArray());case 5:return a=e.sent,r.Wo=!0,e.next=9,Dw(r.remoteStore,!0);case 9:o=Se(a);try{for(o.s();!(u=o.n()).done;)s=u.value,rw(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Wo){e.next=25;break}return c=[],l=Promise.resolve(),r.Mo.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Nb(r,t),uk(r.localStore,t,!0)})),iw(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Qb(r,c);case 21:return function(e){var t=Md(e);t.Uo.forEach((function(e,n){iw(t.remoteStore,n)})),t.qo.hs(),t.Uo=new Map,t.Bo=new ay(bp.comparator)}(r),r.Wo=!1,e.next=25,Dw(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Gb.apply(this,arguments)}function Qb(e,t,n){return $b.apply(this,arguments)}function $b(){return $b=be(ke().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Md(t),a=[],o=[],u=Se(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.Mo.get(c))||0===f.length){e.next=34;break}return e.next=11,ok(i.localStore,pv(f[0]));case 11:l=e.sent,h=Se(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.Oo.get(p),e.next=20,Vb(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,lk(i.localStore,c);case 36:return m=e.sent,e.next=39,ok(i.localStore,m);case 39:return l=e.sent,e.next=42,fb(i,Yb(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Fo.Pr(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),$b.apply(this,arguments)}function Yb(e){return ov(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Jb(e){var t=Md(e);return Md(Md(t.localStore).persistence).Tn()}function Xb(e,t,n,r){return Zb.apply(this,arguments)}function Zb(){return Zb=be(ke().mark((function e(t,n,r,i){var a,o,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Md(t)).Wo){e.next=5;break}Nd("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.Mo.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,fk(a.localStore);case 11:return o=e.sent,u=wy.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,Lb(a,o,u);case 15:return e.abrupt("break",21);case 16:return e.next=18,uk(a.localStore,n,!0);case 18:return Nb(a,n,i),e.abrupt("break",21);case 20:Dd();case 21:case"end":return e.stop()}}),e)}))),Zb.apply(this,arguments)}function e_(e,t,n){return t_.apply(this,arguments)}function t_(){return t_=be(ke().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=n_(t)).Wo){e.next=45;break}a=Se(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.Mo.has(u)){e.next=10;break}return Nd("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,lk(i.localStore,u);case 12:return s=e.sent,e.next=15,ok(i.localStore,s);case 15:return c=e.sent,e.next=18,fb(i,Yb(s),c.targetId,!1);case 18:rw(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Se(r),e.prev=30,h=ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.Mo.has(t),!e.t0){e.next=5;break}return e.next=5,uk(i.localStore,t,!1).then((function(){iw(i.remoteStore,t),Nb(i,t)})).catch(Ig);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),t_.apply(this,arguments)}function n_(e){var t=Md(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=mb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=jb.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=wb.bind(null,t),t.Fo.Pr=$w.bind(null,t.eventManager),t.Fo.zo=Yw.bind(null,t.eventManager),t}function r_(e){var t=Md(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_b.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Tb.bind(null,t),t}function i_(e,t,n){var r=Md(e);(function(){var e=be(ke().mark((function e(t,n,r){var i,a,o,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Md(e),r=Ly(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ye.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)));case 10:return r._updateProgress(nb(i)),a=new tb(i,t.localStore,n.k),e.next=14,n.Ho();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.yo(o);case 18:return(u=e.sent)&&r._updateProgress(u),e.next=22,n.Ho();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return s=e.sent,e.next=30,Lb(t,s.In,void 0);case 30:return e.next=32,function(e,t){var n=Md(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ye.saveBundleMetadata(e,t)}))}(t.localStore,i);case 32:r._completeWith(s.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),Pd("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var a_=function(){function e(){Te(this,e),this.synchronizeTabs=!1}return Ee(e,[{key:"initialize",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.k=Wk(t.databaseInfo.databaseId),this.sharedClientState=this.Jo(t),this.persistence=this.Yo(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.Xo(t),this.localStore=this.Zo(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Xo",value:function(e){return null}},{key:"Zo",value:function(e){return Xg(this.persistence,new Yg,e.initialUser,this.k)}},{key:"Yo",value:function(e){return new Ik(Sk.ks,this.k)}},{key:"Jo",value:function(e){return new Uk}},{key:"terminate",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),o_=function(e){Ae(n,e);var t=Pe(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this)).ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Ee(n,[{key:"initialize",value:function(){var e=be(ke().mark((function e(t){var r=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,un(Ne(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,hk(this.localStore);case 4:return e.next=6,this.ta.initialize(this,t);case 6:return e.next=8,r_(this.ta.syncEngine);case 8:return e.next=10,ww(this.ta.remoteStore);case 10:return e.next=12,this.persistence.sn((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Zo",value:function(e){return Xg(this.persistence,new Yg,e.initialUser,this.k)}},{key:"Xo",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Ag(t,e.asyncQueue)}},{key:"Yo",value:function(e){var t=Kg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?hg.withCacheSize(this.cacheSizeBytes):hg.DEFAULT;return new Bg(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Bk(),Hk(),this.k,this.sharedClientState,!!this.forceOwnership)}},{key:"Jo",value:function(e){return new Uk}}]),n}(a_),u_=function(e){Ae(n,e);var t=Pe(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e,r,!1)).ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Ee(n,[{key:"initialize",value:function(){var e=be(ke().mark((function e(t){var r,i=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,un(Ne(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ta.syncEngine,e.t0=this.sharedClientState instanceof Mk,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={mi:Hb.bind(null,r),gi:Xb.bind(null,r),yi:e_.bind(null,r),Tn:Jb.bind(null,r),_i:qb.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.sn(function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kb(i.ta.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Jo",value:function(e){var t=Bk();if(!Mk.bt(t))throw new Fd(Ud.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Kg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Mk(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(o_),s_=function(){function e(){Te(this,e)}return Ee(e,[{key:"initialize",value:function(){var e=be(ke().mark((function e(t,n){var r=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return kb(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Ub.bind(null,this.syncEngine),e.next=12,Dw(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Hw}},{key:"createDatastore",value:function(e){var t,n=Wk(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new qk(t));return function(e,t,n,r){return new Yk(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return kb(o.syncEngine,e,0)},a=jk.bt()?new jk:new Fk,new Xk(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new sb(e,t,n,r,i,a);return o&&(u.Wo=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Md(t),Nd("RemoteStore","RemoteStore shutting down."),n.Gr.add(5),e.next=5,tw(n);case 5:n.Hr.shutdown(),n.Jr.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function c_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return be(ke().mark((function r(){var i;return ke().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var l_=function(){function e(t){Te(this,e),this.observer=t,this.muted=!1}return Ee(e,[{key:"next",value:function(e){this.observer.next&&this.ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"na",value:function(){this.muted=!0}},{key:"ea",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),f_=function(){function e(t,n){var r=this;Te(this,e),this.sa=t,this.k=n,this.metadata=new jd,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then((function(e){e&&e._o()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return Ee(e,[{key:"close",value:function(){return this.sa.cancel()}},{key:"getMetadata",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.ra());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ra",value:function(){var e=be(ke().mark((function e(){var t,n,r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.oa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ia.decode(t),r=Number(n),isNaN(r)&&this.aa("length string (".concat(n,") is not valid number")),e.next=9,this.ca(r);case 9:return i=e.sent,e.abrupt("return",new Zw(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ua",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"oa",value:function(){var e=be(ke().mark((function e(){var t,n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.ua()<0)){e.next=7;break}return e.next=3,this.ha();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.ua())<0&&this.aa("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ca",value:function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.ha();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.aa("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ia.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"aa",value:function(e){throw this.sa.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"ha",value:function(){var e=be(ke().mark((function e(){var t,n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sa.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),h_=function(){function e(t){Te(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Ee(e,[{key:"lookup",value:function(){var e=be(ke().mark((function e(t){var n,r=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Fd(Ud.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=be(ke().mark((function e(t,n){var r,i,a,o,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Md(t),i=qy(r.k)+"/documents",a={documents:n.map((function(e){return Fy(r.k,e)}))},e.next=5,r.ji("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Ky(r.k,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Ld(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new ey(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=be(ke().mark((function e(){var t,n=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=bp.fromPath(t);n.mutations.push(new ty(r,n.precondition(r)))})),e.next=7,function(){var e=be(ke().mark((function e(t,n){var r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Md(t),i=qy(r.k)+"/documents",a={writes:n.map((function(e){return Gy(r.k,e)}))},e.next=3,r.Bi("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Dd();t=tp.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Fd(Ud.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?jv.updateTime(t):jv.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(tp.min()))throw new Fd(Ud.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jv.updateTime(t)}return jv.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),d_=function(){function e(t,n,r,i){Te(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.la=5,this.ur=new Kk(this.asyncQueue,"transaction_retry")}return Ee(e,[{key:"run",value:function(){this.la-=1,this.fa()}},{key:"fa",value:function(){var e=this;this.ur.Zi(be(ke().mark((function t(){var n,r;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new h_(e.datastore),(r=e.da(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.wa(t)}))}))})).catch((function(t){e.wa(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"da",value:function(e){try{var t=this.updateFunction(e);return!gp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"wa",value:function(e){var t=this;this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget((function(){return t.fa(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"_a",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!ry(t)}return!1}}]),e}(),p_=function(){function e(t,n,r,i){var a=this;Te(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ed.UNAUTHENTICATED,this.clientId=Yd.A(),this.authCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nd("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(){return Promise.resolve()}))}return Ee(e,[{key:"getConfiguration",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Fd(Ud.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new jd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(be(ke().mark((function n(){var r;return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=jw(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function v_(e,t){return y_.apply(this,arguments)}function y_(){return y_=be(ke().mark((function e(t,n){var r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Nd("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Zg(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),y_.apply(this,arguments)}function m_(e,t){return g_.apply(this,arguments)}function g_(){return g_=be(ke().mark((function e(t,n){var r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,k_(t);case 3:return r=e.sent,Nd("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return function(){var e=be(ke().mark((function e(t,n){var r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Md(t)).asyncQueue.verifyOperationInProgress(),Nd("RemoteStore","RemoteStore received new credentials"),i=cw(r),r.Gr.add(3),e.next=6,tw(r);case 6:return i&&r.Jr.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Gr.delete(3),e.next=12,Zk(r);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(n.remoteStore,e)})),t.onlineComponents=n;case 12:case"end":return e.stop()}}),e)}))),g_.apply(this,arguments)}function k_(e){return w_.apply(this,arguments)}function w_(){return w_=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Nd("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,v_(t,new a_);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),w_.apply(this,arguments)}function b_(e){return __.apply(this,arguments)}function __(){return __=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Nd("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,m_(t,new s_);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),__.apply(this,arguments)}function x_(e){return k_(e).then((function(e){return e.persistence}))}function T_(e){return k_(e).then((function(e){return e.localStore}))}function I_(e){return b_(e).then((function(e){return e.remoteStore}))}function E_(e){return b_(e).then((function(e){return e.syncEngine}))}function S_(e){return C_.apply(this,arguments)}function C_(){return C_=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b_(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=cb.bind(null,n.syncEngine),r.onUnlisten=db.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),C_.apply(this,arguments)}function A_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new jd;return e.asyncQueue.enqueueAndForget(be(ke().mark((function i(){return ke().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new l_({next:function(a){t.enqueueAndForget((function(){return Gw(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Fd(Ud.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Fd(Ud.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Xw(uv(n.path),a,{includeMetadataChanges:!0,wo:!0});return Ww(e,o)},i.next=3,S_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function N_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new jd;return e.asyncQueue.enqueueAndForget(be(ke().mark((function i(){return ke().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new l_({next:function(n){t.enqueueAndForget((function(){return Gw(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Fd(Ud.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Xw(n,a,{includeMetadataChanges:!0,wo:!0});return Ww(e,o)},i.next=3,S_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var R_=Ee((function e(t,n,r,i,a,o,u,s){Te(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),P_=function(){function e(t,n){Te(this,e),this.projectId=t,this.database=n||"(default)"}return Ee(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}]),e}(),O_=new Map;function D_(e,t,n){if(!n)throw new Fd(Ud.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function L_(e,t,n,r){if(!0===t&&!0===r)throw new Fd(Ud.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function M_(e){if(!bp.isDocumentKey(e))throw new Fd(Ud.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function U_(e){if(bp.isDocumentKey(e))throw new Fd(Ud.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function F_(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Dd()}function j_(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Fd(Ud.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=F_(e);throw new Fd(Ud.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function V_(e,t){if(t<=0)throw new Fd(Ud.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var z_=function(){function e(t){var n;if(Te(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Fd(Ud.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Fd(Ud.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,L_("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Ee(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),q_=function(){function e(t,n,r){Te(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new z_({}),this._settingsFrozen=!1,t instanceof P_?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Fd(Ud.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new P_(e.options.projectId)}(t))}return Ee(e,[{key:"app",get:function(){if(!this._app)throw new Fd(Ud.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Fd(Ud.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new z_(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new zd;switch(e.type){case"gapi":var t=e.client;return Ld(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Wd(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Fd(Ud.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=O_.get(e);t&&(Nd("ComponentProvider","Removing Datastore"),O_.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();var B_=function(){function e(t,n,r){Te(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Ee(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new W_(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),H_=function(){function e(t,n,r){Te(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Ee(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),W_=function(e){Ae(n,e);var t=Pe(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this,e,r,uv(i)))._path=i,a.type="collection",a}return Ee(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new B_(this.firestore,null,new bp(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(H_);function K_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=st(e),D_("collection","path",t),e instanceof q_){var a=op.fromString.apply(op,[t].concat(r));return U_(a),new W_(e,null,a)}if(!(e instanceof B_||e instanceof W_))throw new Fd(Ud.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(op.fromString.apply(op,[t].concat(r)));return U_(o),new W_(e.firestore,null,o)}function G_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=st(e),1===arguments.length&&(t=Yd.A()),D_("doc","path",t),e instanceof q_){var a=op.fromString.apply(op,[t].concat(r));return M_(a),new B_(e,null,new bp(a))}if(!(e instanceof B_||e instanceof W_))throw new Fd(Ud.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(op.fromString.apply(op,[t].concat(r)));return M_(o),new B_(e.firestore,e instanceof W_?e.converter:null,new bp(o))}function Q_(e,t){return e=st(e),t=st(t),(e instanceof B_||e instanceof W_)&&(t instanceof B_||t instanceof W_)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function $_(e,t){return e=st(e),t=st(t),e instanceof H_&&t instanceof H_&&e.firestore===t.firestore&&yv(e._query,t._query)&&e.converter===t.converter}var Y_=function(){function e(){var t=this;Te(this,e),this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new Kk(this,"async_queue_retry"),this.Ra=function(){var e=Hk();e&&Nd("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ur.er()};var n=Hk();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ra)}return Ee(e,[{key:"isShuttingDown",get:function(){return this.ya}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Pa(),this.ba(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;var t=Hk();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ra)}}},{key:"enqueue",value:function(e){var t=this;if(this.Pa(),this.ya)return new Promise((function(){}));var n=new jd;return this.ba((function(){return t.ya&&t.Ia?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.ga.push(e),t.va()}))}},{key:"va",value:function(){var e=be(ke().mark((function e(){var t=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.ga.length){e.next=14;break}return e.prev=1,e.next=4,this.ga[0]();case 4:this.ga.shift(),this.ur.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Um(e.t0)){e.next=12;break}throw e.t0;case 12:Nd("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.ga.length>0&&this.ur.Zi((function(){return t.va()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(e){var t=this,n=this.ma.then((function(){return t.Ea=!0,e().catch((function(e){t.Ta=e,t.Ea=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Rd("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ea=!1,e}))}));return this.ma=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Pa(),this.Aa.indexOf(e)>-1&&(t=0);var i=Fw.createAndSchedule(this,e,t,n,(function(e){return r.Va(e)}));return this.pa.push(i),i}},{key:"Pa",value:function(){this.Ta&&Dd()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Sa",value:function(){var e=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.ma,e.next=3,t;case 3:if(t!==this.ma){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Da",value:function(e){var t,n=Se(this.pa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Ca",value:function(e){var t=this;return this.Sa().then((function(){t.pa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Se(t.pa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Sa()}))}},{key:"Na",value:function(e){this.Aa.push(e)}},{key:"Va",value:function(e){var t=this.pa.indexOf(e);this.pa.splice(t,1)}}]),e}();function J_(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Se(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var X_=function(){function e(){Te(this,e),this._progressObserver={},this._taskCompletionResolver=new jd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Ee(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Z_=function(e){Ae(n,e);var t=Pe(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new Y_,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return Ee(n,[{key:"_terminate",value:function(){return this._firestoreClient||tx(this),this._firestoreClient.terminate()}}]),n}(q_);function ex(e){return e._firestoreClient||tx(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function tx(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new R_(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new p_(e._authCredentials,e._appCheckCredentials,e._queue,r)}function nx(e,t,n){var r=new jd;return e.asyncQueue.enqueue(be(ke().mark((function i(){return ke().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,v_(e,n);case 3:return i.next=5,m_(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Ud.FAILED_PRECONDITION||e.code===Ud.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function rx(e){return function(e){return e.asyncQueue.enqueue(be(ke().mark((function t(){var n,r;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x_(e);case 2:return n=t.sent,t.next=5,I_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Md(e);return t.Gr.delete(0),Zk(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(ex(e=j_(e,Z_)))}function ix(e){return function(e){return e.asyncQueue.enqueue(be(ke().mark((function t(){var n,r;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x_(e);case 2:return n=t.sent,t.next=5,I_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Md(t)).Gr.add(0),e.next=4,tw(n);case 4:n.Jr.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(ex(e=j_(e,Z_)))}function ax(e,t){var n=ex(e=j_(e,Z_)),r=new X_;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new f_(e,t)}(function(e,t){if(e instanceof Uint8Array)return c_(e,t);if(e instanceof ArrayBuffer)return c_(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Wk(t));e.asyncQueue.enqueueAndForget(be(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=i_,t.next=3,E_(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function ox(e,t){return function(e,t){return e.asyncQueue.enqueue(be(ke().mark((function n(){return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Md(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ye.getNamedQuery(e,t)}))},n.next=3,T_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(ex(e=j_(e,Z_)),t).then((function(t){return t?new H_(e,null,t.query):null}))}function ux(e){if(e._initialized||e._terminated)throw new Fd(Ud.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var sx=function(){function e(){Te(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Fd(Ud.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sp(n)}return Ee(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var cx=function(){function e(t){Te(this,e),this._byteString=t}return Ee(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(lp.fromBase64String(t))}catch(t){throw new Fd(Ud.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(lp.fromUint8Array(t))}}]),e}(),lx=Ee((function e(t){Te(this,e),this._methodName=t})),fx=function(){function e(t,n){if(Te(this,e),!isFinite(t)||t<-90||t>90)throw new Fd(Ud.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Fd(Ud.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Ee(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Jd(this._lat,e._lat)||Jd(this._long,e._long)}}]),e}(),hx=/^__.*__$/,dx=function(){function e(t,n,r){Te(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ee(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Qv(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gv(e,this.data,t,this.fieldTransforms)}}]),e}(),px=function(){function e(t,n,r){Te(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ee(e,[{key:"toMutation",value:function(e,t){return new Qv(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function vx(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dd()}}var yx=function(){function e(t,n,r,i,a,o){Te(this,e),this.settings=t,this.databaseId=n,this.k=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ka(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Ee(e,[{key:"path",get:function(){return this.settings.path}},{key:"xa",get:function(){return this.settings.xa}},{key:"$a",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Fa",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.Ma(e),r}},{key:"La",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.ka(),r}},{key:"Ba",value:function(e){return this.$a({path:void 0,Oa:!0})}},{key:"Ua",value:function(e){return Mx(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ka",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}},{key:"Ma",value:function(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(vx(this.xa)&&hx.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}]),e}(),mx=function(){function e(t,n,r){Te(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.k=r||Wk(t)}return Ee(e,[{key:"ja",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new yx({xa:e,methodName:t,Ka:n,path:sp.emptyPath(),Oa:!1,qa:r},this.databaseId,this.k,this.ignoreUndefinedProperties)}}]),e}();function gx(e){var t=e._freezeSettings(),n=Wk(e._databaseId);return new mx(e._databaseId,!!t.ignoreUndefinedProperties,n)}function kx(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ja(a.merge||a.mergeFields?2:0,t,n,i);Px("Data must be an object, but it was:",o,r);var u,s,c=Nx(r,o);if(a.merge)u=new cp(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Se(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=Ox(t,l.value,n);if(!o.contains(d))throw new Fd(Ud.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));Ux(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new cp(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new dx(new Mp(c),u,s)}var wx=function(e){Ae(n,e);var t=Pe(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ee(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.xa)throw 1===e.xa?e.Ua("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Ua("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(lx);function bx(e,t,n){return new yx({xa:3,Ka:t.settings.Ka,methodName:e._methodName,Oa:n},t.databaseId,t.k,t.ignoreUndefinedProperties)}var _x=function(e){Ae(n,e);var t=Pe(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ee(n,[{key:"_toFieldTransform",value:function(e){return new Uv(e.path,new Av)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(lx),xx=function(e){Ae(n,e);var t=Pe(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e)).Qa=r,i}return Ee(n,[{key:"_toFieldTransform",value:function(e){var t=bx(this,e,!0),n=this.Qa.map((function(e){return Ax(e,t)})),r=new Nv(n);return new Uv(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(lx),Tx=function(e){Ae(n,e);var t=Pe(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e)).Qa=r,i}return Ee(n,[{key:"_toFieldTransform",value:function(e){var t=bx(this,e,!0),n=this.Qa.map((function(e){return Ax(e,t)})),r=new Pv(n);return new Uv(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(lx),Ix=function(e){Ae(n,e);var t=Pe(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e)).Wa=r,i}return Ee(n,[{key:"_toFieldTransform",value:function(e){var t=new Dv(e.k,Tv(e.k,this.Wa));return new Uv(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(lx);function Ex(e,t,n,r){var i=e.ja(1,t,n);Px("Data must be an object, but it was:",i,r);var a=[],o=Mp.empty();rp(r,(function(e,r){var u=Lx(t,e,n);r=st(r);var s=i.La(u);if(r instanceof wx)a.push(u);else{var c=Ax(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new cp(a);return new px(o,u,i.fieldTransforms)}function Sx(e,t,n,r,i,a){var o=e.ja(1,t,n),u=[Ox(t,r,n)],s=[i];if(a.length%2!=0)throw new Fd(Ud.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Ox(t,a[c])),s.push(a[c+1]);for(var l=[],f=Mp.empty(),h=u.length-1;h>=0;--h)if(!Ux(l,u[h])){var d=u[h],p=s[h];p=st(p);var v=o.La(d);if(p instanceof wx)l.push(d);else{var y=Ax(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new cp(l);return new px(f,m,o.fieldTransforms)}function Cx(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ax(n,e.ja(r?4:3,t))}function Ax(e,t){if(Rx(e=st(e)))return Px("Unsupported field value:",t,e),Nx(e,t);if(e instanceof lx)return function(e,t){if(!vx(t.xa))throw t.Ua("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Ua("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Oa&&4!==t.xa)throw t.Ua("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Se(e);try{for(a.s();!(n=a.n()).done;){var o=Ax(n.value,t.Ba(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=st(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Tv(t.k,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=ep.fromDate(e);return{timestampValue:Py(t.k,n)}}if(e instanceof ep){var r=new ep(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Py(t.k,r)}}if(e instanceof fx)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof cx)return{bytesValue:Oy(t.k,e._byteString)};if(e instanceof B_){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Ua("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:My(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Ua("Unsupported field value: ".concat(F_(e)))}(e,t)}function Nx(e,t){var n={};return ip(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):rp(e,(function(e,r){var i=Ax(r,t.Fa(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Rx(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ep||e instanceof fx||e instanceof cx||e instanceof B_||e instanceof lx)}function Px(e,t,n){if(!Rx(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=F_(n);throw"an object"===r?t.Ua(e+" a custom object"):t.Ua(e+" "+r)}}function Ox(e,t,n){if((t=st(t))instanceof sx)return t._internalPath;if("string"==typeof t)return Lx(e,t);throw Mx("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var Dx=new RegExp("[~\\*/\\[\\]]");function Lx(e,t,n){if(t.search(Dx)>=0)throw Mx("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Oe(sx,lt(t.split(".")))._internalPath}catch(r){throw Mx("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Mx(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Fd(Ud.INVALID_ARGUMENT,u+e+s)}function Ux(e,t){return e.some((function(e){return e.isEqual(t)}))}var Fx=function(){function e(t,n,r,i,a){Te(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Ee(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new B_(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new jx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Vx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),jx=function(e){Ae(n,e);var t=Pe(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ee(n,[{key:"data",value:function(){return un(Ne(n.prototype),"data",this).call(this)}}]),n}(Fx);function Vx(e,t){return"string"==typeof t?Lx(e,t):t instanceof sx?t._internalPath:t._delegate._internalPath}var zx=function(){function e(t,n){Te(this,e),this.hasPendingWrites=t,this.fromCache=n}return Ee(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),qx=function(e){Ae(n,e);var t=Pe(n);function n(e,r,i,a,o,u){var s;return Te(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Ee(n,[{key:"exists",value:function(){return un(Ne(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Bx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Vx("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Fx),Bx=function(e){Ae(n,e);var t=Pe(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ee(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return un(Ne(n.prototype),"data",this).call(this,e)}}]),n}(qx),Hx=function(){function e(t,n,r,i){Te(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new zx(i.hasPendingWrites,i.fromCache),this.query=r}return Ee(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Bx(n._firestore,n._userDataWriter,r.key,r,new zx(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Fd(Ud.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new Bx(e._firestore,e._userDataWriter,t.doc.key,t.doc,new zx(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Bx(e._firestore,e._userDataWriter,t.doc.key,t.doc,new zx(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Wx(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function Wx(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dd()}}function Kx(e,t){return e instanceof qx&&t instanceof qx?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Hx&&t instanceof Hx&&e._firestore===t._firestore&&$_(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Gx(e){if(cv(e)&&0===e.explicitOrderBy.length)throw new Fd(Ud.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Qx=Ee((function e(){Te(this,e)}));function $x(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){e=a[i]._apply(e)}return e}var Yx=function(e){Ae(n,e);var t=Pe(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this)).Ga=e,a.za=r,a.Ha=i,a.type="where",a}return Ee(n,[{key:"_apply",value:function(e){var t=gx(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Fd(Ud.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on FieldPath.documentId()."));if("in"===a||"not-in"===a){uT(o,a);var s,c=[],l=Se(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(oT(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=oT(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||uT(o,a),u=Cx(n,"where",o,"in"===a||"not-in"===a);var h=Hp.create(i,a,u);return function(e,t){if(t.V()){var n=fv(e);if(null!==n&&!n.isEqual(t.field))throw new Fd(Ud.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=lv(e);null!==r&&sT(e,t.field,r)}var i=function(e,t){var n,r=Se(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Fd(Ud.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Fd(Ud.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new H_(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new av(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(Qx);var Jx=function(e){Ae(n,e);var t=Pe(n);function n(e,r){var i;return Te(this,n),(i=t.call(this)).Ga=e,i.Ja=r,i.type="orderBy",i}return Ee(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Fd(Ud.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Fd(Ud.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new tv(t,n);return function(e,t){if(null===lv(e)){var n=fv(e);null!==n&&sT(e,n,t.field)}}(e,r),r}(e._query,this.Ga,this.Ja);return new H_(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new av(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(Qx);var Xx=function(e){Ae(n,e);var t=Pe(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this)).type=e,a.Ya=r,a.Xa=i,a}return Ee(n,[{key:"_apply",value:function(e){return new H_(e.firestore,e.converter,vv(e._query,this.Ya,this.Xa))}}]),n}(Qx);var Zx=function(e){Ae(n,e);var t=Pe(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this)).type=e,a.Za=r,a.tc=i,a}return Ee(n,[{key:"_apply",value:function(e){var t=aT(e,this.type,this.Za,this.tc);return new H_(e.firestore,e.converter,function(e,t){return new av(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(Qx);function eT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Zx("startAt",t,!0)}function tT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Zx("startAfter",t,!1)}var nT=function(e){Ae(n,e);var t=Pe(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this)).type=e,a.Za=r,a.tc=i,a}return Ee(n,[{key:"_apply",value:function(e){var t=aT(e,this.type,this.Za,this.tc);return new H_(e.firestore,e.converter,function(e,t){return new av(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(Qx);function rT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new nT("endBefore",t,!0)}function iT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new nT("endAt",t,!1)}function aT(e,t,n,r){if(n[0]=st(n[0]),n[0]instanceof Fx)return function(e,t,n,r,i){if(!r)throw new Fd(Ud.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Se(dv(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Ap(t,r.key));else{var c=r.data.field(s.field);if(vp(c))throw new Fd(Ud.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Fd(Ud.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Zp(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=gx(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Fd(Ud.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Fd(Ud.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!hv(e)&&-1!==c.indexOf("/"))throw new Fd(Ud.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(op.fromString(c));if(!bp.isDocumentKey(l))throw new Fd(Ud.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new bp(l);u.push(Ap(t,f))}else{var h=Cx(n,r,c);u.push(h)}}return new Zp(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function oT(e,t,n){if("string"==typeof(n=st(n))){if(""===n)throw new Fd(Ud.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!hv(t)&&-1!==n.indexOf("/"))throw new Fd(Ud.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(op.fromString(n));if(!bp.isDocumentKey(r))throw new Fd(Ud.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ap(e,new bp(r))}if(n instanceof B_)return Ap(e,n._key);throw new Fd(Ud.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(F_(n),"."))}function uT(e,t){if(!Array.isArray(e)||0===e.length)throw new Fd(Ud.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Fd(Ud.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function sT(e,t,n){if(!n.isEqual(t))throw new Fd(Ud.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var cT=function(){function e(){Te(this,e)}return Ee(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(_p(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dp(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Dd()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return rp(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new fx(dp(e.latitude),dp(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=yp(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(mp(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=hp(e);return new ep(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=op.fromString(e);Ld(sm(n));var r=new P_(n.get(1),n.get(3)),i=new bp(n.popFirst(5));return r.isEqual(t)||Rd("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function lT(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var fT=function(e){Ae(n,e);var t=Pe(n);function n(e){var r;return Te(this,n),(r=t.call(this)).firestore=e,r}return Ee(n,[{key:"convertBytes",value:function(e){return new cx(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new B_(this.firestore,null,t)}}]),n}(cT),hT=function(){function e(t,n){Te(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=gx(t)}return Ee(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=dT(e,this._firestore),i=lT(r.converter,t,n),a=kx(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,jv.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=dT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=st(t))||t instanceof sx?Sx(this._dataReader,"WriteBatch.update",i._key,t,n,o):Ex(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,jv.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=dT(e,this._firestore);return this._mutations=this._mutations.concat(new ey(t._key,jv.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Fd(Ud.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function dT(e,t){if((e=st(e)).firestore!==t)throw new Fd(Ud.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var pT=function(e){Ae(n,e);var t=Pe(n);function n(e){var r;return Te(this,n),(r=t.call(this)).firestore=e,r}return Ee(n,[{key:"convertBytes",value:function(e){return new cx(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new B_(this.firestore,null,t)}}]),n}(cT);function vT(e){e=j_(e,B_);var t=j_(e.firestore,Z_),n=ex(t),r=new pT(t);return function(e,t){var n=new jd;return e.asyncQueue.enqueueAndForget(be(ke().mark((function r(){return ke().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=be(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Md(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Wn.Rn(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Fd(Ud.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=jw(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,T_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new qx(t,r,e._key,n,new zx(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function yT(e){e=j_(e,H_);var t=j_(e.firestore,Z_),n=ex(t),r=new pT(t);return function(e,t){var n=new jd;return e.asyncQueue.enqueueAndForget(be(ke().mark((function r(){return ke().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=be(ke().mark((function e(t,n,r){var i,a,o,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ck(t,n,!0);case 3:i=e.sent,a=new ab(n,i.zn),o=a.bo(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=jw(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,T_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Hx(t,r,e,n)}))}function mT(e,t,n){e=j_(e,B_);var r=j_(e.firestore,Z_),i=lT(e.converter,t,n);return bT(r,[kx(gx(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,jv.none())])}function gT(e,t,n){e=j_(e,B_);for(var r=j_(e.firestore,Z_),i=gx(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return bT(r,[("string"==typeof(t=st(t))||t instanceof sx?Sx(i,"updateDoc",e._key,t,n,o):Ex(i,"updateDoc",e._key,t)).toMutation(e._key,jv.exists(!0))])}function kT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=st(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||J_(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(J_(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof B_)l=j_(e.firestore,Z_),f=uv(e._key.path),c={next:function(t){n[s]&&n[s](_T(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=j_(e,H_);l=j_(p.firestore,Z_),f=p._query;var v=new pT(l);c={next:function(e){n[s]&&n[s](new Hx(l,v,p,e))},error:n[s+1],complete:n[s+2]},Gx(e._query)}return function(e,t,n,r){var i=new l_(r),a=new Xw(t,i,n);return e.asyncQueue.enqueueAndForget(be(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Ww,t.next=3,S_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.na(),e.asyncQueue.enqueueAndForget(be(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Gw,t.next=3,S_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(ex(l),f,h,c)}function wT(e,t){return function(e,t){var n=new l_(t);return e.asyncQueue.enqueueAndForget(be(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Md(e).io.add(t),t.next()},t.next=3,S_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.na(),e.asyncQueue.enqueueAndForget(be(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Md(e).io.delete(t)},t.next=3,S_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(ex(e=j_(e,Z_)),J_(t)?t:{next:t})}function bT(e,t){return function(e,t){var n=new jd;return e.asyncQueue.enqueueAndForget(be(ke().mark((function r(){return ke().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=vb,r.next=3,E_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(ex(e),t)}function _T(e,t,n){var r=n.docs.get(t._key),i=new pT(e);return new qx(e,i,t._key,r,new zx(n.hasPendingWrites,n.fromCache),t.converter)}var xT=function(e){Ae(n,e);var t=Pe(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e,r))._firestore=e,i}return Ee(n,[{key:"get",value:function(e){var t=this,r=dT(e,this._firestore),i=new pT(this._firestore);return un(Ne(n.prototype),"get",this).call(this,e).then((function(e){return new qx(t._firestore,i,r._key,e._document,new zx(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Te(this,e),this._firestore=t,this._transaction=n,this._dataReader=gx(t)}return Ee(e,[{key:"get",value:function(e){var t=this,n=dT(e,this._firestore),r=new fT(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Dd();var i=e[0];if(i.isFoundDocument())return new Fx(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Fx(t._firestore,r,n._key,null,n.converter);throw Dd()}))}},{key:"set",value:function(e,t,n){var r=dT(e,this._firestore),i=lT(r.converter,t,n),a=kx(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=dT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=st(t))||t instanceof sx?Sx(this._dataReader,"Transaction.update",i._key,t,n,o):Ex(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=dT(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function TT(e,t){return function(e,t){var n=new jd;return e.asyncQueue.enqueueAndForget(be(ke().mark((function r(){var i;return ke().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return b_(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new d_(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(ex(e=j_(e,Z_)),(function(n){return t(new xT(e,n))}))}function IT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new xx("arrayUnion",t)}function ET(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Tx("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Sd=e}(Ht),Lt(new ft("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new Z_(i,new Bd(e.getProvider("auth-internal")),new Gd(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Yt(Id,"3.4.1",e),Yt(Id,"3.4.1","esm2017")}();function ST(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Fd("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function CT(){if("undefined"===typeof Uint8Array)throw new Fd("unimplemented","Uint8Arrays are not available in this environment.")}function AT(){if("undefined"==typeof atob)throw new Fd("unimplemented","Blobs are unavailable in Firestore in this environment.")}var NT=function(){function e(t){Te(this,e),this._delegate=t}return Ee(e,[{key:"toBase64",value:function(){return AT(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return CT(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return AT(),new e(cx.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return CT(),new e(cx.fromUint8Array(t))}}]),e}();function RT(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Se(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var PT=function(){function e(){Te(this,e)}return Ee(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){ux(e=j_(e,Z_));var n=ex(e),r=e._freezeSettings(),i=new s_;return nx(n,i,new o_(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){ux(e=j_(e,Z_));var t=ex(e),n=e._freezeSettings(),r=new s_;return nx(t,r,new u_(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Fd(Ud.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new jd;return e._queue.enqueueAndForgetEvenWhileRestricted(be(ke().mark((function n(){return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Dm.bt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Dm.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Kg(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),OT=function(){function e(t,n,r){var i=this;Te(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof P_||(this._appCompat=t)}return Ee(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Pd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=j_(e,q_))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Pd("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Ed.MOCK_USER;else{o=qe(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Fd(Ud.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ed(s)}e._authCredentials=new qd(new Vd(o,u))}}(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return rx(this._delegate)}},{key:"disableNetwork",value:function(){return ix(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&L_("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new jd;return e.asyncQueue.enqueueAndForget(be(ke().mark((function n(){return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Eb,n.next=3,E_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(ex(e=j_(e,Z_)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return wT(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Fd("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new GT(this,K_(this._delegate,e))}catch(t){throw jT(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new FT(this,G_(this._delegate,e))}catch(t){throw jT(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new HT(this,function(e,t){if(e=j_(e,q_),D_("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Fd(Ud.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new H_(e,null,function(e){return new av(op.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw jT(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return TT(this._delegate,(function(n){return e(new LT(t,n))}))}},{key:"batch",value:function(){var e=this;return ex(this._delegate),new MT(new hT(this._delegate,(function(t){return bT(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return ax(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return ox(this._delegate,e).then((function(e){return e?new HT(t,e):null}))}}]),e}(),DT=function(e){Ae(n,e);var t=Pe(n);function n(e){var r;return Te(this,n),(r=t.call(this)).firestore=e,r}return Ee(n,[{key:"convertBytes",value:function(e){return new NT(new cx(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return FT.forKey(t,this.firestore,null)}}]),n}(cT);var LT=function(){function e(t,n){Te(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new DT(t)}return Ee(e,[{key:"get",value:function(e){var t=this,n=QT(e);return this._delegate.get(n).then((function(e){return new qT(t._firestore,new qx(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=QT(e);return n?(ST("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=QT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=QT(e);return this._delegate.delete(t),this}}]),e}(),MT=function(){function e(t){Te(this,e),this._delegate=t}return Ee(e,[{key:"set",value:function(e,t,n){var r=QT(e);return n?(ST("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=QT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=QT(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),UT=function(){function e(t,n,r){Te(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Ee(e,[{key:"fromFirestore",value:function(e,t){var n=new Bx(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new BT(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new DT(t),n),i.set(n,a)),a}}]),e}();UT.INSTANCES=new WeakMap;var FT=function(){function e(t,n){Te(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new DT(t)}return Ee(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new GT(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new GT(this.firestore,K_(this._delegate,e))}catch(t){throw jT(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=st(e))instanceof B_&&Q_(this._delegate,e)}},{key:"set",value:function(e,t){t=ST("DocumentReference.set",t);try{return t?mT(this._delegate,e,t):mT(this._delegate,e)}catch(n){throw jT(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?gT(this._delegate,e):gT.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw jT(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return bT(j_(e.firestore,Z_),[new ey(e._key,jv.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=VT(n),a=zT(n,(function(t){return new qT(e.firestore,new qx(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return kT(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?vT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=j_(e,B_);var t=j_(e.firestore,Z_);return A_(ex(t),e._key,{source:"server"}).then((function(n){return _T(t,e,n)}))}(this._delegate):function(e){e=j_(e,B_);var t=j_(e.firestore,Z_);return A_(ex(t),e._key).then((function(n){return _T(t,e,n)}))}(this._delegate),t.then((function(e){return new qT(n.firestore,new qx(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(UT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Fd("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new B_(n._delegate,r,new bp(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new B_(n._delegate,r,t))}}]),e}();function jT(e,t,n){return e.message=e.message.replace(t,n),e}function VT(e){var t,n=Se(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!RT(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function zT(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=RT(e[0])?e[0]:RT(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var qT=function(){function e(t,n){Te(this,e),this._firestore=t,this._delegate=n}return Ee(e,[{key:"ref",get:function(){return new FT(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Kx(this._delegate,e._delegate)}}]),e}(),BT=function(e){Ae(n,e);var t=Pe(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ee(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Dd()}(void 0!==t),t}}]),n}(qT),HT=function(){function e(t,n){Te(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new DT(t)}return Ee(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,$x(this._delegate,function(e,t,n){var r=t,i=Vx("where",e);return new Yx(i,r,n)}(t,n,r)))}catch(i){throw jT(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,$x(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Vx("orderBy",e);return new Jx(n,t)}(t,n)))}catch(r){throw jT(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,$x(this._delegate,function(e){return V_("limit",e),new Xx("limit",e,"F")}(t)))}catch(n){throw jT(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,$x(this._delegate,function(e){return V_("limitToLast",e),new Xx("limitToLast",e,"L")}(t)))}catch(n){throw jT(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,$x(this._delegate,eT.apply(void 0,arguments)))}catch(t){throw jT(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,$x(this._delegate,tT.apply(void 0,arguments)))}catch(t){throw jT(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,$x(this._delegate,rT.apply(void 0,arguments)))}catch(t){throw jT(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,$x(this._delegate,iT.apply(void 0,arguments)))}catch(t){throw jT(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return $_(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?yT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=j_(e,H_);var t=j_(e.firestore,Z_),n=ex(t),r=new pT(t);return N_(n,e._query,{source:"server"}).then((function(n){return new Hx(t,r,e,n)}))}(this._delegate):function(e){e=j_(e,H_);var t=j_(e.firestore,Z_),n=ex(t),r=new pT(t);return Gx(e._query),N_(n,e._query).then((function(n){return new Hx(t,r,e,n)}))}(this._delegate),t.then((function(e){return new KT(n.firestore,new Hx(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=VT(n),a=zT(n,(function(t){return new KT(e.firestore,new Hx(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return kT(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(UT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),WT=function(){function e(t,n){Te(this,e),this._firestore=t,this._delegate=n}return Ee(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new BT(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),KT=function(){function e(t,n){Te(this,e),this._firestore=t,this._delegate=n}return Ee(e,[{key:"query",get:function(){return new HT(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new BT(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new WT(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new BT(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Kx(this._delegate,e._delegate)}}]),e}(),GT=function(e){Ae(n,e);var t=Pe(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Ee(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new FT(this.firestore,e):null}},{key:"doc",value:function(e){try{return new FT(this.firestore,void 0===e?G_(this._delegate):G_(this._delegate,e))}catch(t){throw jT(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=j_(e.firestore,Z_),r=G_(e),i=lT(e.converter,t);return bT(n,[kx(gx(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,jv.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new FT(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Q_(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(UT.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(HT);function QT(e){return j_(e,B_)}var $T=function(){function e(){Te(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Oe(sx,n)}return Ee(e,[{key:"isEqual",value:function(e){return(e=st(e))instanceof sx&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(sp.keyField().canonicalString())}}]),e}(),YT=function(){function e(t){Te(this,e),this._delegate=t}return Ee(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new _x("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new wx("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=IT.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=ET.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Ix("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),JT={Firestore:OT,GeoPoint:fx,Timestamp:ep,Blob:NT,Transaction:LT,WriteBatch:MT,DocumentReference:FT,DocumentSnapshot:qT,Query:HT,QueryDocumentSnapshot:BT,QuerySnapshot:KT,CollectionReference:GT,FieldPath:$T,FieldValue:YT,setLogLevel:function(e){!function(e){Cd.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new ft("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},JT)))}(e,(function(e,t){return new OT(e,t,new PT)})),e.registerVersion("@firebase/firestore-compat","0.1.10")}(on);var XT="firebasestorage.googleapis.com",ZT="storageBucket",eI=function(e){Ae(n,e);var t=Pe(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,tI(e),"Firebase Storage: ".concat(r," (").concat(tI(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(Ce(i),n.prototype),i}return Ee(n,[{key:"_codeEquals",value:function(e){return tI(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Ye);function tI(e){return"storage/"+e}function nI(){return new eI("unknown","An unknown error occurred, please check the error payload for server response.")}function rI(){return new eI("canceled","User canceled the upload/download.")}function iI(){return new eI("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function aI(e){return new eI("invalid-argument",e)}function oI(){return new eI("app-deleted","The Firebase app was deleted.")}function uI(e){return new eI("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function sI(e,t){return new eI("invalid-format","String does not match format '"+e+"': "+t)}function cI(e){throw new eI("internal-error","Internal error: "+e)}var lI,fI=function(){function e(t,n){Te(this,e),this.bucket=t,this.path_=n}return Ee(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new eI("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===XT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new eI("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),hI=function(){function e(t){Te(this,e),this.promise_=Promise.reject(t)}return Ee(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function dI(e){return"string"===typeof e||e instanceof String}function pI(e){return vI()&&e instanceof Blob}function vI(){return"undefined"!==typeof Blob}function yI(e,t,n,r){if(r<t)throw aI("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw aI("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function mI(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function gI(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(lI||(lI={}));var kI=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this;Te(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return Ee(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=nI();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?oI():rI());else i(new eI("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new wI(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new wI(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===lI.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new wI(o,r))}else{var u=r.getErrorCode()===lI.ABORT;t(!1,new wI(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),wI=Ee((function e(t,n,r){Te(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function bI(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function _I(){for(var e=bI(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(vI())return new Blob(n);throw new eI("unsupported-environment","This browser doesn't seem to support creating Blobs")}var xI={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},TI=Ee((function e(t,n){Te(this,e),this.data=t,this.contentType=n||null}));function II(e,t){switch(e){case xI.RAW:return new TI(EI(t));case xI.BASE64:case xI.BASE64URL:return new TI(SI(e,t));case xI.DATA_URL:return new TI(function(e){var t=new CI(e);return t.base64?SI(xI.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw sI(xI.DATA_URL,"Malformed data URL.")}return EI(t)}(t.rest)}(t),new CI(t).contentType)}throw nI()}function EI(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function SI(e,t){switch(e){case xI.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw sI(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case xI.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw sI(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw sI(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var CI=Ee((function e(t){Te(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw sI(xI.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var AI=function(){function e(t,n){Te(this,e);var r=0,i="";pI(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return Ee(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(pI(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(vI()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(_I.apply(null,i))}var a=n.map((function(e){return dI(e)?II(xI.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function NI(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function RI(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function PI(e,t){return t}var OI=Ee((function e(t,n,r,i){Te(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||PI})),DI=null;function LI(){if(DI)return DI;var e=[];e.push(new OI("bucket")),e.push(new OI("generation")),e.push(new OI("metageneration")),e.push(new OI("name","fullPath",!0));var t=new OI("name");t.xform=function(e,t){return function(e){return!dI(e)||e.length<2?e:RI(e)}(t)},e.push(t);var n=new OI("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new OI("timeCreated")),e.push(new OI("updated")),e.push(new OI("md5Hash",null,!0)),e.push(new OI("cacheControl",null,!0)),e.push(new OI("contentDisposition",null,!0)),e.push(new OI("contentEncoding",null,!0)),e.push(new OI("contentLanguage",null,!0)),e.push(new OI("contentType",null,!0)),e.push(new OI("metadata","customMetadata",!0)),DI=e}function MI(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new fI(n,r);return t._makeStorageReference(i)}})}(r,e),r}function UI(e,t,n){var r=NI(t);return null===r?null:MI(e,r,n)}function FI(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var jI="prefixes",VI="items";function zI(e,t,n){var r=NI(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[jI]){var i,a=Se(n[jI]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new fI(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n[VI]){var s,c=Se(n[VI]);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new fI(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var qI=Ee((function e(t,n,r,i){Te(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function BI(e){if(!e)throw nI()}function HI(e,t){return function(n,r){var i=UI(e,r,t);return BI(null!==i),i}}function WI(e,t){return function(n,r){var i=UI(e,r,t);return BI(null!==i),function(e,t,n,r){var i=NI(t);if(null===i)return null;if(!dI(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return mI("/b/"+o(i)+"/o/"+o(a),n,r)+gI({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function KI(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new eI("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new eI("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new eI("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new eI("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function GI(e){var t=KI(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new eI("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function QI(e,t,n){var r=mI(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new qI(r,"GET",HI(e,n),i);return a.errorHandler=GI(t),a}function $I(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=mI(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new qI(o,"GET",function(e,t){return function(n,r){var i=zI(e,t,r);return BI(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=KI(t),s}function YI(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function JI(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=YI(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+FI(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=AI.getBlob(c,r,l);if(null===f)throw iI();var h={name:s.fullPath},d=mI(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new qI(d,"POST",HI(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=KI(t),v}var XI=Ee((function e(t,n,r,i){Te(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function ZI(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){BI(!1)}return BI(!!n&&-1!==(t||["active"]).indexOf(n)),n}var eE=262144;function tE(e,t,n,r,i,a,o,u){var s=new XI(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new eI("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw iI();var v=t.maxUploadRetryTime,y=new qI(n,"POST",(function(e,n){var i,o=ZI(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?HI(t,a)(e,n):null,new XI(u,c,"final"===o,i)}),v);return y.headers=d,y.body=p.uploadData(),y.progressCallback=u||null,y.errorHandler=KI(e),y}var nE={STATE_CHANGED:"state_changed"},rE={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function iE(e){switch(e){case"running":case"pausing":case"canceling":return rE.RUNNING;case"paused":return rE.PAUSED;case"success":return rE.SUCCESS;case"canceled":return rE.CANCELED;default:return rE.ERROR}}var aE=Ee((function e(t,n,r){Te(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function oE(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var uE=null,sE=function(){function e(){var t=this;Te(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=lI.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=lI.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=lI.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return Ee(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw cI("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw cI("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw cI("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw cI("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw cI("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),cE=function(e){Ae(n,e);var t=Pe(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ee(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(sE);function lE(){return uE?uE():new cE}var fE=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Te(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=LI(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return Ee(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=s(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=YI(t,r,i),u={name:o.fullPath},s=mI(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=FI(o,n),f=e.maxUploadRetryTime,h=new qI(s,"POST",(function(e){var t;ZI(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){BI(!1)}return BI(dI(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=KI(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,lE,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new qI(n,"POST",(function(e){var t=ZI(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){BI(!1)}n||BI(!1);var i=Number(n);return BI(!isNaN(i)),new XI(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=KI(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,lE,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=eE*this._chunkMultiplier,n=new XI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=tE(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,lE,i,a);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){eE*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=QI(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,lE,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=JI(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,lE,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=rI(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=iE(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new aE(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(iE(this._state)){case rE.SUCCESS:oE(this._resolve.bind(null,this.snapshot))();break;case rE.CANCELED:case rE.ERROR:oE(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(iE(this._state)){case rE.RUNNING:case rE.PAUSED:e.next&&oE(e.next.bind(e,this.snapshot))();break;case rE.SUCCESS:e.complete&&oE(e.complete.bind(e))();break;case rE.CANCELED:case rE.ERROR:default:e.error&&oE(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),hE=function(){function e(t,n){Te(this,e),this._service=t,this._location=n instanceof fI?n:fI.makeFromUrl(n,t.host)}return Ee(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new fI(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return RI(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new fI(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw uI(e)}}]),e}();function dE(e,t,n){return pE.apply(this,arguments)}function pE(){return(pE=be(ke().mark((function e(t,n,r){var i,a,o,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,vE(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,lt(u.prefixes)),(a=n.items).push.apply(a,lt(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,dE(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vE(e,t){null!=t&&"number"===typeof t.maxResults&&yI("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=$I(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,lE)}function yE(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=mI(t.fullServerUrl(),e.host,e._protocol),a=FI(n,r),o=e.maxOperationRetryTime,u=new qI(i,"PATCH",HI(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=GI(t),u}(e.storage,e._location,t,LI());return e.storage.makeRequestWithTokens(n,lE)}function mE(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=mI(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new qI(r,"GET",WI(e,n),i);return a.errorHandler=GI(t),a}(e.storage,e._location,LI());return e.storage.makeRequestWithTokens(t,lE).then((function(e){if(null===e)throw new eI("no-download-url","The given file does not have any download URLs.");return e}))}function gE(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=mI(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new qI(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=GI(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,lE)}function kE(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new fI(e._location.bucket,n);return new hE(e.storage,r)}function wE(e,t){if(e instanceof xE){var n=e;if(null==n._bucket)throw new eI("no-default-bucket","No default bucket found. Did you set the '"+ZT+"' property when initializing the app?");var r=new hE(n,n._bucket);return null!=t?wE(r,t):r}return void 0!==t?kE(e,t):e}function bE(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof xE)return new hE(e,t);throw aI("To use ref(service, url), the first argument must be a Storage instance.")}return wE(e,t)}function _E(e,t){var n=null===t||void 0===t?void 0:t[ZT];return null==n?null:fI.makeFromBucketSpec(n,e)}var xE=function(){function e(t,n,r,i,a){Te(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=XT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?fI.makeFromBucketSpec(i,this._host):_E(this._host,this.app.options)}return Ee(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=fI.makeFromBucketSpec(this._url,e):this._bucket=_E(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){yI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){yI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=be(ke().mark((function e(){var t,n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=be(ke().mark((function e(){var t,n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new hE(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new hI(oI());var a=function(e,t,n,r,i,a){var o=gI(e.urlParams),u=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(s,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(s,r),new kI(u,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=be(ke().mark((function e(t,n){var r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=s(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),TE="@firebase/storage",IE="0.9.0",EE="storage";function SE(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new fE(e,new AI(t),n)}(e=st(e),t,n)}function CE(e){return function(e){e._throwIfRoot("getMetadata");var t=QI(e.storage,e._location,LI());return e.storage.makeRequestWithTokens(t,lE)}(e=st(e))}function AE(e){return function(e){var t={prefixes:[],items:[]};return dE(e,t).then((function(){return t}))}(e=st(e))}function NE(e,t){return bE(e=st(e),t)}function RE(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:qe(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function PE(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new xE(r,i,a,n,Ht)}Lt(new ft(EE,PE,"PUBLIC").setMultipleInstances(!0)),Yt(TE,IE,""),Yt(TE,IE,"esm2017");var OE=function(){function e(t,n,r){Te(this,e),this._delegate=t,this.task=n,this.ref=r}return Ee(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),DE=function(){function e(t,n){Te(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Ee(e,[{key:"snapshot",get:function(){return new OE(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new OE(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new OE(e,i,i._ref))}:{next:t.next?function(e){return t.next(new OE(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),LE=function(){function e(t,n){Te(this,e),this._delegate=t,this._service=n}return Ee(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new ME(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new ME(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),ME=function(){function e(t,n){Te(this,e),this._delegate=t,this.storage=n}return Ee(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return kE(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new DE(SE(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xI.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=II(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new DE(new fE(this._delegate,new AI(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return AE(this._delegate).then((function(t){return new LE(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return vE(e=st(e),t)}(this._delegate,e||void 0).then((function(e){return new LE(e,t.storage)}))}},{key:"getMetadata",value:function(){return CE(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return yE(e=st(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return mE(st(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),gE(st(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw uI(e)}}]),e}(),UE=function(){function e(t,n){Te(this,e),this.app=t,this._delegate=n}return Ee(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(FE(e))throw aI("ref() expected a child path but got a URL, use refFromURL instead.");return new ME(NE(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!FE(e))throw aI("refFromURL() expected a full URL but got a child path, use ref() instead.");try{fI.makeFromUrl(e,this._delegate.host)}catch(t){throw aI("refFromUrl() expected a valid full URL but got an invalid one.")}return new ME(NE(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};RE(this._delegate,e,t,n)}}]),e}();function FE(e){return/^[A-Za-z]+:\/\//.test(e)}function jE(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new UE(r,i)}!function(e){var t={TaskState:rE,TaskEvent:nE,StringFormat:xI,Storage:UE,Reference:ME};e.INTERNAL.registerComponent(new ft("storage-compat",jE,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.8")}(on);on.initializeApp({apiKey:"AIzaSyC_tu8LNFnMoVw-0OaOmopurLCy9YOa7wY",authDomain:"nwitter-f3e1d.firebaseapp.com",projectId:"nwitter-f3e1d",storageBucket:"nwitter-f3e1d.appspot.com",messagingSenderId:"",appId:"1:931248421559:web:0a359dceffdf0d71f3eb32"});var VE=on,zE=on.auth(),qE=on.firestore(),BE=on.storage(),HE=n(184),WE=function(){var e=s((0,t.useState)(""),2),n=e[0],r=e[1],i=s((0,t.useState)(""),2),a=i[0],o=i[1],u=s((0,t.useState)(!0),2),c=u[0],l=u[1],f=s((0,t.useState)(""),2),h=f[0],d=f[1],p=function(e){var t=e.target,n=t.name,i=t.value;"email"===n?r(i):"password"===n&&o(i)},v=function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!c){e.next=8;break}return e.next=5,zE.createUserWithEmailAndPassword(n,a);case 5:e.sent,e.next=11;break;case 8:return e.next=10,zE.signInWithEmailAndPassword(n,a);case 10:e.sent;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),d(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return(0,HE.jsxs)(HE.Fragment,{children:[(0,HE.jsxs)("form",{onSubmit:v,children:[(0,HE.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:n,onChange:p}),(0,HE.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:a,onChange:p}),(0,HE.jsx)("input",{type:"submit",value:c?"Create Account":"Log In"}),h]}),(0,HE.jsx)("span",{onClick:function(){return l((function(e){return!e}))},children:c?"Sign In":"Create Account"})]})},KE=function(){var e=function(){var e=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(n=t.target.name)?r=new VE.auth.GoogleAuthProvider:"github"===n&&(r=new VE.auth.GithubAuthProvider),e.next=4,zE.signInWithPopup(r);case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,HE.jsxs)("div",{children:[(0,HE.jsx)(WE,{}),(0,HE.jsxs)("div",{children:[(0,HE.jsx)("button",{onClick:e,name:"google",children:"Continue with Google"}),(0,HE.jsx)("button",{onClick:e,name:"github",children:"Continue with Github"})]})]})};function GE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var QE,$E=function(e){var n=e.nweetObj,r=e.isOwner,i=s((0,t.useState)(!1),2),a=i[0],o=i[1],u=s((0,t.useState)(n.text),2),c=u[0],l=u[1],f=function(){var e=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.confirm("Are you sure you want to delete it?"),console.log(t),!t){e.next=8;break}return e.next=5,qE.doc("nweets/".concat(n.id)).delete();case 5:if(""===n.attachmentUrl){e.next=8;break}return e.next=8,BE.refFromURL(n.attachmentUrl).delete();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){return o((function(e){return!e}))},d=function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,qE.doc("nweets/".concat(n.id)).update({text:c});case 3:o(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,HE.jsx)("div",{children:a?(0,HE.jsxs)(HE.Fragment,{children:[(0,HE.jsxs)("form",{onSubmit:d,children:[(0,HE.jsx)("input",{type:"text",placeholder:"Edit your nweet",value:c,required:!0,onChange:function(e){var t=e.target.value;l(t)}}),(0,HE.jsx)("input",{type:"submit",value:"Update Nweet"})]}),(0,HE.jsx)("button",{onClick:h,children:"Cancel"})]}):(0,HE.jsxs)(HE.Fragment,{children:[(0,HE.jsx)("h4",{children:n.text}),n.attachmentUrl&&(0,HE.jsx)("img",{src:n.attachmentUrl,width:"50px",height:"50px"}),r&&(0,HE.jsxs)(HE.Fragment,{children:[(0,HE.jsx)("button",{onClick:f,children:"Delete Nweet"}),(0,HE.jsx)("button",{onClick:h,children:"Edit Nweet"})]})]})})},YE={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},JE=new Uint8Array(16);function XE(){if(!QE&&!(QE="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return QE(JE)}for(var ZE=[],eS=0;eS<256;++eS)ZE.push((eS+256).toString(16).slice(1));function tS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(ZE[e[t+0]]+ZE[e[t+1]]+ZE[e[t+2]]+ZE[e[t+3]]+"-"+ZE[e[t+4]]+ZE[e[t+5]]+"-"+ZE[e[t+6]]+ZE[e[t+7]]+"-"+ZE[e[t+8]]+ZE[e[t+9]]+"-"+ZE[e[t+10]]+ZE[e[t+11]]+ZE[e[t+12]]+ZE[e[t+13]]+ZE[e[t+14]]+ZE[e[t+15]]).toLowerCase()}var nS=function(e,t,n){if(YE.randomUUID&&!t&&!e)return YE.randomUUID();var r=(e=e||{}).random||(e.rng||XE)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return tS(r)},rS=function(e){var n=e.userObj,r=s((0,t.useState)(""),2),i=r[0],a=r[1],o=s((0,t.useState)(""),2),u=o[0],c=o[1],l=function(){var e=be(ke().mark((function e(t){var r,o,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r="",""===u){e.next=10;break}return o=BE.ref().child("".concat(n.uid,"/").concat(nS())),e.next=6,o.putString(u,"data_url");case 6:return s=e.sent,e.next=9,s.ref.getDownloadURL();case 9:r=e.sent;case 10:return e.next=12,qE.collection("nweets").add({text:i,createAt:Date.now(),creatorId:n.uid,attachmentUrl:r});case 12:a(""),c("");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,HE.jsxs)("form",{onSubmit:l,children:[(0,HE.jsx)("input",{value:i,onChange:function(e){var t=e.target.value;a(t)},type:"text",placeholder:"What's on your mind?",maxLength:120}),(0,HE.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;c(t)},n.readAsDataURL(t)}}),(0,HE.jsx)("input",{type:"submit",value:"Nweet"}),u&&(0,HE.jsxs)("div",{children:[(0,HE.jsx)("img",{src:u,width:"150px",height:"150px"}),(0,HE.jsx)("button",{onClick:function(){c("")},children:"Clear"})]})]})},iS=function(e){var n=e.userObj,r=s((0,t.useState)([]),2),i=r[0],a=r[1];return(0,t.useEffect)((function(){qE.collection("nweets").onSnapshot((function(e){var t=e.docs.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GE(Object(n),!0).forEach((function(t){xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e.id},e.data())}));a(t)}))}),[]),(0,HE.jsxs)(HE.Fragment,{children:[(0,HE.jsx)(rS,{userObj:n}),(0,HE.jsx)("div",{children:i.map((function(e){return(0,HE.jsx)($E,{nweetObj:e,isOwner:e.creatorId===n.uid},e.id)}))})]})},aS=function(e){var n=e.userObj,r=e.refreshUser,i=se(Q),a=s((0,t.useState)(n.displayName),2),o=a[0],u=a[1],c=function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n.displayName===o){e.next=5;break}return e.next=4,n.updateProfile({displayName:o});case 4:r();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,HE.jsxs)(HE.Fragment,{children:[(0,HE.jsxs)("form",{onSubmit:c,children:[(0,HE.jsx)("input",{onChange:function(e){var t=e.target.value;u(t)},type:"text",placeholder:"Display name",value:o}),(0,HE.jsx)("input",{type:"submit",value:"Update Profile"})]}),(0,HE.jsx)("button",{onClick:function(){zE.signOut(),i.push("/")},children:"Log Out"})]})},oS=function(e){var t=e.userObj;return(0,HE.jsx)("nav",{children:(0,HE.jsxs)("ul",{children:[(0,HE.jsx)("li",{children:(0,HE.jsx)(ve,{to:"/",children:"Home"})}),(0,HE.jsx)("li",{children:(0,HE.jsxs)(ve,{to:"/profile",children:[t.displayName,"\uc758 Profile"]})})]})})},uS=function(e){var t=e.isLoggedIn,n=e.userObj,r=e.refreshUser;return(0,HE.jsxs)(ce,{children:[t&&(0,HE.jsx)(oS,{userObj:n}),(0,HE.jsx)(ue,{children:t?(0,HE.jsxs)(HE.Fragment,{children:[(0,HE.jsx)(te,{exact:!0,path:"/",children:(0,HE.jsx)(iS,{userObj:n})}),(0,HE.jsx)(te,{exact:!0,path:"/profile",children:(0,HE.jsx)(aS,{refreshUser:r,userObj:n})})]}):(0,HE.jsx)(te,{exact:!0,path:"/",children:(0,HE.jsx)(KE,{})})})]})};var sS=function(){var e=s((0,t.useState)(!1),2),n=e[0],r=e[1],i=s((0,t.useState)(null),2),a=i[0],o=i[1];return(0,t.useEffect)((function(){zE.onAuthStateChanged((function(e){o(!!e&&{uid:e.uid,displayName:e.displayName,updateProfile:function(t){return e.updateProfile(t)}}),r(!0)}))}),[]),(0,HE.jsxs)(HE.Fragment,{children:[n?(0,HE.jsx)(uS,{refreshUser:function(){var e=zE.currentUser;o({uid:e.uid,displayName:e.displayName,updateProfile:function(t){return e.updateProfile(t)}})},isLoggedIn:Boolean(a),userObj:a}):"initializing...",(0,HE.jsxs)("footer",{children:["\xa9 ",(new Date).getFullYear()," Nwitter"]})]})};r.createRoot(document.getElementById("root")).render((0,HE.jsx)(sS,{}))}()}();
//# sourceMappingURL=main.f8daa091.js.map